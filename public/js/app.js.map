{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["// Bower modules\r\n\r\nimport angular from 'angular';\r\nimport 'angular-animate';\r\nimport 'angular-cookies';\r\nimport 'angular-foundation';\r\nimport 'angular-json-editor';\r\nimport 'angular-oclazyload';\r\nimport 'angular-ui-router';\r\nimport 'angular-ui-tree';\r\nimport 'angular-clipboard';\r\nimport 'angular-hotkeys';\r\nimport 'angular-scroll';\r\nimport 'ngReact';\r\n\r\n\r\nimport 'file-upload';\r\nimport 'ngstorage';\r\nimport 'sceditor';\r\nimport 'template-cached-pages';\r\n// Our modules\r\nimport 'app-config';\r\nimport 'author';\r\nimport 'i18n';\r\nimport 'dps';\r\nimport 'skins'\r\nimport 'dictionary';\r\nimport 'info';\r\nimport 'modal-controllers';\r\nimport 'skin-directives'\r\nimport 'user';\r\nimport 'widget-api';\r\n\r\n\r\n\r\n\r\nconst app = angular.module('app', ['ui.router', 'ngStorage', 'ngAnimate', 'oc.lazyLoad', 'mm.foundation',\r\n  'ngCookies', 'angular-json-editor', 'ui.tree','angular-clipboard','cfp.hotkeys',\r\n  'app.templates', 'react', 'duScroll',\r\n  'app.widgetApi', 'app.config', 'app.i18n','app.dps', 'app.skins','app.skinDirectives',\r\n  'app.user', 'app.info', 'app.author', 'app.modals','app.dictionary']);\r\n\r\napp.constant(\"portal\", {\r\n        api:{\r\n          setConfig: \"/api/app/config/set\",\r\n          getConfig:\"/api/app/config/get\"\r\n        }\r\n});        \r\n\r\napp.factory('appUrls', function (appId) {\r\n  return {\r\n    api: {\r\n      createApp: (appName, skinName = 'default') =>\r\n        `/api/app/create/${appName}?skinName=${skinName}`,\r\n      destroy: appId => `/api/app/destroy/${appId}`,\r\n      'import': '/api/app/import',\r\n      rename: (appId, newAppName) => `/api/app/rename/${appId}/${newAppName}/`\r\n    },\r\n    app: (appName, page) => `/app/${appName}/${page || ''}`,\r\n    appConfig: `/api/app/config/${appId}`,\r\n    appList: '/api/app/get-list',\r\n    googleAuth: `/auth/google`,\r\n    logout: `/logout`,\r\n    usersList: `/api/users/list`,\r\n    setAdmin: '/api/admin/set',\r\n    createTimeline: '/api/timeline/upload',\r\n    templateTypes: '/templates/templates.json',\r\n    widgetTypes: '/widgets/widgets.json',\r\n    shareSettingsHTML: '/partials/share-settings.html',\r\n    appSettingsHTML: '/partials/app-settings.html',\r\n    resourceManagerHTML:'/partials/resource-manager.html',\r\n    pageManagerHTML: '/partials/page-manager.html',\r\n    translationManagerHTML:'/partials/translation-manager.html',\r\n    widgetHolderHTML: '/partials/widget-holder.html',\r\n    widgetModalConfigHTML: '/partials/widget-modal-config.html',\r\n    widgetModalAddNewHTML: '/partials/widget-modal-add-new.html',\r\n    viewPageConfigHTML : '/partials/view-page-config.html',\r\n    defaultWidgetIcon: '/widgets/default_widgets_icon.png',\r\n    skinUrl: skinName =>\r\n      `/skins/${skinName}.html`,\r\n    templateHTML: templateName =>\r\n      `/templates/${templateName}/template.html`,\r\n    templateIcon: templateName =>\r\n      `/templates/${templateName}/icon.png`,\r\n    widgetJS: widgetName =>\r\n      `/widgets/${widgetName}/widget.js`,\r\n    widgetJSModule: widgetName =>\r\n      `widgets/${widgetName}/widget`,\r\n    widgetHTML: widgetName =>\r\n      `/widgets/${widgetName}/widget.html`,\r\n    widgetIcon: widgetName =>\r\n      `/widgets/${widgetName}/icon.png`,\r\n    widgetHelp: (type, lang) =>\r\n      `/help/widget/${type}/${lang}`\r\n  };\r\n});\r\n\r\n// app.constant('homePageAppName', defaultApp);\r\n\r\napp.constant('globalConfig', {\r\n  designMode: false,\r\n  debugMode: false\r\n});\r\n\r\napp.constant('selectedHolder',null);\r\n\r\n// app.constant('appSkins', [\r\n//   {\r\n//     name: \"default\",\r\n//     title: \"Default\"\r\n//   }\r\n// ]);\r\n\r\n// app.factory(\"appSkins\", function($http){\r\n//  var list = [];\r\n//  if(list.length == 0){\r\n//       $http\r\n//       .get(\"./api/app/skins\")\r\n//       .then(function(resp){\r\n        \r\n//         list = resp.data.map((item) => {return {title:item, name:item}});\r\n//         console.log(\"Skins\", list)\r\n//       })\r\n//  }\r\n//  return list; \r\n// })\r\n\r\napp.constant('randomWidgetName', () => Math.random().toString(36).substring(2));\r\n\r\napp.value('duScrollDuration', 500)\r\napp.value('duScrollOffset', 50)\r\napp.value('duScrollEasing', function (t) { return 1+(--t)*t*t*t*t })\r\n\r\napp.service(\"$scroll\",function($document,APIUser){\r\n  return function(scope){\r\n    if(!scope.widget){\r\n      scope = (new APIUser()).getScopeByInstanceName(scope)\r\n    }\r\n    \r\n    if(scope){\r\n      var element = scope.container.getElement()[0].children[0];\r\n      $document.scrollToElementAnimated(element);\r\n    }\r\n  }\r\n})\r\n\r\napp.config(function ($stateProvider, $urlRouterProvider, $urlMatcherFactoryProvider,\r\n                     $locationProvider, $ocLazyLoadProvider, //$ViewScrollProvider,\r\n                     JSONEditorProvider, appName, defaultApp) {\r\n\r\n  $ocLazyLoadProvider.config({\r\n    loadedModules: ['app'],\r\n    asyncLoader: System.amdRequire.bind(System)\r\n  });\r\n\r\n  JSONEditorProvider.configure({\r\n    defaults: {\r\n      options: {\r\n        iconlib: 'foundation3',\r\n        theme: 'foundation5',\r\n        disable_collapse: true,\r\n        disable_edit_json: true,\r\n        disable_properties: true,\r\n        required_by_default: true\r\n      }\r\n    },\r\n    plugins: {\r\n      sceditor: {\r\n        style: '/components/SCEditor/minified/jquery.sceditor.default.min.css',\r\n        resizeWidth: false\r\n      }\r\n    }\r\n  });\r\n\r\n  $locationProvider.html5Mode(true);\r\n  // $ViewScrollProvider.useAnchorScroll();\r\n\r\n  // this doesn't seem to work, that's why the next snippet does the same\r\n  $urlMatcherFactoryProvider.strictMode(false);\r\n\r\n  $urlRouterProvider.when(`/app/${appName}`, ($state) => {\r\n    console.log(\"WHEN state\", $state)\r\n    $state.go('page', {href: ''});\r\n  });\r\n\r\n  // If url is not in this app URL scope - reload the whole page.\r\n  $urlRouterProvider\r\n    .otherwise(($injector, $location) => {\r\n      console.log(\"otherwise location\", $location)\r\n      $injector.get('$window').location.href = $location.url();\r\n    });\r\n\r\n  const pageConfig = ($q, alert, app, widgetLoader) => {\r\n    return $q((resolve, reject) => {\r\n      const pageConfig = app.pageConfig();\r\n\r\n      if (!pageConfig || !pageConfig.holders) {\r\n        resolve(pageConfig);\r\n        return;\r\n      }\r\n\r\n      const widgetTypes = [];\r\n      for (let holderName in pageConfig.holders) {\r\n        if (pageConfig.holders.hasOwnProperty(holderName)) {\r\n          for (let widget of pageConfig.holders[holderName].widgets) {\r\n            widgetTypes.push(widget.type);\r\n          }\r\n        }\r\n      }\r\n      widgetLoader.load(widgetTypes).then(() => {\r\n        resolve(pageConfig);\r\n      }, (err) => {\r\n        alert.error(`Error loading widget controllers. <br><br> ${err}`);\r\n        reject(err);\r\n      });\r\n    });\r\n  };\r\n\r\n  const templateProvider = ($http, $templateCache, appUrls, app) => {\r\n    const pageConfig = app.pageConfig();\r\n    if (!pageConfig || !pageConfig.template) {\r\n      return \"Page not found!\";\r\n    }\r\n\r\n    const url = appUrls.templateHTML(pageConfig.template);\r\n    return $http.get(url, {cache: $templateCache})\r\n      .then((result) => {\r\n        return result.data\r\n      });\r\n  };\r\n\r\n  $stateProvider\r\n    .state('page', {\r\n      url: appName !== defaultApp ? `/app/${appName}/:href` : '/:href',\r\n      resolve: {\r\n        pageConfig\r\n      },\r\n      templateProvider,\r\n      controller: 'PageController'\r\n    });\r\n});\r\n\r\napp.factory('fullReload', function ($window) {\r\n  return (url) => $window.location.href = url;\r\n});\r\n\r\napp.factory('selectHolder', function (selectedHolder) {\r\n  return (holderScope) => {\r\n    // console.log(\"Selected holder\", selectedHolder, \"Event Holder\", holderScope)\r\n    if(selectedHolder && selectedHolder != null){\r\n      selectedHolder.acceptDrop = \"\"; \r\n    }\r\n    selectedHolder = holderScope;\r\n    if(selectedHolder && selectedHolder != null){\r\n      selectedHolder.acceptDrop = \"accept-drop\"; \r\n    }\r\n  };\r\n});\r\n\r\n\r\napp.factory('widgetTypesPromise', function ($http, appUrls) {\r\n  return $http.get(appUrls.widgetTypes, {cache: true});\r\n});\r\n\r\napp.factory('templateTypesPromise', function ($http, appUrls) {\r\n  return $http.get(appUrls.templateTypes, {cache: true});\r\n});\r\n\r\n\r\n\r\napp.factory('config', function (initialConfig, $log, templateTypesPromise) {\r\n  if (initialConfig.pages.length <= 1) {\r\n    $log.info('When there is no 404 page you might have problems with page routing!');\r\n  }\r\n\r\n  // console.log(\"GET CONFIG\")\r\n  // templateTypesPromise.then((resp) => {\r\n  //   var pageTemplates = resp.data;\r\n  //   var pages = initialConfig.pages\r\n  //   pages.forEach((page) => {\r\n  //     var pageTemplate = pageTemplates[page.template];\r\n  //     pageTemplate.holders.forEach((holder) => {\r\n  //       if(!page.holders[holder]){\r\n  //         page.holders[holder] = {widgets:[]}\r\n  //       }\r\n  //     })\r\n  //   })\r\n  // })\r\n  // console.log(\"UPDATED CONFIG\", initialConfig)\r\n  \r\n  var c = angular.copy(initialConfig);\r\n\r\n  //c.dps=\"https://dj-app.herokuapp.com\"; \r\n  return c;\r\n});\r\n\r\napp.factory('appHotkeysInfo', ['config', (config) => {\r\n  return {\r\n    title:\"Application Hotkeys\",\r\n    icon: config.icon,\r\n    sections:[\r\n      { \r\n        fields:[{key:\"Alt + H\",value:\"Show this help\"},\r\n                {key:\"Esc\",value:\"Close\"},\r\n                {key:\"Alt + D\",value:\"Switch Mode\"},\r\n                {key:\"Alt + P\",value:\"Activate Page Manager\"},\r\n                {key:\"Alt + T\",value:\"Activate Translation Manager\"},\r\n                {key:\"Alt + R\",value:\"Activate Resource Manager\"},\r\n                {key:\"Alt + S\",value:\"Save Settings\"},\r\n                {key:\"Alt + C\",value:\"View Page Config\"}\r\n        ]\r\n      }\r\n    ]    \r\n  }\r\n}]);\r\n\r\n\r\n\r\napp.service('app', function ($http, $state, $stateParams, $log, config, $rootScope, $modal,\r\n                             $translate, appUrls, appName, fullReload, eventWires, APIUser, \r\n                             // APIProvider, \r\n                             hotkeys, splash, appHotkeysInfo,globalConfig,\r\n                             dialog, portal,templateTypesPromise,\r\n                             initialConfig, clipboard, jsonEditor) {\r\n\r\n  let pageConf;\r\n \r\n  \r\n  \r\n \r\n\r\n  angular.extend(this, {\r\n    sendingToServer: false,\r\n    wasModified: false,\r\n    wasSavedEver: false,\r\n    currentPageIndex: 0,\r\n    \r\n    \r\n\r\n    isHomePageOpened() {\r\n      return $stateParams.href === '';\r\n    },\r\n\r\n    is404PageOpened() {\r\n      return this.pageConfig().href === '404';\r\n    },\r\n\r\n    pageIndexByHref(href) {\r\n      \r\n      var user = new APIUser();\r\n      user.invokeAll('BEFORE_CHANGE_PAGE_SLOT');\r\n      \r\n      let result = config.pages.findIndex(p => p.href === href);\r\n      if (result !== -1) {\r\n        return result;\r\n      }\r\n      result = config.pages.findIndex(p => p.href === '404');\r\n      if (result !== -1) {\r\n        return result;\r\n      }\r\n\r\n      $log.warn(\"app.pageIndexByHref can't find page!\");\r\n    },\r\n    pageConfig() {\r\n      return pageConf;\r\n    },\r\n\r\n    markModified() {\r\n      this.wasModified = true;\r\n    },\r\n\r\n    deletePage(page) {\r\n      \r\n      const curPageHref = $stateParams.href;\r\n      const index = config.pages.indexOf(page);\r\n      const deletedPageHref = config.pages[index].href;\r\n      if (angular.isDefined(config.pages) && angular.isDefined(config.pages[index])) {\r\n        config.pages.splice(index, 1);\r\n        this.markModified(true);\r\n\r\n        if (curPageHref === deletedPageHref) {\r\n          $state.go('page', {href: ''});\r\n        }\r\n      }\r\n    },\r\n\r\n    submitToServer(callback) {\r\n      this.sendingToServer = true;\r\n      return $http.put(appUrls.appConfig, config)\r\n        .then(() => {\r\n          this.wasSavedEver = true;\r\n          this.sendingToServer = false;\r\n          this.wasModified = false;\r\n\r\n          if (config.name !== appName) {\r\n            fullReload(appUrls.app(config.name, $stateParams.href));\r\n          }\r\n        }, (data) => {\r\n          this.sendingToServer = false;\r\n          if (callback) {\r\n            callback(data);\r\n          }\r\n        });\r\n    },\r\n\r\n    addNewPage(page) {\r\n      page.holders = page.holders || {};\r\n      config.pages.push(page);\r\n    },\r\n\r\n    clonePage() {\r\n      // console.log(\"Clone Page\", config)\r\n      dialog({\r\n          title:\"Clone Page\",\r\n          fields:{\r\n            shortName:{\r\n              title:\"Short Title\",\r\n              type:\"text\"\r\n            },\r\n            href:{\r\n              title:\"Reference\",\r\n              type:\"text\"\r\n            },\r\n            cloned:{\r\n              title:\"Cloned page\",\r\n              type:\"select\",\r\n              options: config.pages.map((item) => {return {title:item.shortTitle, value: item}})\r\n            }\r\n\r\n          }\r\n        })\r\n        .then((form) => {\r\n            let clone = JSON.parse(form.fields.cloned.value);\r\n            clone.shortTitle = form.fields.shortName.value;\r\n            clone.href = form.fields.href.value;\r\n            config.pages.push(clone);\r\n            $state.go('page', {href: clone.href}, {reload: true});\r\n            this.markModified(true);\r\n        })\r\n    },\r\n\r\n    copyPage() {\r\n\r\n       dialog({\r\n          title:\"Copy Page\",\r\n          fields:{\r\n            page:{\r\n              title:\"Page\",\r\n              type:\"select\",\r\n              options: config.pages.map((item) => {return {title:item.shortTitle, value: item}})\r\n            }\r\n\r\n          }\r\n        })\r\n        .then((form) => {\r\n            let copy = form.fields.page.value;\r\n            clipboard.copyText(copy)\r\n            \r\n        })\r\n    },\r\n\r\n    pastePage(){\r\n      let self = this;\r\n      jsonEditor(\"\",\"Paste and modify page configuration\")\r\n      .then(function(json){\r\n        let p = JSON.parse(json);\r\n        config.pages.push(p);\r\n        $state.go('page', {href: p.href}, {reload: true});\r\n        self.markModified(true);\r\n      })\r\n    },\r\n\r\n    openShareSettings() {\r\n      $modal.open({\r\n        templateUrl: appUrls.shareSettingsHTML,\r\n        controller: 'ShareSettingsModalController',\r\n        windowClass: 'share-settings-modal',\r\n        backdrop: 'static'\r\n      }).result.then((collaborations) => {\r\n        config.collaborations = collaborations;\r\n          this.markModified(true);\r\n      });\r\n    },\r\n\r\n    openAppSettingsDialog() {\r\n      $modal.open({\r\n        templateUrl: appUrls.appSettingsHTML,\r\n        controller: 'AppSettingsModalController',\r\n        windowClass: 'app-settings-modal',\r\n        backdrop: 'static'\r\n      }).result.then((newSettings) => {\r\n        // console.log(newSettings);\r\n        angular.extend(config, newSettings);\r\n        this.markModified(true);\r\n      });\r\n    },\r\n\r\n    openResourceManager() {\r\n      if(!globalConfig.designMode) return;\r\n    \t$modal.open({\r\n        templateUrl: appUrls.resourceManagerHTML,\r\n        controller: 'ResourceManagerController',\r\n        backdrop: 'static'\r\n      })\r\n    },\r\n\r\n   openTranslationManager() {\r\n      if(!globalConfig.designMode) return;\r\n      $modal.open({\r\n        templateUrl: appUrls.translationManagerHTML,\r\n        controller: 'TranslationManagerController',\r\n        backdrop: 'static'\r\n      })\r\n    },\r\n\r\n    openPageManager() {\r\n      if(!globalConfig.designMode) return;\r\n      $modal.open({\r\n        templateUrl: appUrls.pageManagerHTML,\r\n        controller: 'PageManagerController',\r\n        backdrop: 'static'\r\n      })\r\n    },\r\n\r\n    openPortalConfigDialog(){\r\n      $http\r\n        .get(portal.api.getConfig)\r\n        .then((resp) => {\r\n          // console.log(\"Portal Config\",resp.data)\r\n          let fields = [];\r\n          for(let key in resp.data){\r\n            fields.push({title:key,value:resp.data[key]})\r\n          }\r\n          dialog({\r\n            title:`${$translate.instant('PORTAL_CONFIGURATION')}`,\r\n            \"fields\":fields\r\n          }).then((form) => {\r\n            let conf = {};\r\n            form.fields.forEach((item) => {conf[item.title] = item.value})\r\n            $http\r\n              .post(portal.api.setConfig,{config:conf})\r\n              .then(() => {\r\n                splash({\r\n                  title:`${$translate.instant('PORTAL_CONFIGURATION')}`\r\n                    +\": \"+`${$translate.instant('SAVED')}`\r\n                  },\r\n                  1000  \r\n                )\r\n              })\r\n          })\r\n        })\r\n    },\r\n\r\n    openSetAdminDialog(){\r\n      // console.log(\"openSetAdminDialog\")\r\n      $http.get(appUrls.usersList)\r\n      .then((resp) => {\r\n        dialog({\r\n          title:\"Set admin grant for user\",\r\n          fields:{\r\n            user:{\r\n              title:\"User's email\",\r\n              type:\"typeahead\",\r\n              list:resp.data.map((user) => user.email)\r\n            }\r\n          }\r\n        })\r\n        .then((form) => {\r\n          // console.log(\"User \", form.fields.user.value)\r\n          $http.post(appUrls.setAdmin, {\r\n            email:form.fields.user.value,\r\n            value:true\r\n          }).then((resp) => {\r\n            splash({\r\n                  title:\"Grant Admin Role for \"+resp.data[0].name+\" (\"+resp.data[0].email+\")\"\r\n                  },\r\n                  1000  \r\n                )\r\n          })\r\n        })  \r\n      })\r\n      \r\n    },\r\n\r\n    viewPageConfig() {\r\n      if(!globalConfig.designMode) return;\r\n      $modal.open({\r\n        templateUrl: appUrls.viewPageConfigHTML,\r\n        controller: 'ViewPageConfigController',\r\n        backdrop: 'static'\r\n      })\r\n    },\r\n\r\n\r\n    showHotkeys(){\r\n      splash(appHotkeysInfo)\r\n    },\r\n\r\n    onStateChangeStart(evt, toState, toParams) {\r\n      if (toState.name === 'page') {\r\n        const pageIndex = this.pageIndexByHref(toParams.href);\r\n        pageConf = config.pages[pageIndex];\r\n        this.currentPageIndex = pageIndex;\r\n      } else {\r\n        $log.warn('No config available - non-page routing...');\r\n        pageConf = undefined;\r\n      }\r\n    },\r\n\r\n    wireSignalWithSlot(emitterScope, signalName, providerScope, slotName) {\r\n      if (!emitterScope || !providerScope) {\r\n        return;\r\n      }\r\n      const wire = eventWires.get(emitterScope) || [];\r\n      wire.push({signalName, providerScope, slotName});\r\n      eventWires.set(emitterScope, wire);\r\n    },\r\n\r\n    pageSubscriptions() {\r\n      const pageConf = this.pageConfig() || {};\r\n      pageConf.subscriptions = pageConf.subscriptions || [];\r\n      \r\n      \r\n      pageConf.subscriptions.addListeners = function(listeners){\r\n        for(let j in listeners){\r\n          let exists = false;\r\n          let listener = listeners[j];\r\n          for (var i in pageConf.subscriptions) {\r\n            if (pageConf.subscriptions[i].emitter === listener.emitter \r\n              && pageConf.subscriptions[i].receiver === listener.receiver\r\n              && pageConf.subscriptions[i].signal === listener.signal\r\n              && pageConf.subscriptions[i].slot === listener.slot\r\n              ) {\r\n              exists = true;\r\n            }\r\n          }\r\n          if (!exists) { pageConf.subscriptions.push(listener);}\r\n        }\r\n      };\r\n\r\n      pageConf.subscriptions.addListener = function(listener){\r\n        pageConf.subscriptions.addListeners([listener]);        \r\n      };\r\n\r\n\r\n      pageConf.subscriptions.removeListeners = function(listener){\r\n       for (var i in pageConf.subscriptions) {\r\n          if (\r\n            (pageConf.subscriptions[i].emitter === listener.emitter || angular.isUndefined(listener.emitter)) \r\n            && \r\n            (pageConf.subscriptions[i].receiver === listener.receiver || angular.isUndefined(listener.receiver))\r\n            && \r\n            (pageConf.subscriptions[i].signal === listener.signal || angular.isUndefined(listener.signal))\r\n            && \r\n            (pageConf.subscriptions[i].slot === listener.slot || angular.isUndefined(listener.slot))\r\n            ) {\r\n            pageConf.subscriptions.splice(i, 1);\r\n            return\r\n          }\r\n        }\r\n      };\r\n\r\n      return pageConf.subscriptions;\r\n    },\r\n\r\n    updatePageSubscriptions() {\r\n      $rootScope.$evalAsync(() => {\r\n        const subscriptions = this.pageSubscriptions();\r\n        eventWires.clear();\r\n\r\n        if (!subscriptions) {\r\n          return;\r\n        }\r\n        for (let s of subscriptions) {\r\n          this.wireSignalWithSlot(\r\n            APIUser.getScopeByInstanceName(s.emitter),\r\n            s.signal,\r\n            APIUser.getScopeByInstanceName(s.receiver),\r\n            s.slot);\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  pageConf = config.pages[this.pageIndexByHref($stateParams.href || '')];\r\n\r\n  $rootScope.$on('$stateChangeStart', this.onStateChangeStart.bind(this));\r\n});\r\n\r\n\r\napp.service(\"logIn\", function($cookies, $location,fullReload,appUrls){\r\n   return () => {\r\n      $cookies.put('redirectToUrl', $location.url());\r\n      fullReload(appUrls.googleAuth);\r\n    }\r\n});\r\n\r\napp.service('widgetLoader', function ($q, $ocLazyLoad, widgetTypesPromise, appUrls) {\r\n  this.load = (widgets) => {\r\n    \r\n    \r\n\r\n\r\n    widgets = angular.isArray(widgets) ? widgets : [widgets];\r\n    return widgetTypesPromise.then((widgetTypesHTTP) => {\r\n      const widgetControllers = [];\r\n      for (let widget of widgets) {\r\n        const widgetType = widgetTypesHTTP.data[widget];\r\n        if (angular.isUndefined(widgetType)) {\r\n          return $q.reject(`Widget \"${widget}\" doesn't exist!`);\r\n        }\r\n        if (!widgetType.nojs) {\r\n          widgetControllers.push({\r\n            name: `app.widgets.${widget}`,\r\n            files: [appUrls.widgetJSModule(widget)]\r\n          });\r\n        }\r\n      }\r\n      return $ocLazyLoad.load(widgetControllers);\r\n    });\r\n  };\r\n});\r\n\r\napp.service('widgetManager', function ($modal, $timeout, APIUser, APIProvider,\r\n                                       appUrls, app, randomWidgetName) {\r\n  angular.extend(this, {\r\n    deleteIthWidgetFromHolder(holder, index) {\r\n      const removedWidget = holder.widgets.splice(index, 1)[0];\r\n      const user = new APIUser();\r\n      user.tryInvoke(removedWidget.instanceName, APIProvider.REMOVAL_SLOT);\r\n      app.markModified(true);\r\n    },\r\n\r\n    openWidgetConfigurationDialog(widget) {\r\n      const invocation = (new APIUser()).tryInvoke(widget.instanceName, APIProvider.OPEN_CUSTOM_SETTINGS_SLOT);\r\n      if (!invocation.success) {\r\n        this.openDefaultWidgetConfigurationDialog(widget);\r\n      }else{\r\n        // console.log(\"Returns from config dialog\", invocation)\r\n        if(invocation.result){\r\n          invocation.result.then(() => {\r\n            const user = new APIUser();\r\n            user.invokeAll(APIProvider.RECONFIG_SLOT);\r\n            app.markModified(true);\r\n            user.invokeAll(APIProvider.PAGE_COMPLETE_SLOT)    \r\n          })\r\n        }\r\n      }\r\n    },\r\n\r\n\r\n    openDefaultWidgetConfigurationDialog(widget) {\r\n      $modal.open({\r\n        templateUrl: appUrls.widgetModalConfigHTML,\r\n        controller: 'WidgetModalSettingsController',\r\n        windowClass: 'app-settings-modal',\r\n        backdrop: 'static',\r\n        resolve: {\r\n          widgetScope() {\r\n            return (new APIUser()).getScopeByInstanceName(widget.instanceName);\r\n          },\r\n          widgetConfig() {\r\n            return widget;\r\n          },\r\n          widgetType(widgetTypesPromise) {\r\n            return widgetTypesPromise.then((widgetTypesHTTP) =>\r\n                widgetTypesHTTP.data[widget.type]\r\n            );\r\n          }\r\n        }\r\n      }).result.then((newWidgetConfig) => {\r\n          angular.copy(newWidgetConfig, widget);\r\n          const user = new APIUser();\r\n          user.invokeAll(APIProvider.RECONFIG_SLOT);\r\n          app.markModified(true);\r\n          user.invokeAll(APIProvider.PAGE_COMPLETE_SLOT)\r\n        });\r\n    },\r\n\r\n    addNewWidgetToHolder(holder) {\r\n      $modal.open({\r\n        templateUrl: appUrls.widgetModalAddNewHTML,\r\n        controller: 'WidgetModalAddNewController',\r\n        backdrop: 'static',\r\n        resolve: {\r\n          widgetTypes(widgetTypesPromise) {\r\n            return widgetTypesPromise;\r\n          },\r\n          holder() {\r\n            return holder;\r\n          }\r\n        }\r\n      }).result\r\n        .then(widgetType => {\r\n\r\n          const realWidget = {\r\n            type: widgetType.type,\r\n            openConfigOnLoad: true,\r\n            instanceName: randomWidgetName()\r\n          };\r\n\r\n          holder.widgets = holder.widgets || [];\r\n          holder.widgets.push(realWidget);\r\n        });\r\n    },\r\n\r\n    cloneWidget(holder, widget){\r\n      const newWidget = angular.copy(widget);\r\n      newWidget.instanceName = randomWidgetName();\r\n      console.log(\"Cloned\", widget)\r\n      console.log(\"Holder\", holder)\r\n      var pos = holder.widgets.map(function(item){return item.instanceName}).indexOf(widget.instanceName)\r\n      holder.widgets.splice(pos,0,newWidget)\r\n      // holder.widgets.push(newWidget);\r\n      app.markModified(true);\r\n    }\r\n  });\r\n});\r\n\r\napp.controller('MetaInfoController', function ($scope, $rootScope, appName, app, config, author) {\r\n  angular.extend($scope, {\r\n    title: appName,\r\n    author: author.name,\r\n    config\r\n  });\r\n\r\n  $rootScope.$on('$stateChangeSuccess', () => {\r\n    const pageName = app.pageConfig().shortTitle;\r\n    $scope.title = `${pageName} - ${config.title}`;\r\n  });\r\n});\r\n\r\napp.controller('MainController', function ($scope, $location, $cookies, $window, $translate,\r\n                                           alert, app, config, user, appUrls, globalConfig,\r\n                                           fullReload, hotkeys,splash,appHotkeysInfo,\r\n                                           APIProvider, APIUser) {\r\n  \r\n  if(user.isOwner || user.isCollaborator){\r\n    // console.log(\"Add hotkeys\")\r\n    \r\n\r\n    hotkeys.add({\r\n      combo: 'alt+h',\r\n      description: 'Show hotkeys',\r\n      callback: function(event) {\r\n        event.preventDefault();\r\n        app.showHotkeys();\r\n      }\r\n    });\r\n\r\n    hotkeys.add({\r\n      combo: 'alt+p',\r\n      description: 'Invoke Page Manager',\r\n      callback: function(event) {\r\n        event.preventDefault();\r\n        app.openPageManager();\r\n      }\r\n    });\r\n\r\n    hotkeys.add({\r\n      combo: 'alt+r',\r\n      description: 'Invoke Resources Manager',\r\n      callback: function(event) {\r\n        event.preventDefault();\r\n        app.openResourceManager();\r\n      }\r\n    });\r\n\r\n    hotkeys.add({\r\n      combo: 'alt+t',\r\n      description: 'Invoke Translations Manager',\r\n      callback: function(event) {\r\n        event.preventDefault();\r\n        app.openTranslationManager();\r\n      }\r\n    });\r\n\r\n    hotkeys.add({\r\n      combo: 'alt+d',\r\n      description: 'Switch mode',\r\n      callback: function(event) {\r\n        event.preventDefault();\r\n        globalConfig.designMode = !globalConfig.designMode;\r\n      }\r\n    });\r\n\r\n    hotkeys.add({\r\n      combo: 'alt+c',\r\n      description: 'View Page Config',\r\n      callback: function(event) {\r\n        event.preventDefault();\r\n        app.viewPageConfig();\r\n      }\r\n    });\r\n\r\n    hotkeys.add({\r\n      combo: 'alt+s',\r\n      description: 'Save settings',\r\n      callback: function(event) {\r\n        event.preventDefault();\r\n        app.submitToServer();\r\n      }\r\n    });\r\n    // console.log(hotkeys);\r\n    splash(appHotkeysInfo,5000);\r\n     // hotkeys.toggleHelp();\r\n  }\r\n  \r\n  angular.extend($scope, {\r\n    globalConfig,\r\n    app,\r\n    config,\r\n    user,\r\n\r\n    skin: {\r\n      url: appUrls.skinUrl(config.skinName || 'default')\r\n    },\r\n\r\n    logIn() {\r\n      // console.log(\"LOGIN\")\r\n      $cookies.put('redirectToUrl', $location.url());\r\n      fullReload(appUrls.googleAuth);\r\n    },\r\n\r\n    logOut() {\r\n      $cookies.put('redirectToUrl', $location.url());\r\n      fullReload(appUrls.logout);\r\n    },\r\n\r\n    alertAppConfigSubmissionFailed(data) {\r\n      $translate('ERROR_SUBMITTING_APP_CONF', data).then(translation =>\r\n        alert.error(translation)\r\n      );\r\n    }\r\n  });\r\n\r\n  $scope.$watchCollection('config.pages', (newPages, oldPages) => {\r\n    if (oldPages !== newPages) {\r\n      app.markModified();\r\n    }\r\n  });\r\n\r\n  $scope.$watch('globalConfig.designMode', () => {\r\n    const cnf = $scope.globalConfig;\r\n    cnf.debugMode = cnf.debugMode && !cnf.designMode;\r\n    var user = new APIUser();\r\n    if(globalConfig.designMode) {\r\n      user.invokeAll(APIProvider.BEFORE_DESIGN_MODE_SLOT);\r\n    }else{\r\n      user.invokeAll(APIProvider.BEFORE_PRESENTATION_MODE_SLOT);\r\n    }  \r\n   \r\n  });\r\n\r\n  $window.onbeforeunload = (evt) => {\r\n    const message = $translate.instant('LEAVE_WEBSITE_WITHOUT_SAVING');\r\n    if (app.wasModified) {\r\n      if (typeof evt === \"undefined\") {\r\n        evt = $window.event;\r\n      }\r\n      if (evt) {\r\n        evt.returnValue = message;\r\n      }\r\n      return message;\r\n    }\r\n  };\r\n});\r\n\r\napp.controller('PageController', function ($scope, pageConfig, templateTypesPromise) {\r\n  // console.log(\"Init page controller\")\r\n  // templateTypesPromise.then((resp) => {\r\n  //   var pageTemplate = resp.data[pageConfig.template];\r\n  //   console.log(pageConfig.template,pageTemplate)\r\n  //   pageTemplate.holders.forEach((holder) => {\r\n  //     if(!pageConfig.holders[holder]){\r\n  //       console.log(holder)\r\n  //       pageConfig.holders[holder] = {widgets:[]}\r\n  //       console.log(\"append\",pageConfig)\r\n  //     }\r\n  //   })\r\n    angular.extend($scope, {\r\n      config: pageConfig\r\n    });  \r\n  // })\r\n});\r\n\r\napp.directive('widgetHolder', function (appUrls, widgetManager, app, selectHolder) {\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: appUrls.widgetHolderHTML,\r\n    transclude: true,\r\n    scope: true,\r\n    link(scope, element, attrs) {\r\n      scope.$watchCollection('scope.config.holders', () => {\r\n        if (scope.config.holders) {\r\n          scope.holder = scope.config.holders[attrs.name] || {};\r\n          scope.holder.width = angular.element(element[0]).width();\r\n        }\r\n      });\r\n\r\n      angular.extend(scope, {\r\n        deleteIthWidgetFromHolder: widgetManager.deleteIthWidgetFromHolder.bind(widgetManager),\r\n        addNewWidgetToHolder: widgetManager.addNewWidgetToHolder.bind(widgetManager),\r\n        cloneWidget: widgetManager.cloneWidget.bind(widgetManager),\r\n        // collapsed:false,\r\n        treeOptions:{\r\n          dropped:(event)=>{\r\n            event.source.nodeScope.$$childHead.drag = false;\r\n            selectHolder(null);\r\n            app.markModified()\r\n          },\r\n          dragStart:(event)=>{\r\n              event.source.nodeScope.$$childHead.drag = true;\r\n          },\r\n          accept(sourceNodeScope, destNodesScope, destIndex){\r\n            selectHolder(destNodesScope.$treeScope.$parent.$parent);\r\n            // console.log(scope, destNodesScope.$treeScope.$parent.$parent);\r\n            return true;\r\n          }\r\n        }\r\n\r\n      });\r\n    }\r\n  };\r\n});\r\n\r\napp.directive('widget', function ($rootScope, $translate, $window, appUrls, globalConfig, widgetLoader,\r\n                                  config, widgetManager, user, app, randomWidgetName,\r\n                                  instanceNameToScope, widgetSlots, widgetTypesPromise,\r\n                                  autoWiredSlotsAndEvents, eventWires) {\r\n  function updateEventsOnNameChange(widget) {\r\n    $rootScope.$watch(() => widget.instanceName, (newName, oldName) => {\r\n      if (newName !== oldName && newName !== undefined) {\r\n        const subscriptions = app.pageConfig().subscriptions;\r\n        for (let i = 0; i < (subscriptions ? subscriptions.length : 0); i++) {\r\n          const subscription = subscriptions[i];\r\n          if (subscription.emitter === oldName) {\r\n            subscription.emitter = newName;\r\n          }\r\n\r\n          if (subscription.receiver === oldName) {\r\n            subscription.receiver = newName;\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: '/partials/widget.html',\r\n    transclude: true,\r\n    scope: {\r\n      type: '@',\r\n      widget: '=config',\r\n      onDelete: '&',\r\n      onClone: '&',\r\n      container: \"=?\"\r\n    },\r\n    controller() {}, // needed for require: '^widget' to work in widget-translate directive\r\n    link(scope, element, attrs) {\r\n      // console.log(\"Link\", element)\r\n      if (!scope.type) {\r\n        throw \"widget directive needs type parameter\";\r\n      }\r\n\r\n      scope.container = {\r\n          getScope: function(){ return scope; },\r\n\r\n          getElement: function(){ return element; }\r\n      }    \r\n\r\n      scope.skin = attrs.skin;\r\n      // console.log(scope.type+\" \"+attrs.instancename+\" \"+attrs.skin);\r\n\r\n      if (!scope.widget && attrs.instancename) {\r\n        config.appWidgets = config.appWidgets || [];\r\n        let conf = config.appWidgets.find(wgt => wgt.instanceName === attrs.instancename);\r\n        if (!conf) {\r\n          conf = {\r\n            instanceName: attrs.instancename,\r\n            type: scope.type,\r\n            container: scope.container\r\n          };\r\n          config.appWidgets.push(conf);\r\n        }\r\n        scope.widget = conf;\r\n        scope.element = element;\r\n        scope.disallowEditInstanceName = true;\r\n      }\r\n\r\n      scope.widget = scope.widget || {};\r\n      scope.widget.type = scope.widget.type || scope.type;\r\n      scope.widget.instanceName =\r\n        attrs.instanceName || scope.widget.instanceName || randomWidgetName();\r\n\r\n      widgetTypesPromise.then(w => {\r\n        if (w.data[scope.widget.type].noicon !== true) {\r\n          scope.widget.icon = appUrls.widgetIcon(scope.widget.type);\r\n        }\r\n      });\r\n\r\n      updateEventsOnNameChange(scope.widget);\r\n\r\n      widgetLoader.load(scope.type).then(() => {\r\n        scope.widgetCodeLoaded = true;\r\n\r\n        if (scope.widget.openConfigOnLoad) {\r\n          delete scope.widget.openConfigOnLoad;\r\n\r\n          scope.$applyAsync(() => {\r\n            widgetManager.openWidgetConfigurationDialog(scope.widget)\r\n          });\r\n        }\r\n      });\r\n\r\n\r\n      function registerScope(scope) {\r\n        instanceNameToScope.set(scope.widget.instanceName, scope);\r\n        scope.$watch('widget.instanceName', (newName, oldName) => {\r\n          if (newName !== oldName) {\r\n            instanceNameToScope.set(newName, scope);\r\n            instanceNameToScope.delete(oldName);\r\n          }\r\n        });\r\n\r\n        widgetSlots.set(scope, []);\r\n\r\n        app.updatePageSubscriptions();\r\n\r\n        scope.$on('$destroy', () => {\r\n          // clean widgetSlots and eventWires\r\n          widgetSlots.delete(scope);\r\n          eventWires.delete(scope);\r\n\r\n          // clean autoWiredSlotsAndEvents\r\n          for (let i = autoWiredSlotsAndEvents.length - 1; i >= 0; --i) {\r\n            if (autoWiredSlotsAndEvents[i].providerScope === scope) {\r\n              autoWiredSlotsAndEvents.splice(i, 1);\r\n            }\r\n          }\r\n\r\n          // clean instanceNameToScope\r\n          instanceNameToScope.delete(scope.widget.instanceName);\r\n\r\n        });\r\n      }\r\n\r\n      registerScope(scope);\r\n       widgetTypesPromise\r\n          .then((widgetTypes) => {\r\n            angular.extend(scope, {\r\n              globalConfig,\r\n              user,\r\n              widgetTemplateUrl: (widgetTypes.data[scope.type].html)\r\n                                  ? widgetTypes.data[scope.type].html\r\n                                  : appUrls.widgetHTML(scope.type),\r\n              widgetCodeLoaded: false,\r\n              widgetPanel: {\r\n                allowDeleting: !!attrs.onDelete,\r\n                allowCloning: !!attrs.onClone,\r\n                allowOpenHelp: true,\r\n                allowConfiguring: angular.isUndefined(attrs.nonConfigurable),\r\n                editingInstanceName: false,\r\n                openWidgetConfigurationDialog: widgetManager.openWidgetConfigurationDialog.bind(widgetManager),\r\n                startEditingInstanceName() {\r\n                  if (scope.disallowEditInstanceName) return;\r\n                  scope.widgetPanel.editingInstanceName = true;\r\n                  scope.widgetPanel.newInstanceName = scope.widget.instanceName;\r\n                },\r\n                finishEditingInstanceName() {\r\n                  scope.widgetPanel.editingInstanceName = false;\r\n                  if (scope.widget.instanceName !== scope.widgetPanel.newInstanceName) {\r\n                    scope.widget.instanceName = scope.widgetPanel.newInstanceName;\r\n                    app.markModified();\r\n                  }\r\n                },\r\n                cancelEditingInstanceName() {\r\n                  scope.widgetPanel.editingInstanceName = false;\r\n                },\r\n                deleteWidget() {\r\n                  scope.onDelete();\r\n                },\r\n\r\n                cloneWidget() {\r\n                  scope.onClone();\r\n                },\r\n\r\n                openHelp() {\r\n                  const url = appUrls.widgetHelp(scope.type, $translate.use());\r\n                  $window.open(url, '_blank');\r\n                }\r\n              }\r\n            })\r\n        })\r\n    }\r\n  };\r\n});\r\n\r\nangular.bootstrap(document, ['app'], {\r\n  strictDi: false\r\n});\r\n"],"sourceRoot":"/source/"}