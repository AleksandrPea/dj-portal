{"version":3,"sources":["dictionary.js"],"names":[],"mappings":"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","file":"dictionary.js","sourcesContent":["import angular from 'angular';\r\nimport 'angular-translate';\r\nimport 'angular-translate-loader-static-files';\r\nimport 'angular-translate-storage-cookie';\r\nimport 'angular-translate-storage-local';\r\nimport 'i18n';\r\nimport 'dps';\r\n\r\nconst dictionaryModule = angular.module('app.dictionary', ['pascalprecht.translate','app.i18n','app.dps']);\r\ndictionaryModule.dictionary = {};\r\n\r\n\r\n\r\ndictionaryModule.run(function ($http,i18n,$dps) {\r\n  \r\n  // $http.get(\"./api/dictionary\")\r\n  $dps.get(\"/api/dictionary\")\r\n            .success(function (data) {\r\n              // console.log(data)\r\n                var d = {};\r\n                for(let i in data){\r\n                  d[data[i].key] = data[i].value;\r\n                }\r\n                dictionaryModule.dictionary = d;\r\n                var tua = {};\r\n                var ten = {};\r\n                for(let i in data){\r\n                  if (data[i].type == \"i18n\" &&  data[i].value) {\r\n                    tua[data[i].key] = data[i].value.ua;\r\n                    ten[data[i].key] = data[i].value.en;\r\n                  }\r\n                }\r\n               i18n.add(\"uk\",tua,true);\r\n               i18n.add(\"en\",ten,true);\r\n            });\r\n});\r\n\r\n\r\n\r\ndictionaryModule.service(\"$lookup\",[ \"$http\",\"$translate\", \"i18n\", \"$dps\",\r\n  function($http, $translate, i18n, $dps){\r\n    var LocalDictionary = function(dictionary){\r\n      this._table = {}\r\n      if (dictionary) this._init(dictionary)\r\n    }\r\n\r\n    LocalDictionary.prototype = {\r\n        \r\n        lookup: function(key){\r\n          return this._table[key] || key\r\n        },\r\n        \r\n        _init: function(dict){\r\n          for(let i in dict){\r\n            this._table[dict[i].key] = dict[i].value;\r\n          }\r\n          return this;\r\n        }  \r\n    }\r\n\r\n    var lookup = function(key){\r\n      return dictionaryModule.dictionary[key] || key\r\n    };\r\n\r\n     lookup.dictionary = function(dict){\r\n        return new LocalDictionary()._init(dict)      \r\n     }\r\n\r\n    lookup.reload = function(){\r\n      // $http.get(\"./api/dictionary\")\r\n      \r\n      $dps.get(\"/api/dictionary\")\r\n              .success(function (data) {\r\n                  var d = {};\r\n                  for(let i in data){\r\n                    d[data[i].key] = data[i].value;\r\n                  }\r\n                  dictionaryModule.dictionary = d;\r\n                  var tua = {};\r\n                  var ten = {};\r\n                  for(let i in data){\r\n                    if (data[i].type == \"i18n\" &&  data[i].value) {\r\n                      tua[data[i].key] = data[i].value.ua;\r\n                      ten[data[i].key] = data[i].value.en;\r\n                    }\r\n                  }\r\n                 i18n.add(\"uk\",tua,true);\r\n                 i18n.add(\"en\",ten,true);\r\n            });\r\n    }\r\n\r\n  return lookup;\r\n}]);\r\n\r\n\r\n\r\n"],"sourceRoot":"/source/"}