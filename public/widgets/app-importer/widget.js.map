{"version":3,"sources":["app-importer/widget.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,kBAAkB,UAAU,KAAK,EAAE,OAAO,OAAO,IAAI,aAAa,IAAI,aAAa;;AAEvF,IAJO,UAAO,gBAAA,QAAM;;AAEpB,IAAM,gBAAgB,QAAQ,OAAO,4BAA4B;;AAEjE,cAAc,WAAW,iHAAyB,UAAU,QAAQ,OAAO,YAChB,cACA,SAAS,QAAQ,OAAO,MAAM;EACvF,IAAM,aAAa,IAAI,aAAa;;EAEpC,QAAQ,OAAO,QAAQ;IACrB,OAAO;MACL,YAAY;;IAEd,eAAa,SAAA,cAAA,MAAO;MAGlB,IAAI,QAAQ;;MAFZ,KAAK,OAAO,YAAM;QAChB,MAAK,aAAa;;;;IAItB,WAAS,SAAA,YAAG;MACV,IAAM,KAAK,IAAI;;MAEf,GAAG,OAAO,QAAQ,KAAK,YAAY,KAAK,MAAM;MAC9C,MAAM,KAAK,QAAQ,IAAG,WAAS,IAAI;QACjC,iBAAiB;QACjB,SAAS,EAAC,gBAAgB;QAC1B,kBAAkB,QAAQ;SACzB,QAAQ,UAAA,MAAQ;QACjB,IAAM,MAAM;UACV,MAAM,KAAK;UACX,OAAO;UACP,IAAI,KAAK;;;QAGX,WAAW,KAAK,oBAAoB;SACnC,MAAM,UAAC,MAAM,QAAW;QACzB,IAAI,WAAW,KAAK;UAClB,MAAM,MAAM,WAAW,QAAQ,uDAAuD,EAAC,MAAA;eAClF;UACL,MAAM,MAAM,WAAW,QAAQ,2CAA2C,EAAC,QAAA;;;;;IAKlF","file":"app-importer/widget.js","sourcesContent":["import angular from 'angular';\r\n\r\nconst appListWidget = angular.module('app.widgets.app-importer', []);\r\n\r\nappListWidget.controller('AppImporterController', function ($scope, $http, $translate,\r\n                                                           EventEmitter,\r\n                                                           appUrls, prompt, alert, user) {\r\n  const evtEmitter = new EventEmitter($scope);\r\n\r\n  angular.extend($scope, {\r\n    model: {\r\n      newAppName: \"\"\r\n    },\r\n    setImportFile(file) {\r\n      this.$apply(() => {\r\n        this.importFile = file;\r\n      });\r\n    },\r\n\r\n    importApp() {\r\n      const fd = new FormData();\r\n      // Take the first selected file\r\n      fd.append('file', this.importFile, this.model.newAppName);\r\n      $http.post(appUrls.api.import, fd, {\r\n        withCredentials: true,\r\n        headers: {'Content-Type': undefined},\r\n        transformRequest: angular.identity\r\n      }).success(data => {\r\n        const app = {\r\n          name: data.name,\r\n          owner: user,\r\n          id: data.id\r\n        };\r\n\r\n        evtEmitter.emit('new-app-imported', app);\r\n      }).error((data, status) => {\r\n        if (status === 415) {\r\n          alert.error($translate.instant('WIDGET.APP-IMPORTER.CANNOT_PARSE_DATA_AS_VALID_JSON', {data}));\r\n        } else {\r\n          alert.error($translate.instant('WIDGET.APP-IMPORTER.ERROR_IMPORTING_APP', {status}));\r\n        }\r\n      });\r\n    }\r\n  });\r\n});\r\n"],"sourceRoot":"/source/"}