{"version":3,"sources":["dm-tags-total/widget.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,kBAAkB,UAAU,KAAK,EAAE,OAAO,OAAO,IAAI,aAAa,IAAI,aAAa;;AAEvF,IAJO,UAAO,gBAAA,QAAM;;AAMpB,QALO;;AAGP,QAAQ,OAAO,6BAA6B,CAAC,mBAC1C,WAAW,wGAAkC,UAAU,QAAQ,OAAO,cACrE,aAAa,SAAS,MAAM;;EAE5B,IAAI,YAAY,QACb,OAAQ,YAAM;IACb,QAAQ,IAAG,YAAW,OAAO,OAAO,eAAY;IAChD,OAAO,QAAQ,OAAO,OAAO;IAC7B,OAAO,OAAO,OAAO,OAAO,QAAQ;IACpC,OAAO,aAAa,OAAO,OAAO;IAClC,IAAI,SAAU,KAAK,WAAW,KAAK,iBAAkB,YAAY;IACjE,OAAO,KAAK,QAAQ,UAAS,MAAK;MAChC,MAAM,KACJ,4BACA,EAAC,UAAW,KAAK,MAAM,QAAU,UAChC,QAAQ,UAAS,MAAK;QACvB,KAAK,QAAQ,KAAK;;;KAKvB,QAAQ,WAAW,UAAC,KAAQ;IAC3B,IAAI,SAAU,KAAK,WAAW,KAAK,iBAAkB,YAAY;IACjE,OAAO,KAAK,QAAQ,UAAS,MAAK;MAChC,MAAM,KACJ,4BACC,EAAC,UAAW,KAAK,MAAM,QAAU,UACjC,QAAQ,UAAS,MAAK;QACvB,KAAK,QAAQ,KAAK;;;KAKvB,QAAQ,YAAM;IACb,QAAQ,IAAI;;IAEf","file":"dm-tags-total/widget.js","sourcesContent":["import angular from 'angular';\r\nimport 'dictionary';\r\n\r\n\r\nangular.module('app.widgets.dm-tags-total', ['app.dictionary'])\r\n  .controller('DataManagerTagsTotalController', function ($scope, $http, EventEmitter, \r\n    APIProvider, $lookup, user) {\r\n    \r\n    new APIProvider($scope)\r\n      .config( () => {\r\n        console.log(`widget ${$scope.widget.instanceName} is (re)configuring...`);\r\n        $scope.title = $scope.widget.title;\r\n        $scope.tags = $scope.widget.tags || [];\r\n        $scope.icon_class = $scope.widget.icon_class;\r\n        var status = (user.isOwner || user.isCollaborator) ? \"private\" : \"public\";\r\n        $scope.tags.forEach(function(item){\r\n          $http.post(\r\n            \"./api/metadata/tag/total\",\r\n            {property : item.path, \"status\" :status}\r\n           ).success(function(resp){\r\n            item.count = resp.count;\r\n          });\r\n        })  \r\n          \r\n      })\r\n      .provide('refresh', (evt) => {\r\n        var status = (user.isOwner || user.isCollaborator) ? \"private\" : \"public\";\r\n        $scope.tags.forEach(function(item){\r\n          $http.post(\r\n            \"./api/metadata/tag/total\",\r\n             {property : item.path, \"status\" :status}\r\n           ).success(function(resp){\r\n            item.count = resp.count;\r\n          });\r\n        })  \r\n      })\r\n      \r\n      .removal(() => {\r\n        console.log('TagsTotal widget is destroyed');\r\n      });\r\n  });\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":"/source/"}