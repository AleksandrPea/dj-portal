{"version":3,"sources":["dm-lookup/widget.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,kBAAkB,UAAU,KAAK,EAAE,OAAO,OAAO,IAAI,aAAa,IAAI,aAAa;;AAEvF,IAJO,UAAO,gBAAA,QAAM;;AAMpB,QALO;;AAGP,QAAQ,OAAO,yBAAyB,CAAC,mBACtC,WAAW,6FAA+B,UAAU,QAAQ,OAAO,cAAc,aAAa,SAAS;;EAEtG,OAAO,MAAM;EACb,IAAM,eAAe,IAAI,aAAa;;EAEtC,IAAI,YAAY,QACb,OAAO,YAAM;IACZ,QAAQ,IAAG,YAAW,OAAO,OAAO,eAAY;;IAEhD,OAAO,QAAQ,OAAO,OAAO;IAC7B,OAAO,aAAa,OAAO,OAAO;;IAElC,IAAG,OAAO,KAAI;MACZ,OAAO,SAAS,QAAQ,OAAO;;WAE5B;MACH,OAAO,SAAS;;;KAInB,QAAQ,gBAAgB,UAAC,KAAK,OAAU;IACvC,OAAO,MAAM;IACb,IAAI,MAAM,QAAQ,OAAO;IACzB,IAAG,OAAO,OAAO,OAAO,IAAI,IAAG;MAC7B,OAAO,SAAS;;WAEb;MACH,OAAO,SAAS;;IAElB,IAAG,CAAC,OAAO,QAAO,QAEb;KAKN,QAAQ,YAAM;IACb,QAAQ,IAAI;;;;;;6CACyB","file":"dm-lookup/widget.js","sourcesContent":["import angular from 'angular';\r\nimport 'dictionary';\r\n\r\n\r\nangular.module('app.widgets.dm-lookup', ['app.dictionary'])\r\n  .controller('DataManagerLookupController', function ($scope, $http, EventEmitter, APIProvider, $lookup) {\r\n    \r\n    $scope.key = undefined; \r\n    const eventEmitter = new EventEmitter($scope);\r\n    \r\n    new APIProvider($scope)\r\n      .config(() => {\r\n        console.log(`widget ${$scope.widget.instanceName} is (re)configuring...`);\r\n        // $scope.key = $scope.key || \"#WB\";\r\n        $scope.title = $scope.widget.title;\r\n        $scope.icon_class = $scope.widget.icon_class;\r\n        // console.log($scope.key,$lookup($scope.key));\r\n        if($scope.key){\r\n          $scope.object = $lookup($scope.key);\r\n          // eventEmitter.emit(\"slaveVisibility\",false);\r\n        }else{\r\n          $scope.object = undefined;\r\n          // eventEmitter.emit(\"slaveVisibility\",true);\r\n        }\r\n      })\r\n      .provide('setLookupKey', (evt, value) => {\r\n        $scope.key = value;\r\n        let tmp = $lookup($scope.key);\r\n        if($scope.key == tmp || tmp.en){\r\n          $scope.object = undefined;\r\n          // $scope.object = {label:$scope.key};\r\n        }else{\r\n          $scope.object = tmp;\r\n        }\r\n        if(!$scope.object){\r\n          // eventEmitter.emit(\"slaveVisibility\",false);\r\n        }else{\r\n          // eventEmitter.emit(\"slaveVisibility\",true);\r\n        }\r\n      })\r\n      \r\n      .removal(() => {\r\n        console.log('Lookup widget is destroyed');\r\n      });\r\n  });\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":"/source/"}