{"version":3,"sources":["v2.nvd3-widget/nv.d3.ext.timeline.js"],"names":[],"mappings":"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","file":"v2.nvd3-widget/nv.d3.ext.timeline.js","sourcesContent":["// Timeline Utils\r\n// \r\n\r\n\r\n\r\n\r\n\r\nfunction generatePath(points){\r\n  return d3.svg.area()\r\n        .interpolate(\"linear-closed\")\r\n        .x(function (p, i) {\r\n              return p.x;\r\n        })\r\n        .y0(function (p, i) {\r\n              return p.y;\r\n        })\r\n        .y1(function (p, i) {\r\n              return 0;\r\n        })\r\n        .x1(function(p,i){\r\n        \treturn 0;\r\n        })\r\n        .apply(this, [points]);\r\n} \r\n\r\n\r\n\r\n\r\nvar layout = function(){\r\n  this._layout = d3.layout.timeline();\r\n  this._data = undefined;\r\n  this._width = undefined;\r\n  this._height = undefined;\r\n  this._extent = undefined;\r\n  this._childAccessor = function(d){return d.childs}\r\n  this._bands = [];\r\n  this.line = [];\r\n  this.domain = new Array(2);\r\n}\r\n\r\nlayout.prototype = {\r\n  \r\n  size : function(_){\r\n    if(!_) return [this._width, this._height]; \r\n    this._width = _[0];\r\n    this._height = _[1];\r\n    return this;\r\n  },\r\n \r\n  width : function(_){\r\n    if(!_) return this._width; \r\n    this._width = _;\r\n    return this;\r\n  },\r\n  \r\n  height : function(_){\r\n    if(!_) return this._height; \r\n    this._height = _;\r\n    return this;\r\n  },\r\n\r\n  extent : function(_){\r\n    if(!_) return this._extent; \r\n    this._extent = _;\r\n    return this;\r\n  },\r\n\r\n  childAccessor : function(_){\r\n    if(!_) return this._childAccessor; \r\n    this._childAccessor = _;\r\n    return this;\r\n  },\r\n\r\n  bands : function(){\r\n   return this._bands; \r\n  },\r\n\r\n  data : function(_){\r\n    if(!_) return this._data; \r\n    this._data = _;\r\n    if(!this._extent){\r\n\t    var thos = this;\r\n\t    function _min(s){\r\n\t    \tvar r = s[0].start;\r\n\r\n\t    \ts.forEach(function(d){\r\n\t    \t\t\r\n\t    \t\tr = (date.subtract(new Date(r), new Date(d.start)).toMilliseconds() > 0) ? d.start : r;\r\n\t    \t\tif(d.childs){\r\n\t    \t\t\tvar c = _min(d.childs)\r\n\t    \t\t\tr = (date.subtract(new Date(r), new Date(c)).toMilliseconds() > 0) ? c : r; \r\n\t    \t\t}\r\n\t    \t})\r\n\t    \treturn r;\r\n\t    }\r\n\r\n\t    function _max(s){\r\n\t    \tvar r = s[0].end;\r\n\r\n\t    \ts.forEach(function(d){\r\n\t    \t\t\r\n\t    \t\tr = (date.subtract(new Date(r), new Date(d.end)).toMilliseconds() < 0) ? d.end : r;\r\n\t    \t\tif(d.childs){\r\n\t    \t\t\tvar c = _max(d.childs)\r\n\t    \t\t\tr = (date.subtract(new Date(r), new Date(c)).toMilliseconds() < 0) ? c : r; \r\n\t    \t\t}\r\n\t    \t})\r\n\t    \treturn r;\r\n\t    }\r\n\r\n\t    this._data.forEach(function(serie){\r\n\t    \tvar min = _min(serie.values)\r\n\t    \tvar max = _max(serie.values)\r\n\t    \tif(thos.domain[0]){\r\n\t    \t\tthos.domain[0] = (thos.domain[0] > min) ? min : thos.domain[0];\r\n\t    \t} else{\r\n\t    \t\tthos.domain[0] = min;\r\n\t    \t}\t\r\n\t    \tif(thos.domain[1]){\r\n\t\t    \tthos.domain[1] = (thos.domain[1] < max) ? max : thos.domain[1];\r\n\t\t    }else{\r\n\t\t    \tthos.domain[1] = max\r\n\t\t    }\t\r\n\t    })\r\n\t    \r\n\t    this._extent = this.domain;\t\r\n    }\r\n    return this;\r\n  },\r\n\r\n  fit : function(){\r\n        var swimlines = [];\r\n        this._band = [];\r\n        this.lanes =[];\r\n        var thos = this;\r\n       \r\n        this._data.forEach(function(serie,i){\r\n            thos._layout\r\n              .size([thos._width,thos._height/thos._data.length])\r\n              .extent(thos._extent)\r\n              .childAccessor(thos._childAccessor)\r\n              \r\n              \r\n            var tmp = thos._layout(serie.values);\r\n            var swimline = {y:[],dy:[]}\r\n            tmp.forEach(function(d){\r\n            \r\n            \r\n              if(swimline.y.indexOf(d.y)<0){swimline.y.push(d.y)}\r\n              if(swimline.dy.indexOf(d.dy)<0){swimline.dy.push(d.dy)}\r\n            })\r\n            swimline.dy = d3.min(swimline.dy,function(t){return t})\r\n            swimlines.push(swimline);\r\n            thos._bands.push(tmp)\r\n        })\r\n\r\n        \r\n        var minWidth = d3.min(swimlines,function(d){return d.dy})\r\n        var sumWidth = 0;\r\n        swimlines.forEach(function(d){\r\n          d.ratio = minWidth * d.y.length;\r\n          sumWidth += d.ratio;\r\n        })\r\n        var cumulate = 0\r\n\r\n        swimlines.forEach(function(d,i){\r\n          d.ratio /= sumWidth;\r\n          d.height = minWidth;\r\n          d.hOffset = cumulate;\r\n          cumulate+= d.ratio\r\n        })\r\n\r\n        this._bands.forEach(function(band,i){\r\n        \tband.forEach(function(item,j){\r\n        \t\titem._id = j\r\n        \t\titem.height = swimlines[i].height;\r\n        \t\titem.y += swimlines[i].hOffset*thos._height;\r\n        \t\titem.band = i;\r\n        \t\tif(item.type != \"flow\"){\r\n        \t\t\titem.height = (item.height > 16) ? 16 : item.height ;\r\n        \t\t\titem.y = item.y+swimlines[i].height/2 - item.height/2 \r\n        \t\t}\r\n        \t\tvar laneY = (item.type != \"flow\") ? item.y+item.height/2 : item.y+minWidth/2;\r\n        \t\tvar lane = {serie:item.serieIndex, lane:item.lane, y:laneY}\r\n\t        \tvar foundedLane = thos.lanes.filter(function(t){return t.serie == lane.serie && t.lane == lane.lane}) \r\n\t        \tif(foundedLane.length == 0){\r\n\t        \t\tthos.lanes.push(lane)\r\n\t        \t}\t \r\n        \t})\r\n        })\r\n\r\n       \r\n\r\n        \r\n        this.line = [];\r\n        \r\n        this._bands.forEach(function(band){\r\n        \tthos.line = thos.line.concat(band);\r\n        })\t\r\n\r\n        thos.line.sort(function(a,b){\r\n        \tif(date.subtract(new Date(a.originalStart), new Date(b.originalStart)).toMilliseconds() !=0)\r\n\t\t        return date.subtract(new Date(a.originalStart), new Date(b.originalStart)).toMilliseconds();\r\n\t\t    if((a.band - b.band) != 0)\r\n\t\t    \treturn a.band-b.band\r\n\t\t    if((a.level - b.level) != 0)\r\n\t\t    \treturn a.level - b.level\r\n\t\t    return a.lane - b.lane\r\n        })\r\n\r\n        // this.domain = [this.line[0].originalStart, this.line[this.line.length-1].originalEnd] \r\n        return this;\r\n      }\r\n  }\r\n\r\n\r\n\r\nvar foTooltip = function(w){\r\n\tthis._stopped = true;\r\n\tthis._initState = true;\r\n\tthis._timer = undefined;\r\n\tthis._chart = undefined;\r\n\tthis._wrapper = w;\r\n\tthis._anchor = 50;\r\n\tthis._x =  0;\r\n\tthis._y = 0;\r\n\tthis._width = 100;\r\n\tthis._height = 100;\r\n\tthis._color = \"gray\";\r\n\tthis._bgColor = \"white\";\r\n\tthis._dateFormat = {\r\n\t\tflow: \"%Y\",\r\n\t\tprocess:\"%b.%Y\",\r\n\t\tinstant:\"%d.%b.%Y\"\r\n\t};\r\n\t\r\n\tthis._content =  function(d){\r\n\t\t\treturn \"tooltip\"\t\r\n\t}\r\n\tthis._margin = {top:5,right:10,bottom:5,left:10}\r\n\tthis.showed = false;\r\n}\r\n\r\n\r\n\r\nfoTooltip.prototype = {\r\n\r\n\tdestroy: function(){\r\n\t\tthis.hide();\r\n\t\tif (this._timer) this._timer.stop();\r\n\t\tthis._stopped = true;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tstop: function(){\r\n\t\tif (this._timer) this._timer.stop();\r\n\t\tthis._stopped = true;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tchart: function(_){\r\n\t\tif(!_) return this._chart;\r\n\t\tthis._chart = _;\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\twrapper: function(_){\r\n\t\tif(!_) return this._wrapper;\r\n\t\tthis._wrapper = _;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tanchor: function(_){\r\n\t\tif(!_) return this._anchor;\r\n\t\tthis._anchor = _;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tx: function(_){\r\n\t\tif(!_) return this._x;\r\n\t\tthis._x = _;\r\n\t\treturn this;\r\n\t},\r\n\r\n\ty: function(_){\r\n\t\tif(!_) return this._y;\r\n\t\tthis._y = _;\r\n\t\treturn this;\r\n\t},\r\n\r\n\twidth: function(_){\r\n\t\tif(!_) return this._width;\r\n\t\tthis._width = _;\r\n\t\treturn this;\r\n\t},\r\n\r\n\theight: function(_){\r\n\t\tif(!_) return this._height;\r\n\t\tthis._height = _;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tcontent: function(_){\r\n\t\tif(!_) return this._content;\r\n\t\tthis._content = _;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tbgColor: function(_){\r\n\t\tif(!_) return this._bgColor;\r\n\t\tthis._bgColor = _;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tcolor: function(_){\r\n\t\tif(!_) return this._color;\r\n\t\tthis._color = _;\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\tdateFormat: function(_){\r\n\t\tif(!_) return this._dateFormat;\r\n\t\tthis._dateFormat = _;\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\tshow: function(d){\r\n\t\tif(this.showed) this.hide();\r\n\t\tthis.showed = true;\r\n\t\t\r\n\t\tvar thos = this;\r\n\t\tvar wr = {\r\n\t\t\tx : thos.x()+thos._margin.left,\r\n\t\t\ty:(thos._anchor-5<10) ? (thos.y()+thos._margin.top-10) : (thos.y()+thos._margin.top),\r\n\t\t\twidth: thos.width()-thos._margin.left-thos._margin.right-15,\r\n\t\t\theight:thos.height()-thos._margin.top-thos._margin.bottom,\r\n\t\t\tclass: 'fo-tooltip'\r\n\t\t}\r\n\t\t\r\n\t\t// console.log(\"show\",wr)\r\n\r\n\t\tthis.contentWrapper = this._wrapper.append(\"foreignObject\")\r\n\t\t\t\t\t\t\t.attr(wr)\r\n\t\t\r\n\t\tvar nav = \t'<center>'\r\n\t\t\t\t\t+'&nbsp;'\r\n\t\t\t\t\t+'<button class=\"navigator first\" style=\"opacity:0;font-size: 10px;margin: 2px;padding: 2px 5px;color: #666666;background: #eaeaea;border: 1px solid #666666;width:15%;'+((thos._stopped) ? '' : 'visibility:hidden;')+'\"> &lt;&lt; </button>'\r\n\t\t\t\t\t+'<button class=\"navigator prev\" style=\"opacity:0;font-size: 10px;margin: 2px;padding: 2px 5px;color: #666666;background: #eaeaea;border: 1px solid #666666;width:15%;'+((thos._stopped) ? '' : 'visibility:hidden;')+'\"> &lt; </button>'\r\n\t\t\t\t\t+'<button class=\"navigator play\" style=\"opacity:0;font-size: 10px;margin: 2px;padding: 2px 7px;color: #666666;background: #eaeaea;border: 1px solid #666666;text-align:center;\">'+((thos._stopped) ? 'Play' : 'Stop')+'</button>'\r\n\t\t\t\t\t+'<button class=\"navigator next\" style=\"opacity:0;font-size: 10px;margin: 2px;padding: 2px 5px;color: #666666;background: #eaeaea;border: 1px solid #666666;width:15%;'+((thos._stopped) ? '' : 'visibility:hidden;')+'\"> &gt; </button>'\r\n\t\t\t\t\t+'<button class=\"navigator last\" style=\"opacity:0;font-size: 10px;margin: 2px;padding: 2px 5px;color: #666666;background: #eaeaea;border: 1px solid #666666;width:15%;'+((thos._stopped) ? '' : 'visibility:hidden;')+'\"> &gt;&gt; </button>'\r\n\t\t\t\t\t+'</center>'\t\t\t\t\t\r\n\r\n\t\tvar c = this.contentWrapper\r\n\t\t\t\t.append('xhtml:div')\r\n\t\t\t\t\r\n\t            .append('div')\r\n\t\t\t    .attr({\r\n\t\t\t           'class': 'tooltip-container'\r\n\t\t\t    })\r\n\t\t\t    .html(this._content(d))\r\n\r\n\t\tc.append(\"div\").html(nav)\t    \r\n\t\tc.select(\"button.navigator.prev\").on(\"click\",function(){thos._chart.prev()})\r\n        c.select(\"button.navigator.next\").on(\"click\",function(){thos._chart.next()})\r\n        c.select(\"button.navigator.first\").on(\"click\",function(){thos._chart.first()})\r\n        c.select(\"button.navigator.last\").on(\"click\",function(){thos._chart.last()})\r\n        c.select(\"button.navigator.play\").on(\"click\",function(){\r\n        \tvar onPlayNext = function(tooltip){\r\n        \t\tthos._chart.next();\r\n        \t\tif(!thos._stopped) thos._timer = d3.timeout(onPlayNext,3000)\r\n        \t}\r\n\r\n        \tif(thos._stopped){\r\n        \t\tthos._stopped = false;\r\n        \t\tthos.show(d);\r\n        \t\tthos._timer = d3.timeout(onPlayNext,3000)\r\n        \t}else{\r\n        \t\tthos._stopped = true;\r\n        \t\tthos._timer.stop();\r\n        \t\tthos.show(d);\r\n        \t}\r\n        \t\r\n        })\r\n\r\n        c.selectAll(\"button.navigator\")\r\n        \t.transition()\r\n        \t.duration(500)\r\n        \t.style(\"opacity\",1)\r\n\r\n        // console.log(c,this.contentWrapper.select(\"div.tooltip-container\").node())\r\n\t\t\t\t\t    \t\r\n\t\td3.timeout(function(){\r\n\t\t\t\tthos._height = c[0][0].getBoundingClientRect().height;\r\n\t\t\t\twr.y = thos._y+thos._anchor-thos._height/2//+this._margin.top;\r\n\t\t\t\twr.y = (wr.y < (thos._margin.top+2)) ? thos._margin.top+2 : wr.y;\r\n\t\t\t\twr.height = thos._height;\r\n\r\n\t\t\t\t// console.log(\"calc\", wr)\r\n\t\t\t\tif(thos._height>0){\r\n\t\t\t\t\t\tthos.contentWrapper.attr(wr);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar fo = {\r\n\t\t\t\t\t\t\tlt: {\r\n\t\t\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\t\t\ty: wr.y-thos._margin.top-thos._y\r\n\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\trt:{\r\n\t\t\t\t\t\t\t\t\tx: thos._width-15,\r\n\t\t\t\t\t\t\t\t\ty:wr.y-thos._margin.top-thos._y\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\trb:{\r\n\t\t\t\t\t\t\t\t\tx:thos._width-15,\r\n\t\t\t\t\t\t\t\t\ty:wr.y+thos._height+thos._margin.bottom-thos._y\r\n\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\tlb:{\r\n\t\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\t\ty: wr.y+thos._height+thos._margin.bottom-thos._y\r\n\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\tsa:{\r\n\t\t\t\t\t\t\t\tx:thos._width-15,\r\n\t\t\t\t\t\t\t\ty:thos._anchor-5\r\n\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\tma:{\r\n\t\t\t\t\t\t\t\tx:thos._width,\r\n\t\t\t\t\t\t\t\ty:thos._anchor\r\n\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\tea:{\r\n\t\t\t\t\t\t\t\tx:thos._width-15,\r\n\t\t\t\t\t\t\t\ty:thos._anchor+5\r\n\t\t\t\t\t\t\t}\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthos._wrapper.insert(\"path\",\":first-child\")\r\n\t\t\t\t\t       \t.attr(\"d\", function(d,i){\r\n\t\t\t\t\t       \t\treturn generatePath(\r\n\t\t\t\t\t            \t[fo.lt,fo.rt,fo.sa,fo.ma,fo.ea,fo.rb,fo.lb,fo.lt]\r\n\t\t\t\t\t          \t)\r\n\t\t\t\t\t        })\r\n\t\t\t\t\t        .attr(\"transform\",\"translate(\"+thos._x+\",\"+thos._y+\")\")\r\n\t\t\t\t\t        .style(\"stroke\",d3.rgb(thos._color).darker(1))//this._color)\r\n\t\t\t\t\t        .style(\"stroke-width\",0.6)\r\n\t\t\t\t\t        .style(\"fill\", thos._bgColor)//d3.rgb(this._color).brighter(5.4))\r\n\t\t\t\t\t        .style(\"fill-opacity\", 1)\r\n\t\t\t\t\t        .style(\"filter\",\"url(\"+document.location.href+\"#drop-shadow)\")\t\r\n\t\t\t\t\t\tthos._wrapper\r\n\t\t\t\t\t\t.transition()\r\n\t\t\t\t\t\t.duration(500)\r\n\t\t\t\t\t\t.ease(\"cubic-in\")\r\n\t\t\t\t\t\t.attr(\"opacity\",1)\r\n\t\t\t\t}\t\t\r\n\t\t},50)\r\n\t\t\r\n\t},\r\n\r\n\thide: function(d){\r\n\t\tif(!this.showed) return;\r\n\t\tthis.showed = false;\r\n\t\tthis._wrapper.attr(\"opacity\",0)\r\n\t\tthis._wrapper.select(\".fo-tooltip\").remove()\r\n\t\tthis._wrapper.select(\"path\").remove()\r\n\r\n\t}\r\n}\t\r\n\r\n\r\n\r\nnv.models.timelineChart = function(){\r\n\t\"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var margin = { top: 20, right: 20, bottom: 20, left: 20 },\r\n        \r\n        width = 960,\r\n        \r\n        height = 500,\r\n        \r\n        color = nv.utils.defaultColor(),\r\n\t\t\r\n\t\taxis = nv.models.axis(),\r\n\r\n        \r\n        tooltipContent = function(d){ return \"tooltip\"},\r\n\r\n        showTooltip = true,\r\n\r\n        localeDef = {\r\n\t      \"decimal\": \",\",\r\n\t      \"thousands\": \"\\u00A0\",\r\n\t      \"grouping\": [3],\r\n\t      \"currency\": [\"\", \" руб.\"],\r\n\t      \"dateTime\": \"%A, %e %B %Y г. %X\",\r\n\t      \"date\": \"%d.%m.%Y\",\r\n\t      \"time\": \"%H:%M:%S\",\r\n\t      \"periods\": [\"AM\", \"PM\"],\r\n\t      \"days\": [\"воскресенье\", \"понедельник\", \"вторник\", \"среда\", \"четверг\", \"пятница\", \"суббота\"],\r\n\t      \"shortDays\": [\"вс\", \"пн\", \"вт\", \"ср\", \"чт\", \"пт\", \"сб\"],\r\n\t      \"months\": [\"января\", \"февраля\", \"марта\", \"апреля\", \"мая\", \"июня\", \"июля\", \"августа\", \"сентября\", \"октября\", \"ноября\", \"декабря\"],\r\n\t      \"shortMonths\": [\"янв\", \"фев\", \"мар\", \"апр\", \"май\", \"июн\", \"июл\", \"авг\", \"сен\", \"окт\", \"ноя\", \"дек\"]\r\n\t    },\r\n\r\n        legend = nv.models.legend()\r\n        \t.key(function(d){return d.category})\r\n        \t.radioButtonMode(false),\r\n\r\n        dispatch = d3.dispatch(\"stateChange\", \"changeState\"),\r\n\r\n        state = {},\r\n\r\n        defaultState = null,\r\n\r\n        dateFormat = {\r\n\t\t\t\t\t\tflow: \"%Y\",\r\n\t\t\t\t\t\tprocess:\"%b.%Y\",\r\n\t\t\t\t\t\tinstant:\"%d.%b.%Y\"\r\n\t\t\t\t\t},\r\n\r\n    \tshowNavigator = true,\r\n\r\n\t\tonNavigate = function(d){\r\n\t\t\tconsole.log(\"navigate\",d)\r\n\t\t};\r\n\r\n\r\n        // local variables\r\n        //  \r\n\r\n        var domain = [];\r\n        var currentIndex, _currentEvent, _prevEvent;\r\n        var tooltip =  new foTooltip();\r\n       \r\n        var zoom = d3.behavior\r\n        \t\t\t.zoom()\r\n        \t\t\t.scaleExtent([1, 5]);\r\n        var prevTranslate,prevZoom;\t\t\t\r\n\r\n   \r\n/////////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\r\n\t\r\n\r\n\r\n\t\tvar insertSerieIndex = function(values,i){\r\n\t\t  values.forEach(function(d){\r\n\t\t    d.serieIndex = i;\r\n\t\t    if(d.childs) insertSerieIndex(d.childs,i);\r\n\t\t  })\r\n\t\t}\r\n\r\n\r\n\t\tvar getDomain = function(_data){\r\n\t\t\t    var _domain= new Array(2);\r\n\r\n\t\t\t    function _min(s){\r\n\t\t\t    \tvar r = s[0].start;\r\n\r\n\t\t\t    \ts.forEach(function(d){\r\n\t\t\t    \t\t\r\n\t\t\t    \t\tr = (date.subtract(new Date(r), new Date(d.start)).toMilliseconds() > 0) ? d.start : r;\r\n\t\t\t    \t\tif(d.childs){\r\n\t\t\t    \t\t\tvar c = _min(d.childs)\r\n\t\t\t    \t\t\tr = (date.subtract(new Date(r), new Date(c)).toMilliseconds() > 0) ? c : r; \r\n\t\t\t    \t\t}\r\n\t\t\t    \t})\r\n\t\t\t    \treturn r;\r\n\t\t\t    }\r\n\r\n\t\t\t    function _max(s){\r\n\t\t\t    \tvar r = s[0].end;\r\n\r\n\t\t\t    \ts.forEach(function(d){\r\n\t\t\t    \t\t\r\n\t\t\t    \t\tr = (date.subtract(new Date(r), new Date(d.end)).toMilliseconds() < 0) ? d.end : r;\r\n\t\t\t    \t\tif(d.childs){\r\n\t\t\t    \t\t\tvar c = _max(d.childs)\r\n\t\t\t    \t\t\tr = (date.subtract(new Date(r), new Date(c)).toMilliseconds() < 0) ? c : r; \r\n\t\t\t    \t\t}\r\n\t\t\t    \t})\r\n\t\t\t    \treturn r;\r\n\t\t\t    }\r\n\r\n\t\t\t    _data.forEach(function(serie){\r\n\t\t\t    \tvar min = _min(serie.values)\r\n\t\t\t    \tvar max = _max(serie.values)\r\n\t\t\t    \tif(_domain[0]){\r\n\t\t\t    \t\t_domain[0] = (_domain[0] > min) ? min : _domain[0];\r\n\t\t\t    \t} else{\r\n\t\t\t    \t\t_domain[0] = min;\r\n\t\t\t    \t}\t\r\n\t\t\t    \tif(_domain[1]){\r\n\t\t\t\t    \t_domain[1] = (_domain[1] < max) ? max : _domain[1];\r\n\t\t\t\t    }else{\r\n\t\t\t\t    \t_domain[1] = max\r\n\t\t\t\t    }\t\r\n\t\t\t    })\r\n\t\t\t    \r\n\t\t\t   return [new Date(_domain[0]), new Date(_domain[1])];\t\r\n\t\t}    \r\n\r\n\r\n\t\t\r\n\r\n/////////////////////////////////////////////////////////////////////////////////////////////////\r\n    \r\n    function chart (selection){\r\n\r\n    \tselection.each(function (_d) {\r\n    \t\tif (_d.length ==0) return;\r\n\r\n    \t\t_d.forEach(function(d,i){\r\n\t\t      insertSerieIndex(d.values,i)\r\n\t\t    })\r\n\r\n    \t\tvar data = _d.filter(function(item){return item.disabled == false || item.disabled == undefined})\r\n        \t\r\n        \t\r\n     \r\n    \t// prepare visualization\r\n    \t \r\n        \r\n    \tvar availableWidth = width - margin.left - margin.right,\r\n            availableHeight = height - margin.top - margin.bottom;\r\n        \r\n        \r\n    \t domain =  getDomain(data);\r\n    \t\tvar xScale = d3.time.scale()\r\n\t            .domain(domain)\r\n\t            .range([0, availableWidth]);\r\n\t        \r\n\t        var middle = availableWidth/2;\r\n\t        var start = xScale.invert(middle-availableWidth/2/zoom.scale())\r\n\t        var end =   xScale.invert(middle+availableWidth/2/zoom.scale())\r\n\t\r\n        container = d3.select(this);\r\n       \r\n\r\n\r\n\t\t  var container = d3.select(this),\r\n              that = this;\r\n\r\n           state.disabled = _d.map(function (item) {\r\n\t          return !!item.disabled;\r\n\t        });\r\n\r\n\t        if (!defaultState) {\r\n\t          var key;\r\n\t          defaultState = {};\r\n\t          for (key in state) {\r\n\t            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\r\n\t          }\r\n\t        }\r\n\r\n\r\n\t        chart.update = function() { container.transition().call(chart); };\r\n\t        \r\n\t        chart.container = this;      \r\n\r\n\t    \r\n\t    \t// filters go in defs element\r\n\t\tvar defsWrap = container.selectAll(\"defs\").data([data])\r\n\r\n\t\tvar defs = defsWrap.enter().append(\"defs\");\r\n\r\n\t\t// create filter with id #drop-shadow\r\n\t\t// height=130% so that the shadow is not clipped\r\n\t\tvar filter = defs.append(\"filter\")\r\n\t\t    .attr(\"id\", \"drop-shadow\")\r\n\t\t    .attr(\"height\", \"130%\");\r\n\r\n\t\t// SourceAlpha refers to opacity of graphic that this filter will be applied to\r\n\t\t// convolve that with a Gaussian with standard deviation 3 and store result\r\n\t\t// in blur\r\n\t\tfilter.append(\"feGaussianBlur\")\r\n\t\t    .attr(\"in\", \"Source\")//\"SourceAlpha\")\r\n\t\t    .attr(\"stdDeviation\", 2)\r\n\t\t    .attr(\"result\", \"blur\");\r\n\r\n\t\t// translate output of Gaussian blur to the right and downwards with 2px\r\n\t\t// store result in offsetBlur\r\n\t\tfilter.append(\"feOffset\")\r\n\t\t    .attr(\"in\", \"blur\")\r\n\t\t    .attr(\"dx\", 0)\r\n\t\t    .attr(\"dy\", 2)\r\n\t\t    .attr(\"result\", \"offsetBlur\");\r\n\r\n\t\t// overlay original SourceGraphic over translated blurred opacity by using\r\n\t\t// feMerge filter. Order of specifying inputs is important!\r\n\t\tvar feMerge = filter.append(\"feMerge\");\r\n\r\n\t\tfeMerge.append(\"feMergeNode\")\r\n\t\t    .attr(\"in\", \"offsetBlur\")\r\n\t\tfeMerge.append(\"feMergeNode\")\r\n\t\t    .attr(\"in\", \"SourceGraphic\");\r\n\r\n\t\tdefsWrap.exit().remove();    \r\n    \r\n        \r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-timeline\").data([data]);\r\n        var gEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-timeline\").append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-zoom\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-x nv-axis\");\r\n        gEnter.append(\"g\").attr(\"class\", \"series\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-legendWrap\");\r\n\t\tgEnter.append(\"g\").attr(\"class\", \"nv-playerWrap\");\r\n\t\tgEnter.append(\"g\").attr(\"class\", \"fo-tooltipWrap\");\r\n\t\t\r\n\t\t\r\n\t\t\r\n\r\n\r\n        legend.width(availableWidth);\r\n\r\n        var temp = g.select(\".nv-legendWrap\").datum(_d)\r\n          temp.call(legend);\r\n         \r\n            margin.top = legend.height() + 5;\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n\r\n          wrap.select(\".nv-legendWrap\").attr(\"transform\", \"translate(0,\" + 0 + \")\");\r\n\r\n\t\t  var l = new layout()\r\n\t\t    .data(data)\r\n\t\t    .extent(domain)\r\n\t\t    .size([availableWidth,availableHeight])\r\n\t\t    .fit();\r\n\t\t\r\n\t\t  \r\n        \r\n\t\t\t\t\t\r\n\t\tvar zoomLayer = g.select(\"g.nv-zoom\").selectAll(\"rect.nv-zoom\").data([_d])\r\n\t\tzoomLayer\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr({\r\n\t\t\t\t\"class\":\"nv-zoom\",\r\n\t\t\t\tx:0,\r\n\t\t\t\ty:0,\r\n\t\t\t\twidth:availableWidth,\r\n\t\t\t\theight:availableHeight,\r\n\t\t\t\ttransform:\"translate(\"+margin.left+\",\"+margin.top+\")\"\r\n\t\t\t})\r\n\t\t\t.style(\"fill-opacity\",0)\r\n\t\t\t.call(zoom)\r\n\t\t\t\r\n\r\n\t\t\r\n\t\tzoomLayer\r\n\t\t\t.exit()\r\n\t\t\t.remove()\t\r\n\r\n \t      var x = d3.time.scale()\r\n\t            .domain(domain)\r\n\t            .range([0, availableWidth]);\r\n\r\n\t\t  var startScale = d3.time.scale()\r\n\t\t            .domain(domain)\r\n\t\t            .range([0, availableWidth]);          \r\n\t\t  \r\n\t\t  axis\r\n\t\t  \t.scale(x)\r\n            .orient(\"bottom\")\r\n            .tickSize(-availableHeight, 0)\r\n            .tickPadding(7)\r\n            .tickFormat(d3.locale(localeDef).timeFormat.multi([\r\n                [\".%L\", function(d) { return d.getMilliseconds(); }],\r\n                [\":%S\", function(d) { return d.getSeconds(); }],\r\n                [\"%I:%M\", function(d) { return d.getMinutes(); }],\r\n                [\"%I %p\", function(d) { return d.getHours(); }],\r\n                [\"%a %d\", function(d) { return d.getDay() && d.getDate() != 1; }],\r\n                [\"%b %d\", function(d) { return d.getDate() != 1; }],\r\n                [\"%B\", function(d) { return d.getMonth(); }],\r\n                [\"%Y\", function() { return true; }]\r\n              ]))\r\n            .showMaxMin(false) \r\n           \r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n        \r\n\r\n        var xAxisG =  g.select(\".nv-x.nv-axis\")\r\n\t\t\t\t\t    .attr(\"transform\", \"translate(\"+margin.left+\",\"+(availableHeight+margin.top)+\")\")\r\n\r\n\t \tif(showTooltip){\r\n\t\t \ttooltip\r\n\t\t \t\t.chart(chart)\r\n\t\t\t\t.wrapper(g.select(\".fo-tooltipWrap\"))\r\n\t\t\t\t.x(margin.left)\r\n\t\t\t\t.y(margin.top)\r\n\t\t\t\t.width(availableWidth*0.25)\r\n\t\t\t\t.height(availableHeight)\r\n\t\t\t\t.content(tooltipContent)\r\n\t\t}\t\t\r\n\r\n\r\n\t\tchart.destroy = function(){\r\n\t\t\ttooltip.destroy(); \r\n\t\t}\r\n\r\n\t\tvar seriesG = g.select(\".series\")\r\n\t\t\t\t\t\t.attr(\"transform\",function(d){\r\n\t\t\t\t\t\t\treturn \"translate(\"+margin.left+\",\"+margin.top+\")\"\r\n\t\t\t\t\t\t})\r\n\r\n\t\tvar timelineBands = l.bands();\r\n\t\t\r\n\r\n\t\tvar seriesContainer = g.select(\".series\").selectAll(\".serie\").data(timelineBands)\r\n\r\n\t\tseriesContainer\r\n\t\t\t.enter()\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\",\"serie\")\r\n\r\n\r\n\t\tseriesContainer\r\n\t\t\t.exit()\r\n\t\t\t.remove()\r\n\r\n\t\t\r\n\r\n\t\tvar lanes = g\r\n\t\t\t\t\t.select(\"g.series\")\r\n\t\t\t\t\t.selectAll(\"line.lane\")\r\n\t\t\t\t\t.data(l.lanes)\r\n\r\n\t\tlanes\r\n\t\t\t.enter()\r\n\t\t\t.append(\"line\")\r\n\t\t\t.attr(\"class\", \"lane\")\r\n\t\t\t.attr(\"x1\", 0)\r\n\t\t\t.attr(\"y1\",function(d){ return d.y})\r\n\t\t\t.attr(\"x2\", availableWidth)\r\n\t\t\t.attr(\"y2\",function(d){ return d.y})\r\n\t\t\t.style(\"stroke\",function(d){return color(d, d.serie)})\r\n\t\t\t.style(\"stroke-width\",0.25)\r\n\r\n\t\tlanes.exit().remove();\t\r\n\t\t\r\n\t\tvar items = g\r\n\t\t\t\t\t.select(\"g.series\")\r\n\t\t\t\t\t.selectAll(\".serie\")\r\n\t\t\t\t\t.selectAll(\"rect.item\")\r\n\t\t\t\t\t.data(function (d) {\r\n\t\t\t          return d;\r\n\t\t\t        });\r\n\r\n\t\titems\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"class\", \"item\")\r\n\t\t\t.attr(\"x\", function (d) {\r\n\t\t    \treturn 0\r\n\t      \t})\r\n\t      \t.attr(\"width\", function (d) {\r\n\t      \t\treturn 0\r\n\t      \t})\r\n\t\t\t.style(\"fill-opacity\", function(d){\r\n\t      \t\treturn 0\r\n\t      \t}) \r\n\t      \t// .style(\"stroke-width\", function(d){\r\n\t      \t// \treturn 0\r\n\t      \t// })\r\n\t      \t// .style(\"opacity\", function(d){\r\n\t      \t// \treturn 0\r\n\t      \t// })\r\n\t      \t.style(\"fill\", function (d,i) {return color(d, d.serieIndex)})\r\n\t\t\t.style(\"stroke\", function (d,i) {\r\n\t\t\t\treturn color(d,d.serieIndex)\r\n\t\t\t})\r\n\t\t\t.style(\"cursor\", \"pointer\")\r\n\t\t\t.on(\"mouseover\", function(d){\r\n\t\t\t\tif(!showTooltip){\r\n\t\t\t\t\t nv.tooltip.show(\r\n\t\t\t\t\t \t[d3.event.pageX, d3.event.pageY], \r\n\t\t\t\t\t \t'<div style=\"width:'+(Math.round(availableWidth/4))+'px; white-space: normal;margin:5px;\">'+tooltipContent(d)+'</div>', \r\n\t\t\t\t\t \t\"n\", \r\n\t\t\t\t\t \tnull, \r\n\t\t\t\t\t \tnull,\r\n\t\t\t\t\t \t\"xy-tooltip with-3d-shadow with-transitions\"\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", function(d){\r\n\t\t\t\tif(!showTooltip){\r\n\t\t\t\t\t nv.tooltip.cleanup()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.on(\"click\",function(d){\r\n\t\t\t\tif(!showTooltip){\r\n\r\n\t\t\t\t\tvar index = l.line.map(function(item) {return item.context}).indexOf(d.context)\r\n\t\t\t\t\tif(index >=0){\r\n\t\t\t\t\t\tcurrentIndex = index;\r\n\t\t\t\t\t\tnavigate();\r\n\t\t\t\t\t\tchart.redraw();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// g.select(\"g.nv-x.nv-axis\")\r\n\t\t\t\t\t\t// .transition()\r\n\t\t\t\t\t\t// .attr(\"transform\",\r\n\t\t\t\t\t\t// \t\t\"translate(\"+zoom.translate()[0]+\",\"+(availableHeight+margin.top)+\")\")\r\n\t\t\t\t\t\t// g.select(\".series\")\r\n\t\t\t\t\t\t// \t.transition()\r\n\t\t\t\t\t\t// \t.attr(\"transform\",\r\n\t\t\t\t\t\t// \t\t\"translate(\"+zoom.translate()[0]+\",\"+(margin.top)+\")\") \r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcurrentIndex = undefined;\r\n\t\t\t\t\t\t_currentEvent = undefined;\r\n\t\t\t\t\t\t_prevEvent = undefined;\r\n\t\t\t\t\t\tnavigate();\r\n\t\t\t\t\t\tchart.redraw();\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// console.log(\"click with navigator\")\r\n\t\t\t\t\ttooltip.stop();\r\n\t\t\t\t\tvar index = l.line.map(function(item) {return item.context}).indexOf(d.context)\r\n\t\t\t\t\tif(index >=0){\r\n\t\t\t\t\t\tcurrentIndex = index;\r\n\t\t\t\t\t\tnavigate();\r\n\t\t\t\t\t\tchart.redraw();\r\n\t\t\t\t\t\ttranslateWrap(_currentEvent)\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\t\t\r\n\t\t\t})\r\n\t\t\r\n\t\titems.exit().remove()      \t\r\n\t\t\r\n\t\t\r\n\r\n\r\n\t\tchart.redraw = function(){\r\n\t\t\tlanes\r\n\t\t\t\t.transition().attr(\"x1\", 0)\r\n\t\t\t\t.attr(\"y1\",function(d){ return d.y})\r\n\t\t\t\t// .attr(\"x2\", availableWidth)\r\n\t\t\t\t.attr(\"y2\",function(d){ return d.y})\r\n\t\t\t\t.style(\"stroke\",function(d){return color(d, d.serie)})\r\n\t\t\t\t.style(\"stroke-width\",0.25)\r\n\t\t\t\t.attr(\"x2\", availableWidth*zoom.scale())\r\n\t\t\t\t\r\n\t\t\titems\r\n\t\t\t\t.transition()\r\n\t\t//\t\t.duration(500)\r\n\t\t\t\t// .ease(\"cubic-in\")//\"cubic-in\", \"linear\", \"quad\", \"cubic\", \"sin\", \"exp\", \"circle\", \"elastic\", \"back\", \"bounce\"\r\n\t\t\t\t.attr(\"x\", function (d) {\r\n\t\t\t    \treturn (d.type == \"instant\")? d.start*zoom.scale()-2.5 : d.start*zoom.scale()\r\n\t\t      \t})\r\n\t\t      \t.attr(\"y\", function (d) {\r\n\t\t      \t\treturn  (d.type == \"instant\")\r\n\t\t      \t\t? d.y+d.height/2-2.5\r\n\t\t      \t\t:(d.type == \"process\") \r\n\t\t      \t\t\t? d.y+d.height/2-3.5\r\n\t\t      \t\t\t: d.y\r\n\t\t      \t})\r\n\t\t      \t.attr(\"width\", function (d) {\r\n\t\t      \t\treturn ((d.end*zoom.scale() - d.start*zoom.scale())<5) ? 5 : d.end*zoom.scale() - d.start*zoom.scale()\r\n\t\t      \t})\r\n\t\t      \t.attr(\"height\", function (d) {\r\n\t\t      \t  return (d.type == \"flow\") \r\n\t\t      \t  \t? d.dy \r\n\t\t      \t  \t: (d.type == \"instant\")\r\n\t\t      \t  \t\t? 5\r\n\t\t      \t  \t\t: 7 // || d.type == \"process\") ? 5 : d.height\r\n\t\t        })\r\n\t\t        .attr(\"rx\", function(d){\r\n\t\t        \tif(d.type != \"instant\") return 0;\r\n\t\t        \tvar w =  ((d.end*zoom.scale() - d.start*zoom.scale())<5) ? 5 : (d.end*zoom.scale() - d.start*zoom.scale())\r\n\t\t        \tvar h = (d.type == \"flow\") ? d.dy : d.height\r\n\t\t        \treturn (w >= h)? h/2 : w/2\r\n\t\t        })\t\r\n\t\t        .attr(\"ry\", function(d){\r\n\t\t        \tif(d.type != \"instant\") return 0;\r\n\t\t\t\t\tvar w =  ((d.end*zoom.scale() - d.start*zoom.scale())<5) ? 5 : (d.end*zoom.scale() - d.start*zoom.scale())\r\n\t\t        \tvar h = (d.type == \"flow\") ? d.dy : d.height\r\n\t\t        \treturn (w >= h)? h/2 : w/2\r\n\t\t        })\r\n\t\t      \t.style(\"fill-opacity\", function(d){\r\n\t\t      \t\treturn (d.type == \"flow\") \r\n\t\t      \t\t\t\t? ( _currentEvent && d.context == _currentEvent.context ) ? 0.5 : 0.05 \r\n\t\t      \t\t\t\t: ( _currentEvent && d.context == _currentEvent.context ) ? 0.7 : 0.3\r\n\t\t      \t}) \r\n\t\t      \t// \t\t? ((currentIndex!=undefined) && l.line[currentIndex] && d.id == l.line[currentIndex].id) ? 0.5 : 0.05 \r\n\t\t      \t// \t\t: ((currentIndex!=undefined) && l.line[currentIndex] && d.id == l.line[currentIndex].id) ? 0.7 : 0.3\r\n\t\t      \t// }) \r\n\t\t      \t.style(\"stroke-width\", function(d){\r\n\t\t      \t\treturn (d.type == \"flow\") \r\n\t\t      \t\t\r\n\t\t      \t\t\t? ( _currentEvent && d.context == _currentEvent.context ) ? 2 : 0.3 \r\n\t\t      \t\t\t: ( _currentEvent && d.context == _currentEvent.context ) ? 2 : 1.5\r\n\t\t      \t\t\t// ? ((currentIndex!=undefined) && l.line[currentIndex] && d.id == l.line[currentIndex].id) ? 2 : 0.3 \r\n\t\t      \t\t\t// : ((currentIndex!=undefined) && l.line[currentIndex] && d.id == l.line[currentIndex].id) ? 3 : 1.5\r\n\t\t      \t})\r\n\t\t      \t.style(\"fill\", function (d,i) {return color(d, d.serieIndex)})\r\n\t\t\t\t.style(\"stroke\", function (d,i) {\r\n\t\t\t\t\tif(!_currentEvent){\r\n\t\t\t\t\t\treturn color(d,d.serieIndex);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t(d.context == _currentEvent.context)\r\n\t\t\t\t\t\t\t\t\t? d3.rgb(color(d,d.serieIndex)).darker(0.7).toString()\r\n\t\t\t\t\t\t\t\t\t: color(d,d.serieIndex)\t\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t// if(_currentEvent && (d.context == _currentEvent.context))\r\n\t\t\t\t\t// console.log(_prevEvent, _currentEvent, color(d,d.serieIndex))\r\n\t\t\t\t\t\r\n\t\t\t\t\t// if(!_currentEvent){\r\n\t\t\t\t\t// \tconsole.log(\"return\",(d3.rgb(color(d,d.serieIndex)).brighter(0.7).toString()));\r\n\t\t\t\t\t// \treturn (d3.rgb(color(d,d.serieIndex)).brighter(0.7).toString());\r\n\t\t\t\t\t// } \t\t\t\t\t\r\n\t\t\t\t\t// if(!_prevEvent){\r\n\t\t\t\t\t// \tif(_currentEvent && (d.context == _currentEvent.context))\r\n\t\t\t\t\t// \tconsole.log(\"return\",(( _currentEvent && (d.context == _currentEvent.context))\r\n\t\t\t\t\t// \t\t\t? d3.rgb(color(d,d.serieIndex)).darker(0.7).toString()\r\n\t\t\t\t\t// \t\t\t: d3.rgb(color(d,d.serieIndex)).brighter(0.7).toString()));\r\n\r\n\t\t\t\t\t// \treturn (( _currentEvent && (d.context == _currentEvent.context))\r\n\t\t\t\t\t// \t\t\t? d3.rgb(color(d,d.serieIndex)).darker(0.7).toString()\r\n\t\t\t\t\t// \t\t\t: d3.rgb(color(d,d.serieIndex)).brighter(0.7).toString());\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t// if(_currentEvent && (d.context == _currentEvent.context)){\r\n\t\t\t\t\t// \tconsole.log(d.context,_prevEvent.context,_currentEvent.context,( d.context == _prevEvent.context && d.context == _currentEvent.context ))\r\n\t\t\t\t\t// \tconsole.log(\"return\",(\r\n\t\t\t\t\t// \t\t( d.context == _prevEvent.context ) \r\n\t\t\t\t\t// \t\t\t? (d.context == _currentEvent.context)\r\n\t\t\t\t\t// \t\t\t\t? color(d,d.serieIndex)\r\n\t\t\t\t\t// \t\t\t\t: d3.rgb(color(d,d.serieIndex)).brighter(0.7).toString()\r\n\t\t\t\t\t// \t\t\t: (d.context == _currentEvent.context)\r\n\t\t\t\t\t// \t\t\t\t? d3.rgb(color(d,d.serieIndex)).darker(0.7).toString()\r\n\t\t\t\t\t// \t\t\t\t: d3.rgb(color(d,d.serieIndex)).brighter(0.7).toString()\t\r\n\t\t\t\t\t// \t));\r\n\t\t\t\t\t// }\t\t\t\t \r\n\t\t\t\t\t// return (\r\n\t\t\t\t\t// \t( d.context == _prevEvent.context) \r\n\t\t\t\t\t// \t\t? (d.context == _currentEvent.context)\r\n\t\t\t\t\t// \t\t\t? d3.rgb(color(d,d.serieIndex)).darker(0.7).toString()\r\n\t\t\t\t\t// \t\t\t: d3.rgb(color(d,d.serieIndex)).brighter(0.7).toString()\r\n\t\t\t\t\t// \t\t: (d.context == _currentEvent.context)\r\n\t\t\t\t\t// \t\t\t? d3.rgb(color(d,d.serieIndex)).darker(0.7).toString()\r\n\t\t\t\t\t// \t\t\t: d3.rgb(color(d,d.serieIndex)).brighter(0.7).toString()\t\r\n\t\t\t\t\t// )\t\t\t\r\n\r\n\t\t\t\t})\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tx.range([0,availableWidth*zoom.scale()])\r\n\t\t\txAxisG.call(axis);\t\r\n\t\t      \t\r\n\t\t}\t   \t\r\n\r\n\t\tchart.redraw();\r\n\r\n\t\tvar navigate = function(){\r\n\t\t\t// console.log(currentIndex)\r\n\t\t    var currentEvent = l.line[currentIndex];\r\n\t\t    _prevEvent = _currentEvent;\r\n\t\t    _currentEvent =  l.line[currentIndex]; \r\n\t\t    // console.log(\"navigate\",currentIndex,_currentEvent)\r\n\t\t    if(showTooltip)\r\n\t\t\t    tooltip\r\n\t\t\t       \t.anchor((currentEvent.type == \"flow\")? currentEvent.y+currentEvent.dy/2  :currentEvent.y+currentEvent.height/2)\r\n\t\t\t    \t.color(color(currentEvent, currentEvent.serieIndex))\r\n\t\t\t    \t.show(currentEvent); \r\n\t\t    // var f = d3.locale(localeDef).timeFormat(dateFormat[currentEvent.type])\r\n\t\t    currentEvent._color = d3.rgb(color(currentEvent, currentEvent.serieIndex)).darker(0.7).toString()\r\n\t\t    currentEvent._bgColor = d3.rgb(color(currentEvent, currentEvent.serieIndex)).brighter(5.55).toString()\r\n\t\t    \r\n\t\t    onNavigate(currentEvent)\t\r\n\t\t  }\r\n\r\n\t\t\r\n\t \tvar first = function(){\r\n\t \t\tcurrentIndex = 0;\r\n\t \t\tnavigate()\r\n\t \t\treturn l.line[currentIndex]\r\n\t \t}\r\n\r\n\t \tvar last = function(){\r\n\t \t\tcurrentIndex =  l.line.length-1;\r\n\t \t\tnavigate()\r\n\t \t\treturn l.line[currentIndex]\r\n\t \t}\r\n\r\n\t \tvar prev = function(){\r\n\t \t\tif(currentIndex == undefined){\r\n\t \t\t\treturn first();\r\n\t \t\t}\r\n\t \t\tcurrentIndex--;\r\n\t \t\tif(currentIndex<0) return last(); \r\n\t \t\tnavigate()\r\n\t \t\treturn l.line[currentIndex]\r\n\t \t}\r\n\r\n\t \tvar next = function(){\r\n\t \t\tif(currentIndex == undefined){\r\n\t \t\t\treturn first();\r\n\t \t\t}\r\n\t \t\tcurrentIndex = (currentIndex) ? currentIndex : 0;\r\n\t \t\tcurrentIndex++;\r\n\t \t\tif((currentIndex > l.line.length-1)) return first();\r\n\t \t\tnavigate()\r\n\t \t\treturn l.line[currentIndex]\r\n\t \t}\r\n\r\n\t \tvar current = function(){\r\n\t \t\tif(currentIndex == undefined){\r\n\t \t\t\treturn first();\r\n\t \t\t}\r\n\t \t\tnavigate()\r\n\t \t\treturn l.line[currentIndex]\r\n\t \t}\r\n\r\n\t \tvar translateWrap = function(e){\r\n\t \t\tchart.redraw();\r\n\t \t\tg.select(\"g.nv-x.nv-axis\")\r\n\t\t\t\t.transition()\r\n\t\t\t\t.duration(500)\r\n\t\t\t\t.ease(\"cubic-in\")\r\n\t\t\t\t.attr(\"transform\",\"translate(\"+(-e.start*zoom.scale()+margin.left+2+availableWidth*0.25)+\",\"+(availableHeight+margin.top)+\")\")\r\n\t\t\tg.select(\".series\")\r\n\t\t\t\t.transition()\r\n\t\t\t\t.duration(500)\r\n\t\t\t\t.ease(\"cubic-in\")\r\n\t\t\t\t.attr(\"transform\",\"translate(\"+(-e.start*zoom.scale()+margin.left+2+availableWidth*0.25)+\",\"+(margin.top)+\")\")\r\n\t\t}\r\n\r\n\t \tchart.next = function(){\r\n\t \t\tvar e = next();\r\n\t \t\ttranslateWrap(e)\r\n\t\t}\r\n\r\n\t\tchart.first = function(){\r\n\t \t\tvar e = first();\r\n\t \t\ttranslateWrap(e)\r\n\t\t}\r\n\r\n\t\tchart.last = function(){\r\n\t \t\tvar e = last();\r\n\t \t\ttranslateWrap(e)\r\n\t\t}\r\n\r\n\t \tchart.prev = function(){\r\n\t \t\tvar e = prev();\r\n\t \t\ttranslateWrap(e)\r\n\t \t}\r\n\r\n\t\tvar onZoomWithTooltip = function(){\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar e = current();\r\n\t\t\t\t\tif(prevZoom \r\n\t\t\t\t\t\t&& prevZoom != zoom.scale()){\r\n\t\t\t\t\t\tzoom.translate(prevTranslate)\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(\r\n\t\t\t\t\t\tprevZoom \r\n\t\t\t\t\t\t&& prevZoom == zoom.scale() \r\n\t\t\t\t\t){\r\n\t\t\t\t\t\tif(prevTranslate && (zoom.translate()[0] != prevTranslate[0])){\r\n\t\t\t\t\t\t\tif(zoom.translate()[0]-prevTranslate[0]>0){\r\n\t\t\t\t\t\t\t\te = prev();\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\te = next()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if(!prevTranslate){\r\n\t\t\t\t\t\t\te = first()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\te = current()\r\n\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\tprevTranslate = zoom.translate();\r\n\t\t\t\t\tprevZoom = zoom.scale();\r\n\r\n\t\t\t\t\ttranslateWrap(e)\r\n\t\t\t}\r\n\r\n\t\tvar onZoomWithoutTooltip = function(){\r\n\t\t\tchart.redraw();\r\n\t\t}\t\r\n\r\n\t\tif(showTooltip){\t\r\n\t\t\tzoom.on(\"zoomend\", onZoomWithTooltip)\r\n\t\t\t\r\n\t\t} else{\r\n\t\t\tzoom\r\n\t\t\t\t.on(\"zoomend\", onZoomWithoutTooltip)\r\n\t\t\t\t.on(\"zoom\", function(){\r\n\t\t\t\t\tg.select(\"g.nv-x.nv-axis\")\r\n\t\t\t\t\t\t.transition()\r\n\t\t\t\t\t\t// .duration(500)\r\n\t\t\t\t\t\t// .ease(\"cubic-in\")\r\n\t\t\t\t\t\t.attr(\"transform\",\"translate(\"+zoom.translate()[0]+\",\"+(availableHeight+margin.top)+\")\")\r\n\t\t\t\t\tg.select(\".series\")\r\n\t\t\t\t\t\t.transition()\r\n\t\t\t\t\t\t// .duration(500)\r\n\t\t\t\t\t\t// .ease(\"cubic-in\")\r\n\t\t\t\t\t\t.attr(\"transform\",\"translate(\"+zoom.translate()[0]+\",\"+(margin.top)+\")\")\r\n\t\t\t\t\t\t})\r\n\t\t}\t\r\n\r\n\t\tif(_currentEvent){\r\n\r\n\t\t\t\tvar index = l.line.map(function(d) {return d.context}).indexOf(_currentEvent.context)\r\n\t\t\t\tif(index >=0){\r\n\t\t\t\t\tcurrentIndex = index;\r\n\t\t\t\t\tif(showTooltip)\t{\r\n\t\t\t\t\t\ttranslateWrap(current());\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcurrent();\r\n\t\t\t\t\t\tchart.redraw();\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\tif(showTooltip)\ttranslateWrap(first())\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(showTooltip)\ttranslateWrap(first())\r\n\t\t\t}\r\n\r\n\t\r\n \t\tlegend.dispatch.on(\"stateChange\", function (newState) {\r\n          tooltip.hide();\r\n          state = newState;\r\n          dispatch.changeState(state);\r\n        });\r\n\t        \r\n\t    \r\n \t\tdispatch.on(\"changeState\", function (e) {\r\n          if (typeof e.disabled !== \"undefined\" && data.length === e.disabled.length) {\r\n            _d.forEach(function (series, i) {\r\n              series.disabled = !!e.disabled[i];\r\n            });\r\n\r\n            state.disabled = e.disabled;\r\n          }\r\n          onNavigate();\r\n          if(showTooltip) tooltip.hide();\r\n          chart.update();\r\n        });\r\n\r\n    \t});\r\n\t\t\r\n    \treturn chart;\r\n\r\n    } \r\n\r\n     //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    \r\n    // d3.rebind(chart, scatter, \"id\", \"interactive\", \"size\", \"xScale\", \"yScale\", \"zScale\", \"xDomain\", \"yDomain\", \"xRange\", \"yRange\", \"sizeDomain\", \"forceX\", \"forceY\", \"forceSize\", \"clipVoronoi\", \"useVoronoi\", \"clipRadius\", \"padData\", \"highlightPoint\", \"clearHighlights\");\r\n\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n    chart.legend = legend;\r\n    chart.dispatch = dispatch; \r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n\tchart.localeDef = function (_) {\r\n      if (!arguments.length) return localeDef;\r\n      localeDef = _;\r\n      return chart;\r\n    };\r\n\r\n    \r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      this.color = color;\r\n      legend.color(color);\r\n      return chart;\r\n    };\r\n\r\n    chart.state = function (_) {\r\n      if (!arguments.length) return state;\r\n      state = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultState = function (_) {\r\n      if (!arguments.length) return defaultState;\r\n      defaultState = _;\r\n      return chart;\r\n    };\r\n\r\n\tchart.dateFormat = function (_) {\r\n      if (!arguments.length) return dateFormat;\r\n      dateFormat = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showNavigator = function (_) {\r\n      if (!arguments.length) return showNavigator;\r\n      showNavigator = _;\r\n      return chart;\r\n    };\r\n\r\n\tchart.onNavigate = function (_) {\r\n      if (!arguments.length) return onNavigate;\r\n      onNavigate = _;\r\n      return chart;\r\n    };\r\n\r\n     chart.tooltipContent = function (_) {\r\n      if (!arguments.length) return tooltipContent;\r\n      tooltipContent = _;\r\n      return chart;\r\n    };\r\n\r\n\tchart.showTooltip = function (_) {\r\n      if (!arguments.length) return showTooltip;\r\n      showTooltip = _;\r\n      return chart;\r\n    };\r\n\r\n\r\n\r\n\r\n  \r\n    //============================================================\r\n    \r\n \treturn chart;   \r\n}\r\n\r\n\r\n\r\n"],"sourceRoot":"/source/"}