{"version":3,"sources":["v2.nvd3-widget/nv.d3.ext.js"],"names":[],"mappings":"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","file":"v2.nvd3-widget/nv.d3.ext.js","sourcesContent":["\"use strict\";\r\n\r\n(function () {\r\n // console.log(\"LOAD nv.d3.ext\")\r\n // console.log(date)\r\n\r\n var customTimeFormat = d3.time.format.multi([\r\n                [\".%L\", function(d) { return d.getMilliseconds(); }],\r\n                [\":%S\", function(d) { return d.getSeconds(); }],\r\n                [\"%I:%M\", function(d) { return d.getMinutes(); }],\r\n                [\"%I %p\", function(d) { return d.getHours(); }],\r\n                [\"%a %d\", function(d) { return d.getDay() && d.getDate() != 1; }],\r\n                [\"%b %d\", function(d) { return d.getDate() != 1; }],\r\n                [\"%B\", function(d) { return d.getMonth(); }],\r\n                [\"%Y\", function() { return true; }]\r\n              ]);\r\n\r\n var convertDateTime = function(data){\r\n      data.forEach(function(serie,i) {\r\n            if(serie.role == \"time\"){\r\n              serie.key = date.format(new Date(serie.key), ((serie.format)?serie.format:\"YY.MM.DD\"))\r\n            }\r\n            if(serie.label){\r\n              if(serie.label.role == \"time\"){\r\n                serie.values.forEach(function(value){\r\n                  value.label = date.format(new Date(value.label), ((serie.label.format)?serie.label.format:\"YY.MM.DD\"))\r\n                })\r\n              }\r\n            }  \r\n        })\r\n }     \r\n\r\nd3.geo.tileServerEnable = true;\r\n\r\nd3.html(\r\n  \"http://api.tiles.mapbox.com/v4/\"\r\n            + \"mapbox.outdoors\" + \"/\"\r\n            + \"0\" + \"/\" + \"0\" + \"/\" + \"0\" + \".png\"\r\n            + \"?access_token=\" +\"pk.eyJ1IjoiYm9sZGFrIiwiYSI6InZrSEF6RXMifQ.c8WIV6zoinhXwXXY2cFurg\",\r\n            function(error,doc){\r\n              // console.log(error)\r\n              if(error == null || error == undefined) d3.geo.tileServerEnable = true;\r\n            }\r\n);\r\n\r\nd3.geo.tile = function () {\r\n  var size = [960, 500],\r\n      scale = 256,\r\n      translate = [size[0] / 2, size[1] / 2],\r\n      zoomDelta = 0;\r\n\r\n  function tile() {\r\n    var z = Math.max(Math.log(scale) / Math.LN2 - 8, 0),\r\n        z0 = Math.round(z + zoomDelta),\r\n        k = Math.pow(2, z - z0 + 8),\r\n        origin = [(translate[0] - scale / 2) / k, (translate[1] - scale / 2) / k],\r\n        tiles = [],\r\n        cols = d3.range(Math.max(0, Math.floor(-origin[0])), 1+Math.max(0, Math.ceil(size[0] / k - origin[0]))),\r\n        rows = d3.range(Math.max(0, Math.floor(-origin[1])), 1+Math.max(0, Math.ceil(size[1] / k - origin[1])));\r\n\r\n    rows.forEach(function (y) {\r\n      cols.forEach(function (x) {\r\n        tiles.push([x, y, z0]);\r\n      });\r\n    });\r\n\r\n    tiles.translate = origin;\r\n    tiles.scale = k;\r\n\r\n    return tiles;\r\n  }\r\n\r\n  tile.size = function (_) {\r\n    if (!arguments.length) return size;\r\n    size = _;\r\n    return tile;\r\n  };\r\n\r\n  tile.scale = function (_) {\r\n    if (!arguments.length) return scale;\r\n    scale = _;\r\n    return tile;\r\n  };\r\n\r\n  tile.translate = function (_) {\r\n    if (!arguments.length) return translate;\r\n    translate = _;\r\n    return tile;\r\n  };\r\n\r\n  tile.zoomDelta = function (_) {\r\n    if (!arguments.length) return zoomDelta;\r\n    zoomDelta = +_;\r\n    return tile;\r\n  };\r\n\r\n  return tile;\r\n};\r\n\r\n  nv.tooltip.show = function (pos, content, gravity, dist, parentContainer, classes) {\r\n    //Create new tooltip div if it doesn't exist on DOM.\r\n    var container = document.createElement(\"div\");\r\n    container.className = \"nvtooltip \" + (classes ? classes : \"xy-tooltip\");\r\n\r\n    var body = parentContainer;\r\n    if (!parentContainer || parentContainer.tagName.match(/g|svg/i)) {\r\n      //If the parent element is an SVG element, place tooltip in the <body> element.\r\n      body = document.getElementsByTagName(\"body\")[0];\r\n    }\r\n\r\n    container.style.left = 0;\r\n    container.style.top = 0;\r\n    //container.style.opacity = 0;\r\n    container.innerHTML = content;\r\n    body.appendChild(container);\r\n\r\n    //If the parent container is an overflow <div> with scrollbars, subtract the scroll offsets.\r\n    if (parentContainer) {\r\n      pos[0] = pos[0] - parentContainer.scrollLeft;\r\n      pos[1] = pos[1] - parentContainer.scrollTop;\r\n    }\r\n    nv.tooltip.calcTooltipPosition(pos, gravity, dist, container);\r\n  };\r\n\r\n  nv.tooltip.calcTooltipPosition = function (pos, gravity, dist, container) {\r\n    var height = parseInt(container.offsetHeight),\r\n        width = parseInt(container.offsetWidth),\r\n        windowWidth = nv.utils.windowSize().width,\r\n        windowHeight = nv.utils.windowSize().height,\r\n        scrollTop = window.pageYOffset,\r\n        scrollLeft = window.pageXOffset,\r\n        left,\r\n        top;\r\n\r\n    windowHeight = window.innerWidth >= document.body.scrollWidth ? windowHeight : windowHeight - 16;\r\n    windowWidth = window.innerHeight >= document.body.scrollHeight ? windowWidth : windowWidth - 16;\r\n\r\n    gravity = gravity || \"s\";\r\n    dist = dist || 20;\r\n\r\n    var tooltipTop = function (Elem) {\r\n      return nv.tooltip.findTotalOffsetTop(Elem, top);\r\n    };\r\n\r\n    var tooltipLeft = function (Elem) {\r\n      return nv.tooltip.findTotalOffsetLeft(Elem, left);\r\n    };\r\n\r\n    switch (gravity) {\r\n      case \"e\":\r\n        left = pos[0] - width - dist;\r\n        top = pos[1] - height / 2;\r\n        var tLeft = tooltipLeft(container);\r\n        var tTop = tooltipTop(container);\r\n        if (tLeft < scrollLeft) left = pos[0] + dist > scrollLeft ? pos[0] + dist : scrollLeft - tLeft + left;\r\n        if (tTop < scrollTop) top = scrollTop - tTop + top;\r\n        if (tTop + height > scrollTop + windowHeight) top = scrollTop + windowHeight - tTop + top - height;\r\n        break;\r\n      case \"w\":\r\n        left = pos[0] + dist;\r\n        top = pos[1] - height / 2;\r\n        var tLeft = tooltipLeft(container);\r\n        var tTop = tooltipTop(container);\r\n        if (tLeft + width > windowWidth) left = pos[0] - width - dist;\r\n        if (tTop < scrollTop) top = scrollTop + 5;\r\n        if (tTop + height > scrollTop + windowHeight) top = scrollTop + windowHeight - tTop + top - height;\r\n        break;\r\n      case \"n\":\r\n        left = pos[0] - width / 2 - 5;\r\n        top = pos[1] + dist;\r\n        var tLeft = tooltipLeft(container);\r\n        var tTop = tooltipTop(container);\r\n        if (tLeft < scrollLeft) left = scrollLeft + 5;\r\n        if (tLeft + width > windowWidth) left = left - width / 2 + 5;\r\n        if (tTop + height > scrollTop + windowHeight) top = scrollTop + windowHeight - tTop + top - height;\r\n        break;\r\n      case \"s\":\r\n        left = pos[0] - width / 2;\r\n        top = pos[1] - height - dist;\r\n        var tLeft = tooltipLeft(container);\r\n        var tTop = tooltipTop(container);\r\n        if (tLeft < scrollLeft) left = scrollLeft + 5;\r\n        if (tLeft + width > windowWidth) left = left - width / 2 + 5;\r\n        if (scrollTop > tTop) top = scrollTop;\r\n        break;\r\n      case \"none\":\r\n        left = pos[0];\r\n        top = pos[1] - dist;\r\n        var tLeft = tooltipLeft(container);\r\n        var tTop = tooltipTop(container);\r\n        break;\r\n    }\r\n\r\n\r\n    container.style.left = left + \"px\";\r\n    container.style.top = top + \"px\";\r\n    container.style.opacity = 1;\r\n    container.style.position = \"absolute\";\r\n\r\n    return container;\r\n  };\r\n\r\n\r\n\r\n\r\n  nv.models.pieChart = function() {\r\n      \"use strict\";\r\n      //============================================================\r\n      // Public Variables with Default Settings\r\n      //------------------------------------------------------------\r\n\r\n      var pie = nv.models.pie()\r\n        , legend = nv.models.legend()\r\n        ;\r\n\r\n      var margin = {top: 30, right: 20, bottom: 20, left: 20}\r\n        , width = null\r\n        , height = null\r\n        , showLegend = true\r\n        , color = nv.utils.defaultColor()\r\n        , tooltips = true\r\n        , tooltip = function(key, y, e, graph) {\r\n            return '<h3>' + key + '</h3>' +\r\n                   '<p>' +  y + '</p>'\r\n          }\r\n        , state = {}\r\n        , defaultState = null\r\n        , noData = \"No Data Available.\"\r\n        , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\r\n        ;\r\n\r\n      //============================================================\r\n\r\n\r\n      //============================================================\r\n      // Private Variables\r\n      //------------------------------------------------------------\r\n\r\n      var showTooltip = function(e, offsetElement) {\r\n        var tooltipLabel = pie.description()(e.point) || pie.x()(e.point)\r\n        var left = e.pos[0] + ( (offsetElement && offsetElement.offsetLeft) || 0 ),\r\n            top = e.pos[1] + ( (offsetElement && offsetElement.offsetTop) || 0),\r\n            y = pie.valueFormat()(pie.y()(e.point)),\r\n            content = tooltip(tooltipLabel, y, e, chart);\r\n\r\n        nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\r\n      };\r\n\r\n      //============================================================\r\n\r\n\r\n      function chart(selection) {\r\n        selection.each(function(data) {\r\n          // console.log(\"PIE\", data)\r\n          \r\n          if(data && data.length){\r\n            var _temp = [data[0]]\r\n            convertDateTime(_temp);\r\n            data = _temp[0].values;\r\n          }\r\n\r\n          var container = d3.select(this),\r\n              that = this;\r\n\r\n          var availableWidth = (width || parseInt(container.style('width')) || 960)\r\n                                 - margin.left - margin.right,\r\n              availableHeight = (height || parseInt(container.style('height')) || 400)\r\n                                 - margin.top - margin.bottom;\r\n\r\n          chart.update = function() { container.transition().call(chart); };\r\n          chart.container = this;\r\n\r\n          //set state.disabled\r\n          state.disabled = data.map(function(d) { return !!d.disabled });\r\n\r\n          if (!defaultState) {\r\n            var key;\r\n            defaultState = {};\r\n            for (key in state) {\r\n              if (state[key] instanceof Array)\r\n                defaultState[key] = state[key].slice(0);\r\n              else\r\n                defaultState[key] = state[key];\r\n            }\r\n          }\r\n\r\n          //------------------------------------------------------------\r\n          // Display No Data message if there's nothing to show.\r\n\r\n          if (!data || !data.length) {\r\n            var noDataText = container.selectAll('.nv-noData').data([noData]);\r\n\r\n            noDataText.enter().append('text')\r\n              .attr('class', 'nvd3 nv-noData')\r\n              .attr('dy', '-.7em')\r\n              .style('text-anchor', 'middle');\r\n\r\n            noDataText\r\n              .attr('x', margin.left + availableWidth / 2)\r\n              .attr('y', margin.top + availableHeight / 2)\r\n              .text(function(d) { return d });\r\n\r\n            return chart;\r\n          } else {\r\n            container.selectAll('.nv-noData').remove();\r\n          }\r\n\r\n          //------------------------------------------------------------\r\n\r\n\r\n          //------------------------------------------------------------\r\n          // Setup containers and skeleton of chart\r\n\r\n          var wrap = container.selectAll('g.nv-wrap.nv-pieChart').data([data]);\r\n          var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-pieChart').append('g');\r\n          var g = wrap.select('g');\r\n\r\n          gEnter.append('g').attr('class', 'nv-pieWrap');\r\n          gEnter.append('g').attr('class', 'nv-legendWrap');\r\n\r\n          //------------------------------------------------------------\r\n\r\n\r\n          //------------------------------------------------------------\r\n          // Legend\r\n\r\n          if (showLegend) {\r\n            legend\r\n              .width( availableWidth )\r\n              .key(pie.x());\r\n\r\n            wrap.select('.nv-legendWrap')\r\n                .datum(data)\r\n                .call(legend);\r\n\r\n            if ( margin.top != legend.height()) {\r\n              margin.top = legend.height();\r\n              availableHeight = (height || parseInt(container.style('height')) || 400)\r\n                                 - margin.top - margin.bottom;\r\n            }\r\n\r\n            wrap.select('.nv-legendWrap')\r\n                .attr('transform', 'translate(0,' + (-margin.top) +')');\r\n          }\r\n\r\n          //------------------------------------------------------------\r\n\r\n\r\n          wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\r\n\r\n\r\n          //------------------------------------------------------------\r\n          // Main Chart Component(s)\r\n\r\n          pie\r\n            .width(availableWidth)\r\n            .height(availableHeight);\r\n\r\n\r\n          var pieWrap = g.select('.nv-pieWrap')\r\n              .datum([data]);\r\n\r\n          d3.transition(pieWrap).call(pie);\r\n\r\n          //------------------------------------------------------------\r\n\r\n\r\n          //============================================================\r\n          // Event Handling/Dispatching (in chart's scope)\r\n          //------------------------------------------------------------\r\n\r\n          legend.dispatch.on('stateChange', function(newState) {\r\n            state = newState;\r\n            dispatch.stateChange(state);\r\n            chart.update();\r\n          });\r\n\r\n          pie.dispatch.on('elementMouseout.tooltip', function(e) {\r\n            dispatch.tooltipHide(e);\r\n          });\r\n\r\n          // Update chart from a state object passed to event handler\r\n          dispatch.on('changeState', function(e) {\r\n\r\n            if (typeof e.disabled !== 'undefined') {\r\n              data.forEach(function(series,i) {\r\n                series.disabled = e.disabled[i];\r\n              });\r\n\r\n              state.disabled = e.disabled;\r\n            }\r\n\r\n            chart.update();\r\n          });\r\n\r\n          //============================================================\r\n\r\n\r\n        });\r\n\r\n        return chart;\r\n      }\r\n\r\n      //============================================================\r\n      // Event Handling/Dispatching (out of chart's scope)\r\n      //------------------------------------------------------------\r\n\r\n      pie.dispatch.on('elementMouseover.tooltip', function(e) {\r\n        e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\r\n        dispatch.tooltipShow(e);\r\n      });\r\n\r\n      dispatch.on('tooltipShow', function(e) {\r\n        if (tooltips) showTooltip(e);\r\n      });\r\n\r\n      dispatch.on('tooltipHide', function() {\r\n        if (tooltips) nv.tooltip.cleanup();\r\n      });\r\n\r\n      //============================================================\r\n\r\n\r\n      //============================================================\r\n      // Expose Public Variables\r\n      //------------------------------------------------------------\r\n\r\n      // expose chart's sub-components\r\n      chart.legend = legend;\r\n      chart.dispatch = dispatch;\r\n      chart.pie = pie;\r\n\r\n      d3.rebind(chart, pie, 'valueFormat', 'values', 'x', 'y', 'description', 'id', 'showLabels', 'donutLabelsOutside', 'pieLabelsOutside', 'labelType', 'donut', 'donutRatio', 'labelThreshold');\r\n      chart.options = nv.utils.optionsFunc.bind(chart);\r\n      \r\n      chart.margin = function(_) {\r\n        if (!arguments.length) return margin;\r\n        margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\r\n        margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\r\n        margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\r\n        margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\r\n        return chart;\r\n      };\r\n\r\n      chart.width = function(_) {\r\n        if (!arguments.length) return width;\r\n        width = _;\r\n        return chart;\r\n      };\r\n\r\n      chart.height = function(_) {\r\n        if (!arguments.length) return height;\r\n        height = _;\r\n        return chart;\r\n      };\r\n\r\n      chart.color = function(_) {\r\n        if (!arguments.length) return color;\r\n        color = nv.utils.getColor(_);\r\n        legend.color(color);\r\n        pie.color(color);\r\n        return chart;\r\n      };\r\n\r\n      chart.showLegend = function(_) {\r\n        if (!arguments.length) return showLegend;\r\n        showLegend = _;\r\n        return chart;\r\n      };\r\n\r\n      chart.tooltips = function(_) {\r\n        if (!arguments.length) return tooltips;\r\n        tooltips = _;\r\n        return chart;\r\n      };\r\n\r\n      chart.tooltipContent = function(_) {\r\n        if (!arguments.length) return tooltip;\r\n        tooltip = _;\r\n        return chart;\r\n      };\r\n\r\n      chart.state = function(_) {\r\n        if (!arguments.length) return state;\r\n        state = _;\r\n        return chart;\r\n      };\r\n\r\n      chart.defaultState = function(_) {\r\n        if (!arguments.length) return defaultState;\r\n        defaultState = _;\r\n        return chart;\r\n      };\r\n\r\n      chart.noData = function(_) {\r\n        if (!arguments.length) return noData;\r\n        noData = _;\r\n        return chart;\r\n      };\r\n\r\n      //============================================================\r\n\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n\r\n\r\n  //\r\n  // SCATTER Model\r\n  //\r\n  nv.models.scatter = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var margin = { top: 0, right: 0, bottom: 0, left: 0 },\r\n        width = 960,\r\n        height = 500,\r\n        color = nv.utils.defaultColor() // chooses color\r\n    ,\r\n        id = Math.floor(Math.random() * 100000) //Create semi-unique ID incase user doesn't select one\r\n    ,\r\n        x = d3.scale.linear(),\r\n        y = d3.scale.linear(),\r\n        z = d3.scale.linear() //linear because d3.svg.shape.size is treated as area\r\n    ,   showPoints = true \r\n    ,\r\n        getX = function (d) {\r\n      return d.x;\r\n    } // accessor to get the x value\r\n    ,\r\n        getY = function (d) {\r\n      return d.y;\r\n    } // accessor to get the y value\r\n    ,\r\n        getOX = function (d) {\r\n      return d.ox;\r\n    },\r\n        getOY = function (d) {\r\n      return d.oy;\r\n    },\r\n        getRadiusVectorWeight = function (d) {\r\n      return d.weight;\r\n    },\r\n        getLabel = undefined //function(d) {return (d.label) ? d.label : ''}\r\n    ,\r\n        getSize = function (d) {\r\n      return d.size || 1;\r\n    } // accessor to get the point size\r\n    ,\r\n        getShape = function (d) {\r\n      return d.shape || \"circle\";\r\n    } // accessor to get point shape\r\n    ,\r\n        onlyCircles = true // Set to false to use shapes\r\n    ,\r\n        forceX = [] // List of numbers to Force into the X scale (ie. 0, or a max / min, etc.)\r\n    ,\r\n        forceY = [] // List of numbers to Force into the Y scale\r\n    ,\r\n        forceSize = [] // List of numbers to Force into the Size scale\r\n    ,\r\n        interactive = true // If true, plots a voronoi overlay for advanced point intersection\r\n    ,\r\n        pointKey = null,\r\n        pointActive = function (d) {\r\n      return !d.notActive;\r\n    } // any points that return false will be filtered out\r\n    ,\r\n        padData = false // If true, adds half a data points width to front and back, for lining up a line chart with a bar chart\r\n    ,\r\n        padDataOuter = 0.1 //outerPadding to imitate ordinal scale outer padding\r\n    ,\r\n        clipEdge = false // if true, masks points within x and y scale\r\n    ,\r\n        clipVoronoi = true // if true, masks each point with a circle... can turn off to slightly increase performance\r\n    ,\r\n        clipRadius = function () {\r\n      return 25;\r\n    } // function to get the radius for voronoi point clips\r\n    ,\r\n        xDomain = null // Override x domain (skips the calculation from data)\r\n    ,\r\n        yDomain = null // Override y domain\r\n    ,\r\n        xRange = null // Override x range\r\n    ,\r\n        yRange = null // Override y range\r\n    ,\r\n        sizeDomain = null // Override point size domain\r\n    ,\r\n        sizeRange = null,\r\n        singlePoint = false,\r\n        dispatch = d3.dispatch(\"elementClick\", \"elementDblClick\",\"elementMouseover\", \"elementMouseout\"),\r\n        useVoronoi = true,\r\n        showRadiusVector = true;\r\n\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Private Variables\r\n    //------------------------------------------------------------\r\n\r\n    var x0,\r\n        y0,\r\n        z0 // used to store previous scales\r\n    ,\r\n        timeoutID,\r\n        needsUpdate = false // Flag for when the points are visually updating, but the interactive layer is behind, to disable tooltips\r\n    ;\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      //console.log(selection)\r\n      selection.each(function (data) {\r\n        var availableWidth = width - margin.left - margin.right,\r\n            availableHeight = height - margin.top - margin.bottom,\r\n            container = d3.select(this);\r\n\r\n        //add series index to each data point for reference\r\n        data.forEach(function (series, i) {\r\n          series.values.forEach(function (point) {\r\n            point.series = i;\r\n            if (series.radiusVector && point.ox !== undefined && point.oy !== undefined) point.radiusVector = true;\r\n          });\r\n        });\r\n        //console.log(\"data\",data)\r\n        //------------------------------------------------------------\r\n        // Setup Scales\r\n\r\n        // remap and flatten the data for use in calculating the scales' domains\r\n        var seriesData = xDomain && yDomain && sizeDomain ? [] : // if we know xDomain and yDomain and sizeDomain, no need to calculate.... if Size is constant remember to set sizeDomain to speed up performance\r\n        d3.merge(data.map(function (d) {\r\n          return d.values.map(function (d, i) {\r\n            return { x: getX(d, i), y: getY(d, i), size: getSize(d, i) };\r\n          });\r\n        }));\r\n\r\n        x.domain(xDomain || d3.extent(seriesData.map(function (d) {\r\n          return d.x;\r\n        }).concat(forceX)));\r\n\r\n        if (padData && data[0]) x.range(xRange || [(availableWidth * padDataOuter + availableWidth) / (2 * data[0].values.length), availableWidth - availableWidth * (1 + padDataOuter) / (2 * data[0].values.length)]);\r\n        //x.range([availableWidth * .5 / data[0].values.length, availableWidth * (data[0].values.length - .5)  / data[0].values.length ]);\r\n        else x.range(xRange || [0, availableWidth]);\r\n\r\n        y.domain(yDomain || d3.extent(seriesData.map(function (d) {\r\n          return d.y;\r\n        }).concat(forceY))).range(yRange || [availableHeight, 0]);\r\n\r\n        z.domain(sizeDomain || d3.extent(seriesData.map(function (d) {\r\n          return d.size;\r\n        }).concat(forceSize))).range(sizeRange || [16, 256]);\r\n\r\n        // If scale's domain don't have a range, slightly adjust to make one... so a chart can show a single data point\r\n        if (x.domain()[0] === x.domain()[1] || y.domain()[0] === y.domain()[1]) singlePoint = true;\r\n        if (x.domain()[0] === x.domain()[1]) x.domain()[0] ? x.domain([x.domain()[0] - x.domain()[0] * 0.01, x.domain()[1] + x.domain()[1] * 0.01]) : x.domain([-1, 1]);\r\n\r\n        if (y.domain()[0] === y.domain()[1]) y.domain()[0] ? y.domain([y.domain()[0] - y.domain()[0] * 0.01, y.domain()[1] + y.domain()[1] * 0.01]) : y.domain([-1, 1]);\r\n\r\n        if (isNaN(x.domain()[0])) {\r\n          x.domain([-1, 1]);\r\n        }\r\n\r\n        if (isNaN(y.domain()[0])) {\r\n          y.domain([-1, 1]);\r\n        }\r\n\r\n\r\n        x0 = x0 || x;\r\n        y0 = y0 || y;\r\n        z0 = z0 || z;\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-scatter\").data([data]);\r\n        var wrapEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-scatter nv-chart-\" + id + (singlePoint ? \" nv-single-point\" : \"\"));\r\n        var defsEnter = wrapEnter.append(\"defs\");\r\n        var gEnter = wrapEnter.append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-groups\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-point-paths\");\r\n\r\n        wrap.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        defsEnter.append(\"clipPath\").attr(\"id\", \"nv-edge-clip-\" + id).append(\"rect\");\r\n\r\n        wrap.select(\"#nv-edge-clip-\" + id + \" rect\").attr(\"width\", availableWidth).attr(\"height\", availableHeight > 0 ? availableHeight : 0);\r\n\r\n        g.attr(\"clip-path\", clipEdge ? \"url(#nv-edge-clip-\" + id + \")\" : \"\");\r\n\r\n\r\n        function updateInteractiveLayer() {\r\n          if (!interactive) return false;\r\n\r\n          var eventElements;\r\n\r\n          var vertices = d3.merge(data.map(function (group, groupIndex) {\r\n            return group.values.map(function (point, pointIndex) {\r\n              // *Adding noise to make duplicates very unlikely\r\n              // *Injecting series and point index for reference\r\n              /* *Adding a 'jitter' to the points, because there's an issue in d3.geom.voronoi.\r\n               */\r\n              var pX = getX(point, pointIndex);\r\n              var pY = getY(point, pointIndex);\r\n\r\n              return [x(pX) + Math.random() * 1e-7, y(pY) + Math.random() * 1e-7, groupIndex, pointIndex, point]; //temp hack to add noise untill I think of a better way so there are no duplicates\r\n            }).filter(function (pointArray, pointIndex) {\r\n              return pointActive(pointArray[4], pointIndex); // Issue #237.. move filter to after map, so pointIndex is correct!\r\n            });\r\n          }));\r\n\r\n\r\n          //inject series and point index for reference into voronoi\r\n          if (useVoronoi === true) {\r\n            if (clipVoronoi) {\r\n              var pointClipsEnter = wrap.select(\"defs\").selectAll(\".nv-point-clips\").data([id]).enter();\r\n\r\n              pointClipsEnter.append(\"clipPath\").attr(\"class\", \"nv-point-clips\").attr(\"id\", \"nv-points-clip-\" + id);\r\n\r\n              var pointClips = wrap.select(\"#nv-points-clip-\" + id).selectAll(\"circle\").data(vertices);\r\n\r\n              pointClips.enter().append(\"circle\").attr(\"r\", clipRadius);\r\n\r\n              pointClips.exit().remove();\r\n              pointClips.attr(\"cx\", function (d) {\r\n                return d[0];\r\n              }).attr(\"cy\", function (d) {\r\n                return d[1];\r\n              });\r\n\r\n\r\n              wrap.select(\".nv-point-paths\").attr(\"clip-path\", \"url(#nv-points-clip-\" + id + \")\");\r\n            }\r\n\r\n\r\n            if (vertices.length) {\r\n              // Issue #283 - Adding 2 dummy points to the voronoi b/c voronoi requires min 3 points to work\r\n              vertices.push([x.range()[0] - 20, y.range()[0] - 20, null, null]);\r\n              vertices.push([x.range()[1] + 20, y.range()[1] + 20, null, null]);\r\n              vertices.push([x.range()[0] - 20, y.range()[0] + 20, null, null]);\r\n              vertices.push([x.range()[1] + 20, y.range()[1] - 20, null, null]);\r\n            }\r\n\r\n            var bounds = d3.geom.polygon([[-10, -10], [-10, height + 10], [width + 10, height + 10], [width + 10, -10]]);\r\n\r\n            var voronoi = d3.geom.voronoi(vertices).map(function (d, i) {\r\n              return {\r\n                data: bounds.clip(d),\r\n                series: vertices[i][2],\r\n                point: vertices[i][3]\r\n              };\r\n            });\r\n\r\n\r\n            var pointPaths = wrap.select(\".nv-point-paths\").selectAll(\"path\").data(voronoi);\r\n            pointPaths.enter().append(\"path\").attr(\"class\", function (d, i) {\r\n              return \"nv-path-\" + i;\r\n            });\r\n            pointPaths.exit().remove();\r\n            pointPaths.attr(\"d\", function (d) {\r\n              if (!d) return \"M 0 0\";\r\n              //if(!d.data) return 'M 0 0'\r\n              if (d.data.length === 0) return \"M 0 0\";else return \"M\" + d.data.join(\"L\") + \"Z\";\r\n            });\r\n\r\n            var mouseEventCallback = function (d, mDispatch, event) {\r\n              if (needsUpdate) return 0;\r\n              var series = data[d.series];\r\n              if (typeof series === \"undefined\") return;\r\n\r\n              var point = series.values[d.point];\r\n\r\n              mDispatch({\r\n                event: event,\r\n                point: point,\r\n                series: series,\r\n                pos: [x(getX(point, d.point)) + margin.left, y(getY(point, d.point)) + margin.top],\r\n                seriesIndex: d.series,\r\n                pointIndex: d.point\r\n              });\r\n            };\r\n\r\n            pointPaths\r\n              .on(\"click\", function (d) {\r\n                mouseEventCallback(d, dispatch.elementClick);\r\n              })\r\n              .on(\"dblclick\", function (d) {\r\n                mouseEventCallback(d, dispatch.elementDblClick);\r\n              })\r\n              .on(\"mouseover\", function (d) {\r\n                mouseEventCallback(d, dispatch.elementMouseover, d3.event);\r\n              })\r\n              .on(\"mouseout\", function (d, i) {\r\n                mouseEventCallback(d, dispatch.elementMouseout, d3.event);\r\n              });\r\n          } else {\r\n            /*\r\n             // bring data in form needed for click handlers\r\n             var dataWithPoints = vertices.map(function(d, i) {\r\n             return {\r\n             'data': d,\r\n             'series': vertices[i][2],\r\n             'point': vertices[i][3]\r\n             }\r\n             });\r\n             */\r\n\r\n            // add event handlers to points instead voronoi paths\r\n            wrap.select(\".nv-groups\").selectAll(\".nv-group\").selectAll(\".nv-point\")\r\n            //.data(dataWithPoints)\r\n            //.style('pointer-events', 'auto') // recativate events, disabled by css\r\n            .on(\"click\", function (d, i) {\r\n              // console.log(\"scatter point click\")\r\n              //nv.log('test', d, i);\r\n              if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\r\n              var series = data[d.series],\r\n                  point = series.values[i];\r\n                  // console.log(\"scatter point click\")\r\n              dispatch.elementClick({\r\n                point: point,\r\n                series: series,\r\n                pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\r\n                seriesIndex: d.series,\r\n                pointIndex: i\r\n              });\r\n            })\r\n\r\n            .on(\"dblclick\", function (d, i) {\r\n              // console.log(\"scatter point dblclick\")\r\n              //nv.log('test', d, i);\r\n              if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\r\n              var series = data[d.series],\r\n                  point = series.values[i];\r\n\r\n              dispatch.elementDblClick({\r\n                point: point,\r\n                series: series,\r\n                pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\r\n                seriesIndex: d.series,\r\n                pointIndex: i\r\n              });\r\n            })\r\n\r\n            .on(\"mouseover\", function (d, i) {\r\n              if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\r\n              var series = data[d.series],\r\n                  point = series.values[i];\r\n\r\n              dispatch.elementMouseover({\r\n                point: point,\r\n                series: series,\r\n                pos: [x(getX(point, i)) + margin.left, y(getY(point, i)) + margin.top],\r\n                seriesIndex: d.series,\r\n                pointIndex: i\r\n              });\r\n            })\r\n            .on(\"mouseout\", function (d, i) {\r\n              if (needsUpdate || !data[d.series]) return 0; //check if this is a dummy point\r\n              var series = data[d.series],\r\n                  point = series.values[i];\r\n\r\n              dispatch.elementMouseout({\r\n                point: point,\r\n                series: series,\r\n                seriesIndex: d.series,\r\n                pointIndex: i\r\n              });\r\n            });\r\n          }\r\n\r\n          needsUpdate = false;\r\n        }\r\n\r\n        needsUpdate = true;\r\n\r\n        var groups = wrap.select(\".nv-groups\").selectAll(\".nv-group\").data(function (d) {\r\n          return d;\r\n        }, function (d) {\r\n          return d.key;\r\n        });\r\n        groups.enter().append(\"g\").style(\"stroke-opacity\", 0.000001).style(\"fill-opacity\", 0.000001);\r\n        groups.exit().remove();\r\n        groups.attr(\"class\", function (d, i) {\r\n          return \"nv-group nv-series-\" + i;\r\n        }).classed(\"hover\", function (d) {\r\n          return d.hover;\r\n        });\r\n        groups.transition().style(\"fill\", function (d, i) {\r\n          return color(d, i);\r\n        }).style(\"stroke\", function (d, i) {\r\n          return color(d, i);\r\n        }).style(\"stroke-opacity\", 1).style(\"fill-opacity\", 0.5);\r\n        \r\n        if(showPoints){\r\n          if (onlyCircles) {\r\n            var points = groups.selectAll(\"circle.nv-point\").data(function (d) {\r\n              return d.values;\r\n            }, pointKey);\r\n            var labels = groups.selectAll(\"text.nv-label\").data(function (d) {\r\n              return d.values;\r\n            }, pointKey);\r\n            if (showRadiusVector) {\r\n              groups.selectAll(\"line.nv-radius-vector\").data(function (d) {\r\n                return d.values;\r\n              }, pointKey).exit().remove();\r\n\r\n              var rVectors = groups.selectAll(\"line.nv-radius-vector\").data(function (d) {\r\n                return d.values.filter(function (item) {\r\n                  return item.radiusVector;\r\n                });\r\n              }, pointKey);\r\n\r\n\r\n              //console.log(\"rVectors\",rVectors)\r\n              rVectors.exit().remove();\r\n\r\n              rVectors.enter().append(\"svg:line\").attr(\"class\", \"nv-radius-vector\").attr(\"x1\", function (d, i) {\r\n                return nv.utils.NaNtoZero(x0(getOX(d, i)));\r\n              }).attr(\"y1\", function (d, i) {\r\n                return nv.utils.NaNtoZero(y0(getOY(d, i)));\r\n              }).attr(\"x2\", function (d, i) {\r\n                return nv.utils.NaNtoZero(x0(getX(d, i)));\r\n              }).attr(\"y2\", function (d, i) {\r\n                return nv.utils.NaNtoZero(y0(getY(d, i)));\r\n              }).style(\"stroke\", function (d, i) {\r\n                return d.color;\r\n              }).style(\"stroke-width\", \"1px\").style(\"opacity\", 0.3);\r\n            }\r\n\r\n            points.enter().append(\"circle\").style(\"fill\", function (d, i) {\r\n              return d.color;\r\n            }).style(\"stroke\", function (d, i) {\r\n              return d.color;\r\n            }).attr(\"cx\", function (d, i) {\r\n              return nv.utils.NaNtoZero(x0(getX(d, i)));\r\n            }).attr(\"cy\", function (d, i) {\r\n              return nv.utils.NaNtoZero(y0(getY(d, i)));\r\n            }).attr(\"r\", function (d, i) {\r\n              return Math.sqrt(z(getSize(d, i)) / Math.PI);\r\n            });\r\n            points.exit().remove();\r\n            labels.enter().append(\"text\").style(\"fill\", function (d, i) {\r\n              return d.color;\r\n            }).style(\"text-anchor\", \"start\").attr(\"x\", function (d, i) {\r\n              return nv.utils.NaNtoZero(x0(getX(d, i)));\r\n            }).attr(\"y\", function (d, i) {\r\n              return nv.utils.NaNtoZero(y0(getY(d, i)));\r\n            }).attr(\"dy\", \"-0.7em\").classed(\"nv-label\", true).text(function (d, i) {\r\n              return getLabel ? getLabel(d, i) : \"\";\r\n            });\r\n            ;\r\n            labels.exit().remove();\r\n\r\n            groups.exit().selectAll(\"path.nv-point\").transition().attr(\"cx\", function (d, i) {\r\n              return nv.utils.NaNtoZero(x(getX(d, i)));\r\n            }).attr(\"cy\", function (d, i) {\r\n              return nv.utils.NaNtoZero(y(getY(d, i)));\r\n            }).remove();\r\n            points.each(function (d, i) {\r\n              d3.select(this).classed(\"nv-point\", true).classed(\"nv-point-\" + i, true).classed(\"hover\", false);\r\n            });\r\n            labels.each(function (d, i) {\r\n              d3.select(this).classed(\"nv-label\", true);\r\n            });\r\n            points.transition().attr(\"cx\", function (d, i) {\r\n              return nv.utils.NaNtoZero(x(getX(d, i)));\r\n            }).attr(\"cy\", function (d, i) {\r\n              return nv.utils.NaNtoZero(y(getY(d, i)));\r\n            }).attr(\"r\", function (d, i) {\r\n              return Math.sqrt(z(getSize(d, i)) / Math.PI);\r\n            });\r\n            labels.transition().attr(\"x\", function (d, i) {\r\n              return nv.utils.NaNtoZero(x(getX(d, i)));\r\n            }).attr(\"y\", function (d, i) {\r\n              return nv.utils.NaNtoZero(y(getY(d, i)));\r\n            });\r\n            if (showRadiusVector) {\r\n              rVectors.transition().attr(\"class\", \"nv-radius-vector\").attr(\"x1\", function (d, i) {\r\n                return nv.utils.NaNtoZero(x(getOX(d, i)));\r\n              }).attr(\"y1\", function (d, i) {\r\n                return nv.utils.NaNtoZero(y(getOY(d, i)));\r\n              }).attr(\"x2\", function (d, i) {\r\n                return nv.utils.NaNtoZero(x(getX(d, i)));\r\n              }).attr(\"y2\", function (d, i) {\r\n                return nv.utils.NaNtoZero(y(getY(d, i)));\r\n              }).style(\"opacity\", 0.8);\r\n            }\r\n          } else {\r\n            var points = groups.selectAll(\"path.nv-point\").data(function (d) {\r\n              return d.values;\r\n            });\r\n            points.enter().append(\"path\").style(\"fill\", function (d, i) {\r\n              return d.color;\r\n            }).style(\"stroke\", function (d, i) {\r\n              return d.color;\r\n            }).attr(\"transform\", function (d, i) {\r\n              return \"translate(\" + x0(getX(d, i)) + \",\" + y0(getY(d, i)) + \")\";\r\n            }).attr(\"d\", d3.svg.symbol().type(getShape).size(function (d, i) {\r\n              return z(getSize(d, i));\r\n            }));\r\n            points.exit().remove();\r\n            groups.exit().selectAll(\"path.nv-point\").transition().attr(\"transform\", function (d, i) {\r\n              return \"translate(\" + x(getX(d, i)) + \",\" + y(getY(d, i)) + \")\";\r\n            }).remove();\r\n            points.each(function (d, i) {\r\n              d3.select(this).classed(\"nv-point\", true).classed(\"nv-point-\" + i, true).classed(\"hover\", false);\r\n            });\r\n            points.transition().attr(\"transform\", function (d, i) {\r\n              //nv.log(d,i,getX(d,i), x(getX(d,i)));\r\n              return \"translate(\" + x(getX(d, i)) + \",\" + y(getY(d, i)) + \")\";\r\n            }).attr(\"d\", d3.svg.symbol().type(getShape).size(function (d, i) {\r\n              return z(getSize(d, i));\r\n            }));\r\n          }\r\n        }\r\n\r\n\r\n        // Delay updating the invisible interactive layer for smoother animation\r\n        clearTimeout(timeoutID); // stop repeat calls to updateInteractiveLayer\r\n        timeoutID = setTimeout(updateInteractiveLayer, 300);\r\n        //updateInteractiveLayer();\r\n\r\n        //store old scales for use in transitions on update\r\n        x0 = x.copy();\r\n        y0 = y.copy();\r\n        z0 = z.copy();\r\n      });\r\n      // console.log(chart.dispatch) \r\n      return chart;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Event Handling/Dispatching (out of chart's scope)\r\n    //------------------------------------------------------------\r\n    chart.clearHighlights = function () {\r\n      //Remove the 'hover' class from all highlighted points.\r\n      d3.selectAll(\".nv-chart-\" + id + \" .nv-point.hover\").classed(\"hover\", false);\r\n    };\r\n\r\n    chart.highlightPoint = function (seriesIndex, pointIndex, isHoverOver) {\r\n      d3.select(\".nv-chart-\" + id + \" .nv-series-\" + seriesIndex + \" .nv-point-\" + pointIndex).classed(\"hover\", isHoverOver);\r\n    };\r\n\r\n\r\n    dispatch.on(\"elementMouseover.point\", function (d) {\r\n      if (interactive) chart.highlightPoint(d.seriesIndex, d.pointIndex, true);\r\n    });\r\n\r\n    dispatch.on(\"elementMouseout.point\", function (d) {\r\n      if (interactive) chart.highlightPoint(d.seriesIndex, d.pointIndex, false);\r\n    });\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    chart.dispatch = dispatch;\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.x = function (_) {\r\n      if (!arguments.length) return getX;\r\n      //console.log(\"set accessor\",_ )\r\n\r\n      getX = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.label = function (_) {\r\n      if (!arguments.length) return getLabel;\r\n      getLabel = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.showPoints = function (_) {\r\n      if (!arguments.length) return showPoints;\r\n      showPoints = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.y = function (_) {\r\n      if (!arguments.length) return getY;\r\n      getY = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n\r\n    chart.ox = function (_) {\r\n      if (!arguments.length) return getOX;\r\n      //console.log(\"set accessor\",_ )\r\n\r\n      getOX = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.oy = function (_) {\r\n      if (!arguments.length) return getOY;\r\n      //console.log(\"set accessor\",_ )\r\n\r\n      getOY = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.size = function (_) {\r\n      if (!arguments.length) return getSize;\r\n      getSize = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.xScale = function (_) {\r\n      if (!arguments.length) return x;\r\n      x = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.yScale = function (_) {\r\n      if (!arguments.length) return y;\r\n      y = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.zScale = function (_) {\r\n      if (!arguments.length) return z;\r\n      z = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.xDomain = function (_) {\r\n      if (!arguments.length) return xDomain;\r\n      xDomain = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.yDomain = function (_) {\r\n      if (!arguments.length) return yDomain;\r\n      yDomain = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.sizeDomain = function (_) {\r\n      if (!arguments.length) return sizeDomain;\r\n      sizeDomain = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.xRange = function (_) {\r\n      if (!arguments.length) return xRange;\r\n      xRange = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.yRange = function (_) {\r\n      if (!arguments.length) return yRange;\r\n      yRange = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.sizeRange = function (_) {\r\n      if (!arguments.length) return sizeRange;\r\n      sizeRange = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.forceX = function (_) {\r\n      if (!arguments.length) return forceX;\r\n      forceX = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.forceY = function (_) {\r\n      if (!arguments.length) return forceY;\r\n      forceY = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.forceSize = function (_) {\r\n      if (!arguments.length) return forceSize;\r\n      forceSize = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.interactive = function (_) {\r\n      if (!arguments.length) return interactive;\r\n      interactive = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.pointKey = function (_) {\r\n      if (!arguments.length) return pointKey;\r\n      pointKey = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.pointActive = function (_) {\r\n      if (!arguments.length) return pointActive;\r\n      pointActive = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.padData = function (_) {\r\n      if (!arguments.length) return padData;\r\n      padData = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.padDataOuter = function (_) {\r\n      if (!arguments.length) return padDataOuter;\r\n      padDataOuter = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.clipEdge = function (_) {\r\n      if (!arguments.length) return clipEdge;\r\n      clipEdge = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.clipVoronoi = function (_) {\r\n      if (!arguments.length) return clipVoronoi;\r\n      clipVoronoi = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.useVoronoi = function (_) {\r\n      if (!arguments.length) return useVoronoi;\r\n      useVoronoi = _;\r\n      if (useVoronoi === false) {\r\n        clipVoronoi = false;\r\n      }\r\n      return chart;\r\n    };\r\n\r\n    chart.showRadiusVector = function (_) {\r\n      if (!arguments.length) return showRadiusVector;\r\n      showRadiusVector = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.clipRadius = function (_) {\r\n      if (!arguments.length) return clipRadius;\r\n      clipRadius = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.shape = function (_) {\r\n      if (!arguments.length) return getShape;\r\n      getShape = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.onlyCircles = function (_) {\r\n      if (!arguments.length) return onlyCircles;\r\n      onlyCircles = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.id = function (_) {\r\n      if (!arguments.length) return id;\r\n      id = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.singlePoint = function (_) {\r\n      if (!arguments.length) return singlePoint;\r\n      singlePoint = _;\r\n      return chart;\r\n    };\r\n\r\n    //============================================================\r\n\r\n    // console.log(\"init\",chart.dispatch) \r\n    return chart;\r\n  };\r\n\r\n\r\n  //\r\n  // SCATTER CHART Model\r\n  //\r\n\r\n  nv.models.scatterChart = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var scatter = nv.models.scatter(),\r\n        xAxis = nv.models.axis(),\r\n        yAxis = nv.models.axis(),\r\n        legend = nv.models.legend(),\r\n        controls = nv.models.legend(),\r\n        distX = nv.models.distribution(),\r\n        distY = nv.models.distribution();\r\n\r\n    var margin = { top: 30, right: 20, bottom: 50, left: 75 },\r\n        width = null,\r\n        height = null,\r\n        color = nv.utils.defaultColor(),\r\n        x = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : scatter.xScale(),\r\n        y = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : scatter.yScale(),\r\n        xPadding = 0,\r\n        yPadding = 0,\r\n        showDistX = false,\r\n        showDistY = false,\r\n        showLegend = true,\r\n        showXAxis = true,\r\n        showYAxis = true,\r\n        rightAlignYAxis = false,\r\n        showControls = !!d3.fisheye,\r\n        fisheye = 0,\r\n        pauseFisheye = false,\r\n        tooltips = true,\r\n        tooltipX = function (key, x, y) {\r\n      return \"<strong>\" + x + \"</strong>\";\r\n    },\r\n        tooltipY = function (key, x, y) {\r\n      return \"<strong>\" + y + \"</strong>\";\r\n    },\r\n        tooltip = null,\r\n        state = {},\r\n        defaultState = null,\r\n        dispatch = d3.dispatch(\"tooltipShow\", \"tooltipHide\", \"stateChange\", \"changeState\"),\r\n        noData = \"No Data Available.\",\r\n        transitionDuration = 250,\r\n        tooltipShift = { x: 0, y: 0 },\r\n        showRadiusVector = true;\r\n\r\n    scatter.xScale(x).yScale(y);\r\n    xAxis.orient(\"bottom\").tickPadding(10);\r\n    yAxis.orient(rightAlignYAxis ? \"right\" : \"left\").tickPadding(10);\r\n    distX.axis(\"x\");\r\n    distY.axis(\"y\");\r\n\r\n    controls.updateState(false);\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Private Variables\r\n    //------------------------------------------------------------\r\n\r\n    var x0, y0;\r\n\r\n\r\n    function getOffset(elem) {\r\n      if (elem.getBoundingClientRect) {\r\n        // \"правильный\" вариант\r\n        return getOffsetRect(elem);\r\n      } else {\r\n        // пусть работает хоть как-то\r\n        return getOffsetSum(elem);\r\n      }\r\n    }\r\n\r\n    function getOffsetSum(elem) {\r\n      var top = 0,\r\n          left = 0;\r\n      while (elem) {\r\n        top = top + parseInt(elem.offsetTop);\r\n        left = left + parseInt(elem.offsetLeft);\r\n        elem = elem.offsetParent;\r\n      }\r\n\r\n      return { top: top, left: left };\r\n    }\r\n\r\n    function getOffsetRect(elem) {\r\n      // (1)\r\n      var box = elem.getBoundingClientRect();\r\n\r\n      // (2)\r\n      var body = document.body;\r\n      var docElem = document.documentElement;\r\n\r\n      // (3)\r\n      var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n      var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\r\n      // (4)\r\n      var clientTop = docElem.clientTop || body.clientTop || 0;\r\n      var clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\r\n      // (5)\r\n      var top = box.top + scrollTop - clientTop;\r\n      var left = box.left + scrollLeft - clientLeft;\r\n\r\n      return { top: Math.round(top), left: Math.round(left) };\r\n    }\r\n\r\n\r\n    var showTooltip = function (e, offsetElement) {\r\n      //TODO: make tooltip style an option between single or dual on axes (maybe on all charts with axes?)\r\n\r\n      var left = e.pos[0] + tooltipShift.x,\r\n\r\n\r\n\r\n\r\n      // ( offsetElement.offsetLeft || 0 ),\r\n      top = e.pos[1] + tooltipShift.y,\r\n\r\n\r\n\r\n\r\n      //( offsetElement.offsetTop || 0),\r\n      leftX = e.pos[0] + tooltipShift.x,\r\n\r\n\r\n\r\n\r\n      //( offsetElement.offsetLeft || 0 ),\r\n      topX = y.range()[0] + margin.top + tooltipShift.y,\r\n\r\n\r\n\r\n\r\n      //margin.top + ( offsetElement.offsetTop || 0),\r\n      leftY = x.range()[0] + margin.left + tooltipShift.x,\r\n\r\n\r\n\r\n\r\n      //( offsetElement.offsetLeft || 0 ),\r\n      topY = e.pos[1] + tooltipShift.y - margin.top,\r\n\r\n\r\n\r\n\r\n      //( offsetElement.offsetTop || 0),\r\n      xVal = xAxis.tickFormat()(scatter.x()(e.point, e.pointIndex)),\r\n          yVal = yAxis.tickFormat()(scatter.y()(e.point, e.pointIndex));\r\n\r\n      //if (tooltipX != null) nv.tooltip.show([leftX, topX], tooltipX(e.series.key, xVal, yVal, e, chart), \"n\", 1, offsetElement, \"x-nvtooltip\");\r\n      //if (tooltipY != null) nv.tooltip.show([leftY, topY], tooltipY(e.series.key, xVal, yVal, e, chart), \"e\", 1, offsetElement, \"y-nvtooltip\");\r\n      //if (tooltip != null) nv.tooltip.show([left, top], tooltip(e.series.key, xVal, yVal, e, chart), e.value < 0 ? \"n\" : \"s\", null, offsetElement);\r\n      if (tooltip != null) nv.tooltip.show([e.event.pageX, e.event.pageY], tooltip(e.series.key, xVal, yVal, e, chart), e.value < 0 ? \"n\" : \"s\", null, null, \"xy-tooltip with-3d-shadow with-transitions\");\r\n    };\r\n\r\n    var controlsData = [{ key: \"Magnify\", disabled: true }];\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        var container = d3.select(this),\r\n            that = this;\r\n\r\n        var availableWidth = (width || parseInt(container.style(\"width\")) || 960) - margin.left - margin.right,\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n\r\n        chart.update = function () {\r\n          container.transition().duration(transitionDuration).call(chart);\r\n        };\r\n        chart.container = this;\r\n\r\n        //set state.disabled\r\n        state.disabled = data.map(function (d) {\r\n          return !!d.disabled;\r\n        });\r\n\r\n        if (!defaultState) {\r\n          var key;\r\n          defaultState = {};\r\n          for (key in state) {\r\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\r\n          }\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        // Display noData message if there's nothing to show.\r\n\r\n        if (!data || !data.length || !data.filter(function (d) {\r\n          return d.values.length;\r\n        }).length) {\r\n          var noDataText = container.selectAll(\".nv-noData\").data([noData]);\r\n\r\n          noDataText.enter().append(\"text\").attr(\"class\", \"nvd3 nv-noData\").attr(\"dy\", \"-.7em\").style(\"text-anchor\", \"middle\");\r\n\r\n          noDataText.attr(\"x\", margin.left + availableWidth / 2).attr(\"y\", margin.top + availableHeight / 2).text(function (d) {\r\n            return d;\r\n          });\r\n\r\n          return chart;\r\n        } else {\r\n          container.selectAll(\".nv-noData\").remove();\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n         //------------------------------------------------------------\r\n\r\n          if(data[0].axisX.role == \"time\"){\r\n            data.forEach(function(serie){\r\n              serie.values.forEach(function(value){\r\n                value.x = new Date(value.x)\r\n              })\r\n            })\r\n            // console.log(\"Time format\", data)\r\n          }  \r\n\r\n        //------------------------------------------------------------\r\n        // Setup Scales\r\n        if(data[0].axisX.role == \"time\"){\r\n          x = d3.time.scale();\r\n          x.domain([data[0].values[0].x,data[0].values[data[0].values.length-1].x])\r\n          scatter.xScale = x;\r\n          x.range([0, availableWidth])  \r\n        }\r\n        // else{\r\n        //   x = scatter.xScale();\r\n        // }\r\n\r\n        // y = scatter.yScale();\r\n\r\n        //------------------------------------------------------------\r\n\r\n        //------------------------------------------------------------\r\n        // Setup Scales\r\n\r\n        x0 = x0 || x;\r\n        y0 = y0 || y;\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-scatterChart\").data([data]);\r\n        var wrapEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-scatterChart nv-chart-\" + scatter.id());\r\n        var gEnter = wrapEnter.append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        // background for pointer events\r\n        gEnter.append(\"rect\").attr(\"class\", \"nvd3 nv-background\");\r\n\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-x nv-axis\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-y nv-axis\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-scatterWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-distWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-legendWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-controlsWrap\");\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Legend\r\n        // \r\n\r\n         showLegend = showLegend && data.length > 1;\r\n\r\n\r\n        if (showLegend) {\r\n          var legendWidth = showControls ? availableWidth / 2 : availableWidth;\r\n          legend.width(legendWidth);\r\n\r\n          wrap.select(\".nv-legendWrap\").datum(data).call(legend);\r\n\r\n          if (margin.top != legend.height()) {\r\n            margin.top = legend.height();\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n          }\r\n\r\n          wrap.select(\".nv-legendWrap\").attr(\"transform\", \"translate(\" + (availableWidth - legendWidth) + \",\" + -margin.top + \")\");\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n        tooltipShift.x = this.offsetLeft;\r\n        tooltipShift.y = getOffset(this).top;\r\n        //------------------------------------------------------------\r\n        // Controls\r\n\r\n        if (showControls) {\r\n          controls.width(180).color([\"#444\"]);\r\n          g.select(\".nv-controlsWrap\").datum(controlsData).attr(\"transform\", \"translate(0,\" + -margin.top + \")\").call(controls);\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n        var mt = margin.top + 10;\r\n        wrap.attr(\"transform\", \"translate(\" + margin.left + \",\" + mt + \")\");\r\n\r\n        if (rightAlignYAxis) {\r\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        // Main Chart Component(s)\r\n\r\n        scatter.width(availableWidth).height(availableHeight).color(data.map(function (d, i) {\r\n          return d.color || color(d, i);\r\n        }).filter(function (d, i) {\r\n          return !data[i].disabled;\r\n        }));\r\n\r\n        if (xPadding !== 0) scatter.xDomain(null);\r\n\r\n        if (yPadding !== 0) scatter.yDomain(null);\r\n\r\n        wrap.select(\".nv-scatterWrap\").datum(data.filter(function (d) {\r\n          return !d.disabled;\r\n        })).attr(\"transform\", \"translate(0,10)\").call(scatter);\r\n\r\n        //Adjust for x and y padding\r\n        if (xPadding !== 0) {\r\n          var xRange = x.domain()[1] - x.domain()[0];\r\n          scatter.xDomain([x.domain()[0] - xPadding * xRange, x.domain()[1] + xPadding * xRange]);\r\n        }\r\n\r\n        if (yPadding !== 0) {\r\n          var yRange = y.domain()[1] - y.domain()[0];\r\n          scatter.yDomain([y.domain()[0] - yPadding * yRange, y.domain()[1] + yPadding * yRange]);\r\n        }\r\n\r\n        //Only need to update the scatter again if x/yPadding changed the domain.\r\n        if (yPadding !== 0 || xPadding !== 0) {\r\n          wrap.select(\".nv-scatterWrap\").datum(data.filter(function (d) {\r\n            return !d.disabled;\r\n          })).call(scatter);\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        if (showXAxis) {\r\n            if(data[0].axisX.role == \"time\"){\r\n              xAxis.tickFormat(customTimeFormat);\r\n            }\r\n            // else{\r\n              // xAxis.scale(x).ticks(xAxis.ticks() && xAxis.ticks().length ? xAxis.ticks() : availableWidth / 100).tickSize(-availableHeight, 0);\r\n            // }\r\n            // else{\r\n              xAxis.scale(x).ticks(availableWidth / 100).tickSize(-availableHeight, 0);\r\n            // }\r\n\r\n           \r\n            g.select(\".nv-x.nv-axis\").attr(\"transform\", \"translate(0,\" + (y.range()[0] + 10) + \")\");\r\n            g.select(\".nv-x.nv-axis\").transition().call(xAxis);\r\n          // }else{\r\n          //   g.select(\".nv-x.nv-axis\").attr(\"transform\", \"translate(0,\" + (y.range()[0] + 10) + \")\").call(xAxis);\r\n          // }\r\n        }  \r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup Axes\r\n\r\n        if (showYAxis) {\r\n          yAxis.scale(y).ticks(yAxis.ticks() && yAxis.ticks().length ? yAxis.ticks() : availableHeight / 36).tickSize(-availableWidth, 0);\r\n\r\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(0,\" + 10 + \")\").call(yAxis);\r\n        }\r\n\r\n\r\n        if (showDistX) {\r\n          distX.getData(scatter.x()).scale(x).width(availableWidth).color(data.map(function (d, i) {\r\n            return d.color || color(d, i);\r\n          }).filter(function (d, i) {\r\n            return !data[i].disabled;\r\n          }));\r\n          gEnter.select(\".nv-distWrap\").append(\"g\").attr(\"class\", \"nv-distributionX\");\r\n          g.select(\".nv-distributionX\").attr(\"transform\", \"translate(0,\" + y.range()[0] + \")\").datum(data.filter(function (d) {\r\n            return !d.disabled;\r\n          })).call(distX);\r\n        }\r\n\r\n        if (showDistY) {\r\n          distY.getData(scatter.y()).scale(y).width(availableHeight).color(data.map(function (d, i) {\r\n            return d.color || color(d, i);\r\n          }).filter(function (d, i) {\r\n            return !data[i].disabled;\r\n          }));\r\n          gEnter.select(\".nv-distWrap\").append(\"g\").attr(\"class\", \"nv-distributionY\");\r\n          g.select(\".nv-distributionY\").attr(\"transform\", \"translate(\" + (rightAlignYAxis ? availableWidth : -distY.size()) + \",0)\").datum(data.filter(function (d) {\r\n            return !d.disabled;\r\n          })).call(distY);\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        if (d3.fisheye) {\r\n          g.select(\".nv-background\").attr(\"width\", availableWidth).attr(\"height\", availableHeight);\r\n\r\n          g.select(\".nv-background\").on(\"mousemove\", updateFisheye);\r\n          g.select(\".nv-background\").on(\"click\", function () {\r\n            pauseFisheye = !pauseFisheye;\r\n          });\r\n          scatter.dispatch.on(\"elementClick.freezeFisheye\", function () {\r\n            pauseFisheye = !pauseFisheye;\r\n          });\r\n        }\r\n\r\n\r\n        function updateFisheye() {\r\n          if (pauseFisheye) {\r\n            g.select(\".nv-point-paths\").style(\"pointer-events\", \"all\");\r\n            return false;\r\n          }\r\n\r\n          g.select(\".nv-point-paths\").style(\"pointer-events\", \"none\");\r\n\r\n          var mouse = d3.mouse(this);\r\n          x.distortion(fisheye).focus(mouse[0]);\r\n          y.distortion(fisheye).focus(mouse[1]);\r\n\r\n          g.select(\".nv-scatterWrap\").call(scatter);\r\n\r\n          if (showXAxis) g.select(\".nv-x.nv-axis\").call(xAxis);\r\n\r\n          if (showYAxis) g.select(\".nv-y.nv-axis\").call(yAxis);\r\n\r\n          g.select(\".nv-distributionX\").datum(data.filter(function (d) {\r\n            return !d.disabled;\r\n          })).call(distX);\r\n          g.select(\".nv-distributionY\").datum(data.filter(function (d) {\r\n            return !d.disabled;\r\n          })).call(distY);\r\n        }\r\n\r\n\r\n        //============================================================\r\n        // Event Handling/Dispatching (in chart's scope)\r\n        //------------------------------------------------------------\r\n\r\n        controls.dispatch.on(\"legendClick\", function (d, i) {\r\n          d.disabled = !d.disabled;\r\n\r\n          fisheye = d.disabled ? 0 : 2.5;\r\n          g.select(\".nv-background\").style(\"pointer-events\", d.disabled ? \"none\" : \"all\");\r\n          g.select(\".nv-point-paths\").style(\"pointer-events\", d.disabled ? \"all\" : \"none\");\r\n\r\n          if (d.disabled) {\r\n            x.distortion(fisheye).focus(0);\r\n            y.distortion(fisheye).focus(0);\r\n\r\n            g.select(\".nv-scatterWrap\").call(scatter);\r\n            g.select(\".nv-x.nv-axis\").call(xAxis);\r\n            g.select(\".nv-y.nv-axis\").call(yAxis);\r\n          } else {\r\n            pauseFisheye = false;\r\n          }\r\n\r\n          chart.update();\r\n        });\r\n\r\n        legend.dispatch.on(\"stateChange\", function (newState) {\r\n          state.disabled = newState.disabled;\r\n          dispatch.stateChange(state);\r\n          chart.update();\r\n        });\r\n\r\n        scatter.dispatch.on(\"elementMouseover.tooltip\", function (e) {\r\n          d3.select(\".nv-chart-\" + scatter.id() + \" .nv-series-\" + e.seriesIndex + \" .nv-distx-\" + e.pointIndex).attr(\"y1\", function (d, i) {\r\n            return e.pos[1] - availableHeight;\r\n          });\r\n          d3.select(\".nv-chart-\" + scatter.id() + \" .nv-series-\" + e.seriesIndex + \" .nv-disty-\" + e.pointIndex).attr(\"x2\", e.pos[0] + distX.size());\r\n\r\n          e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top];\r\n          dispatch.tooltipShow(e);\r\n        });\r\n\r\n        dispatch.on(\"tooltipShow\", function (e) {\r\n          if (tooltips) showTooltip(e, that.parentNode);\r\n        });\r\n\r\n        // Update chart from a state object passed to event handler\r\n        dispatch.on(\"changeState\", function (e) {\r\n          if (typeof e.disabled !== \"undefined\") {\r\n            data.forEach(function (series, i) {\r\n              series.disabled = e.disabled[i];\r\n            });\r\n\r\n            state.disabled = e.disabled;\r\n          }\r\n\r\n          chart.update();\r\n        });\r\n\r\n        //============================================================\r\n\r\n\r\n        //store old scales for use in transitions on update\r\n        x0 = x.copy();\r\n        y0 = y.copy();\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Event Handling/Dispatching (out of chart's scope)\r\n    //------------------------------------------------------------\r\n\r\n    scatter.dispatch.on(\"elementMouseout.tooltip\", function (e) {\r\n      dispatch.tooltipHide(e);\r\n\r\n      d3.select(\".nv-chart-\" + scatter.id() + \" .nv-series-\" + e.seriesIndex + \" .nv-distx-\" + e.pointIndex).attr(\"y1\", 0);\r\n      d3.select(\".nv-chart-\" + scatter.id() + \" .nv-series-\" + e.seriesIndex + \" .nv-disty-\" + e.pointIndex).attr(\"x2\", distY.size());\r\n    });\r\n    dispatch.on(\"tooltipHide\", function () {\r\n      if (tooltips) nv.tooltip.cleanup();\r\n    });\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    // expose chart's sub-components\r\n    chart.dispatch = dispatch;\r\n    chart.scatter = scatter;\r\n    chart.legend = legend;\r\n    chart.controls = controls;\r\n    chart.xAxis = xAxis;\r\n    chart.yAxis = yAxis;\r\n    chart.distX = distX;\r\n    chart.distY = distY;\r\n\r\n    d3.rebind(chart, scatter, \"id\", \"interactive\", \"pointActive\", \"x\", \"y\", \"shape\", \"size\", \"xScale\", \"yScale\", \"zScale\", \"xDomain\", \"yDomain\", \"xRange\", \"yRange\", \"sizeDomain\", \"sizeRange\", \"forceX\", \"forceY\", \"forceSize\", \"clipVoronoi\", \"clipRadius\", \"useVoronoi\");\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showRadiusVector = function (_) {\r\n      showRadiusVector = _;\r\n      scatter.showRadiusVector(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      legend.color(color);\r\n      distX.color(color);\r\n      distY.color(color);\r\n      return chart;\r\n    };\r\n\r\n    chart.showDistX = function (_) {\r\n      if (!arguments.length) return showDistX;\r\n      showDistX = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showDistY = function (_) {\r\n      if (!arguments.length) return showDistY;\r\n      showDistY = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showControls = function (_) {\r\n      if (!arguments.length) return showControls;\r\n      showControls = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showLegend = function (_) {\r\n      if (!arguments.length) return showLegend;\r\n      showLegend = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showXAxis = function (_) {\r\n      if (!arguments.length) return showXAxis;\r\n      showXAxis = _;\r\n      return chart;\r\n    };\r\n\r\n\r\n    chart.showYAxis = function (_) {\r\n      if (!arguments.length) return showYAxis;\r\n      showYAxis = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.rightAlignYAxis = function (_) {\r\n      if (!arguments.length) return rightAlignYAxis;\r\n      rightAlignYAxis = _;\r\n      yAxis.orient(_ ? \"right\" : \"left\");\r\n      return chart;\r\n    };\r\n\r\n\r\n    chart.fisheye = function (_) {\r\n      if (!arguments.length) return fisheye;\r\n      fisheye = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.xPadding = function (_) {\r\n      if (!arguments.length) return xPadding;\r\n      xPadding = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.yPadding = function (_) {\r\n      if (!arguments.length) return yPadding;\r\n      yPadding = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltips = function (_) {\r\n      if (!arguments.length) return tooltips;\r\n      tooltips = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltipContent = function (_) {\r\n      if (!arguments.length) return tooltip;\r\n      tooltip = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltipXContent = function (_) {\r\n      if (!arguments.length) return tooltipX;\r\n      tooltipX = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltipYContent = function (_) {\r\n      if (!arguments.length) return tooltipY;\r\n      tooltipY = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.state = function (_) {\r\n      if (!arguments.length) return state;\r\n      state = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultState = function (_) {\r\n      if (!arguments.length) return defaultState;\r\n      defaultState = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.noData = function (_) {\r\n      if (!arguments.length) return noData;\r\n      noData = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.transitionDuration = function (_) {\r\n      if (!arguments.length) return transitionDuration;\r\n      transitionDuration = _;\r\n      return chart;\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    return chart;\r\n  };\r\n\r\n\r\n  nv.models.radar = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var scatter = nv.models.scatter();\r\n    //console.log(\"Before\",scatter)\r\n    scatter.x(function (d, i) {\r\n      return calculateX(d.value, i);\r\n    }).y(function (d, i) {\r\n      return calculateY(d.value, i);\r\n    });\r\n    //console.log(\"After\",scatter)\r\n\r\n\r\n    var margin = { top: 0, right: 0, bottom: 0, left: 0 },\r\n        width = 960,\r\n        height = 500,\r\n        color = nv.utils.defaultColor() // a function that returns a color\r\n    ,\r\n        getX = function (d, i) {\r\n      return calculateX(d.value, i);\r\n    } // accessor to get the x value from a data point\r\n    ,\r\n        getY = function (d, i) {\r\n      return calculateY(d.value, i);\r\n    } // accessor to get the y value from a data point\r\n    ,\r\n        getLabel = undefined //function(d) { return d.y }\r\n    ,\r\n        defined = function (d, i) {\r\n      return !isNaN(getY(d, i)) && getY(d, i) !== null;\r\n    } // allows a line to be not continuous when it is not defined\r\n    ,\r\n        isArea = function (d) {\r\n      return d.area;\r\n    } // decides if a line is an area or just a line\r\n    ,\r\n        clipEdge = false // if true, masks lines within x and y scale\r\n    ,\r\n        x //can be accessed via chart.xScale()\r\n    ,\r\n        y //can be accessed via chart.yScale()\r\n    ,\r\n        interpolate = \"linear\" // controls the line interpolation\r\n    ,\r\n        serieLength,\r\n        serieCount,\r\n        max,\r\n        tickCount = 10,\r\n        scales = d3.scale.linear(),\r\n        showGrid = true,\r\n        showTickLabels = true,\r\n        showAxisLabels = true;\r\n\r\n    scatter.size(16) // default size\r\n    .sizeDomain([16, 256]);\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Private Variables\r\n    //------------------------------------------------------------\r\n\r\n    var x0, y0 //used to store previous scales\r\n    ;\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      //console.log(\"Selection\",selection)\r\n\r\n      selection.each(function (data) {\r\n        // console.log(\"RADAR\",data)\r\n        serieCount = data.length;\r\n        serieLength = data[0].values.length;\r\n        max = data[0].values[0].value;\r\n        for (var i in data) {\r\n          var m = data[i].values[0].value;\r\n          m = data[i].values.reduce(function (v, item) {\r\n            m = Math.max(m, item.value);\r\n            return m;\r\n          });\r\n          max = Math.max(max, m);\r\n        }\r\n        max += max * 0.1;\r\n\r\n\r\n        var availableWidth = width - margin.left - margin.right,\r\n            availableHeight = height - margin.top - margin.bottom,\r\n\r\n\r\n\r\n\r\n\r\n        //radius = Math.min(availableWidth,availableHeight),\r\n        container = d3.select(this);\r\n        //console.log(\"RADAR\",availableWidth,availableHeight,radius)\r\n        //------------------------------------------------------------\r\n        // Setup Scales\r\n\r\n        scales.domain([-1, 1]);\r\n\r\n        //console.log(\"SCALES\",radius,scales(-1),scales(1));\r\n\r\n        scatter.xDomain([-1, 1]).yDomain([-1, 1]).xScale(scales).yScale(scales);\r\n\r\n        y = scatter.yScale();\r\n        x = scatter.xScale();\r\n\r\n        x0 = x0 || x;\r\n        y0 = y0 || y;\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-line\").data([data]);\r\n        var wrapEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-line\");\r\n        var defsEnter = wrapEnter.append(\"defs\");\r\n        var gEnter = wrapEnter.append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-groups\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-scatterWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-grid\");\r\n        var mt = margin.top + 20;\r\n        var ml = margin.left;\r\n        wrap.attr(\"transform\", \"translate(\" + ml + \",\" + mt + \")\");\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        scatter.width(availableWidth).height(availableHeight);\r\n        //    //.xScale(scatter.yScale())\r\n        //    .useVoronoi(false)\r\n\r\n        //scatter\r\n        //    .width(radius)\r\n        //    .height(radius)\r\n        //    //.xScale(scales)\r\n        //    //.yScale(scales)\r\n        //    //.useVoronoi(false)\r\n\r\n        var scatterWrap = wrap.select(\".nv-scatterWrap\");\r\n        //.datum(data); // Data automatically trickles down from the wrap\r\n\r\n        scatterWrap.transition().call(scatter);\r\n\r\n\r\n        defsEnter.append(\"clipPath\").attr(\"id\", \"nv-edge-clip-\" + scatter.id()).append(\"rect\");\r\n\r\n        wrap.select(\"#nv-edge-clip-\" + scatter.id() + \" rect\").attr(\"width\", availableWidth).attr(\"height\", availableHeight > 0 ? availableHeight : 0);\r\n\r\n        g.attr(\"clip-path\", clipEdge ? \"url(#nv-edge-clip-\" + scatter.id() + \")\" : \"\");\r\n        scatterWrap.attr(\"clip-path\", clipEdge ? \"url(#nv-edge-clip-\" + scatter.id() + \")\" : \"\");\r\n\r\n        var grid = wrap.select(\".nv-grid\");\r\n        grid.attr(\"clip-path\", clipEdge ? \"url(#nv-edge-clip-\" + scatter.id() + \")\" : \"\");\r\n\r\n\r\n        var groups = wrap.select(\".nv-groups\").selectAll(\".nv-group\").data(data)\r\n        // .data(function (d) {\r\n        //   return d;\r\n        // }, function (d) {\r\n        //   return d.key;\r\n        // });\r\n        groups.enter().append(\"g\").style(\"stroke-opacity\", 0.000001).style(\"fill-opacity\", 0.000001);\r\n\r\n        groups.exit().remove();\r\n\r\n        groups.attr(\"class\", function (d, i) {\r\n          return \"nv-group nv-series-\" + i;\r\n        }).classed(\"hover\", function (d) {\r\n          return d.hover;\r\n        }).style(\"fill\", function (d, i) {\r\n          return color(d, i);\r\n        }).style(\"stroke\", function (d, i) {\r\n          return color(d, i);\r\n        });\r\n        groups.transition().style(\"stroke-opacity\", 1).style(\"fill-opacity\", 0.3);\r\n\r\n\r\n        var areaPaths = groups.selectAll(\"path.nv-area\").data(function (d) {\r\n          return isArea(d) ? [d] : [];\r\n        }); // this is done differently than lines because I need to check if series is an area\r\n        areaPaths.enter().append(\"path\").attr(\"class\", \"nv-area\").attr(\"d\", function (d) {\r\n          return d3.svg.area().interpolate(\"linear-closed\").defined(defined).x(function (d, i) {\r\n            return nv.utils.NaNtoZero(x0(getX(d, i)));\r\n          }).y0(function (d, i) {\r\n            return nv.utils.NaNtoZero(y0(getY(d, i)));\r\n          })\r\n          //.y1(function(d,i) { return y0( y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0] ) })\r\n          .y1(function (d, i) {\r\n            return y0(0);\r\n          }) //assuming 0 is within y domain.. may need to tweak this\r\n          .apply(this, [d.values]);\r\n        });\r\n\r\n        groups.exit().selectAll(\"path.nv-area\").remove();\r\n\r\n        areaPaths.transition().attr(\"d\", function (d) {\r\n          return d3.svg.area().interpolate(\"linear-closed\").defined(defined).x(function (d, i) {\r\n            return nv.utils.NaNtoZero(x(getX(d, i)));\r\n          }).y0(function (d, i) {\r\n            return nv.utils.NaNtoZero(y(getY(d, i)));\r\n          })\r\n          //.y1(function(d,i) { return y( y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0] ) })\r\n          .y1(function (d, i) {\r\n            return y0(0);\r\n          }) //assuming 0 is within y domain.. may need to tweak this\r\n          .apply(this, [d.values]);\r\n        });\r\n\r\n\r\n        var linePaths = groups.selectAll(\"path.nv-line\").data(function (d) {\r\n          return [d.values];\r\n        });\r\n        linePaths.enter().append(\"path\").attr(\"class\", \"nv-line\").attr(\"d\", d3.svg.line().interpolate(\"linear-closed\").defined(defined).x(function (d, i) {\r\n          return nv.utils.NaNtoZero(x0(getX(d, i)));\r\n        }).y(function (d, i) {\r\n          return nv.utils.NaNtoZero(y0(getY(d, i)));\r\n        }));\r\n\r\n        linePaths.transition().style(\"stroke-width\", \"2px\").attr(\"d\", d3.svg.line().interpolate(\"linear-closed\").defined(defined).x(function (d, i) {\r\n          return nv.utils.NaNtoZero(x(getX(d, i)));\r\n        }).y(function (d, i) {\r\n          return nv.utils.NaNtoZero(y(getY(d, i)));\r\n        }));\r\n\r\n        // create grid levels\r\n        if (showGrid) {\r\n          var gridLevels = wrap.select(\".nv-grid\").selectAll(\"path.nv-grid-level\").data(getGridData());\r\n\r\n          gridLevels.exit().remove();\r\n\r\n          gridLevels.enter().append(\"path\").attr(\"class\", \"nv-grid-level\").attr(\"d\", d3.svg.line().interpolate(\"linear-closed\").defined(defined).x(function (d, i) {\r\n            return nv.utils.NaNtoZero(x0(getX(d, i)));\r\n          }).y(function (d, i) {\r\n            return nv.utils.NaNtoZero(y0(getY(d, i)));\r\n          }));\r\n\r\n\r\n          gridLevels.style(\"stroke\", \"#000000\").style(\"fill\", \"none\").style(\"opacity\", 0.3).style(\"stroke-width\", \"0.6px\");\r\n\r\n          gridLevels.transition().attr(\"d\", d3.svg.line().interpolate(\"linear-closed\").defined(defined).x(function (d, i) {\r\n            return nv.utils.NaNtoZero(x(getX(d, i)));\r\n          }).y(function (d, i) {\r\n            return nv.utils.NaNtoZero(y(getY(d, i)));\r\n          }));\r\n\r\n          // create grid axises\r\n          gridLevels = wrap.select(\".nv-grid\").selectAll(\"line.nv-grid-axis\").data(getGridAxis(data));\r\n          gridLevels.exit().remove();\r\n          gridLevels.enter().append(\"svg:line\").attr(\"class\", \"nv-grid-axis\").attr(\"x1\", function (d, i) {\r\n            return nv.utils.NaNtoZero(x0(getX({ value: max * 0.00001 }, i)));\r\n          }).attr(\"y1\", function (d, i) {\r\n            return nv.utils.NaNtoZero(y0(getY({ value: max * 0.00001 }, i)));\r\n          }).attr(\"x2\", function (d, i) {\r\n            return nv.utils.NaNtoZero(x0(getX(d, i)));\r\n          }).attr(\"y2\", function (d, i) {\r\n            return nv.utils.NaNtoZero(y0(getY(d, i)));\r\n          });\r\n\r\n          gridLevels.style(\"stroke\", \"#000\").style(\"fill\", \"none\").style(\"opacity\", 0.3).style(\"stroke-width\", \"1px\");\r\n\r\n\r\n          gridLevels.transition().attr(\"class\", \"nv-grid-axis\").attr(\"x1\", function (d, i) {\r\n            return nv.utils.NaNtoZero(x(getX({ value: max * 0.00001 }, i)));\r\n          }).attr(\"y1\", function (d, i) {\r\n            return nv.utils.NaNtoZero(y(getY({ value: max * 0.00001 }, i)));\r\n          }).attr(\"x2\", function (d, i) {\r\n            return nv.utils.NaNtoZero(x(getX(d, i)));\r\n          }).attr(\"y2\", function (d, i) {\r\n            return nv.utils.NaNtoZero(y(getY(d, i)));\r\n          });\r\n        }\r\n        //create  grid labels\r\n        if (showAxisLabels) {\r\n          var gridLevels = wrap.select(\".nv-grid\").selectAll(\"text.nv-grid-label\").data(getGridAxis(data));\r\n          gridLevels.exit().remove();\r\n          gridLevels.enter().append(\"text\").attr(\"class\", \"nv-grid-label\").style(\"fill\", function (d, i) {\r\n            return \"#000000\";\r\n          }).style(\"font\", \"bold x-small Arial\").style(\"text-anchor\", function (d, i) {\r\n            return getTextAnchor(d, i);\r\n          }).attr(\"x\", function (d, i) {\r\n            return nv.utils.NaNtoZero(x0(getX(d, i)));\r\n          }).attr(\"y\", function (d, i) {\r\n            return nv.utils.NaNtoZero(y0(getY(d, i)));\r\n          }).attr(\"dy\", function (d, i) {\r\n            return getDy(d, i);\r\n          }).classed(\"nv-label\", true).text(function (d, i) {\r\n            return d.label;\r\n          });\r\n\r\n          gridLevels.style(\"stroke\", \"none\").style(\"opacity\", 0.9);\r\n\r\n          gridLevels.transition().attr(\"class\", \"nv-grid-label\").style(\"fill\", function (d, i) {\r\n            return \"#000000\";\r\n          }).style(\"font\", \"bold x-small Arial\").style(\"text-anchor\", function (d, i) {\r\n            return getTextAnchor(d, i);\r\n          }).attr(\"x\", function (d, i) {\r\n            return nv.utils.NaNtoZero(x(getX(d, i)));\r\n          }).attr(\"y\", function (d, i) {\r\n            return nv.utils.NaNtoZero(y(getY(d, i)));\r\n          }).attr(\"dy\", function (d, i) {\r\n            return getDy(d, i);\r\n          })\r\n          //.classed('nv-label',true)\r\n          .text(function (d, i) {\r\n            return d.label;\r\n          });\r\n        }\r\n\r\n        // create tick labels\r\n        if (showTickLabels) {\r\n          var gridLevels = wrap.select(\".nv-grid\").selectAll(\"text.nv-grid-tick-label\").data(getTickLabels());\r\n          gridLevels.exit().remove();\r\n          gridLevels.enter().append(\"text\").attr(\"class\", \"nv-grid-tick-label\").style(\"fill\", function (d, i) {\r\n            return \"#000000\";\r\n          }).style(\"font\", \"bold x-small Arial\").style(\"text-anchor\", \"start\").attr(\"x\", function (d, i) {\r\n            return nv.utils.NaNtoZero(x0(getX({ value: 0 }, 0)));\r\n          }).attr(\"y\", function (d, i) {\r\n            return nv.utils.NaNtoZero(y0(getY(d, 0)));\r\n          }).attr(\"dy\", \"-0.2em\").classed(\"nv-label\", true).text(function (d, i) {\r\n            return d.value.toFixed(2);\r\n          });\r\n\r\n          gridLevels.style(\"stroke\", \"none\").style(\"opacity\", 0.7);\r\n\r\n          gridLevels.transition().attr(\"class\", \"nv-grid-tick-label\").style(\"fill\", function (d, i) {\r\n            return \"#000000\";\r\n          }).style(\"text-anchor\", \"start\").style(\"font\", \"bold x-small Arial\").attr(\"x\", function (d, i) {\r\n            return nv.utils.NaNtoZero(x(getX({ value: 0 }, 0)));\r\n          }).attr(\"y\", function (d, i) {\r\n            return nv.utils.NaNtoZero(y(getY(d, 0)));\r\n          }).attr(\"dy\", \"-0.2em\").text(function (d, i) {\r\n            return d.value.toFixed(2);\r\n          });\r\n        }\r\n\r\n\r\n        //store old scales for use in transitions on update\r\n        x0 = x.copy();\r\n        y0 = y.copy();\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n    function getTextAnchor(d, i) {\r\n      var x = Math.sin(angle(i));\r\n      if (Math.abs(x) < 0.1) return \"middle\";\r\n      if (x > 0.1) return \"end\";\r\n      return \"start\";\r\n    }\r\n\r\n    function getDy(d, i) {\r\n      if (i == 0) return \"-1.5em\";\r\n      var y = Math.cos(angle(i));\r\n      if (Math.abs(y) < 0.1) return \".72em\";\r\n      if (y > 0.1) return \"-.3em\";\r\n      return \"1em\";\r\n    }\r\n\r\n    function angle(i) {\r\n      return -i * (2 * Math.PI / serieLength); // + ((2 * Math.PI) * startAngle / 360) + (cursor * 2 * Math.PI) / length;\r\n    }\r\n\r\n\r\n    // x-caclulator\r\n    // d is the datapoint, i is the index, length is the length of the data\r\n    function calculateX(d, i) {\r\n      var l = d / max; // x(d);\r\n      //console.log(\"X\",d,l,length,i,angle(i, length),2*Math.PI/angle(i, length),Math.sin(angle(i, length)) * l);\r\n      return Math.sin(angle(i)) * l;\r\n    }\r\n\r\n    // y-calculator\r\n    function calculateY(d, i) {\r\n      var l = d / max; // y(d);\r\n      //console.log(\"Y\",d,l,length,i,angle(i, length),2*Math.PI/angle(i, length),Math.cos(angle(i, length)) * l);\r\n      return Math.cos(angle(i)) * l;\r\n    }\r\n\r\n    function getGridData() {\r\n      var gridData = [];\r\n      for (var i = 0; i < tickCount; i++) {\r\n        var levelKey = max * (i + 1) / tickCount;\r\n        var level = [];\r\n        level.key = (levelKey * 100).toFixed(0) + \"%\";\r\n        //level.values = [];\r\n        for (var j = 0; j < serieLength; j++) {\r\n          level.push({ value: levelKey });\r\n        }\r\n        gridData.push(level);\r\n      }\r\n      //console.log(gridData)\r\n      return gridData;\r\n    }\r\n\r\n    function getGridAxis(data) {\r\n      var gridAxis = [];\r\n      for (var j = 0; j < serieLength; j++) {\r\n        //var axis = [];\r\n        //axis.push({label:\"\",value:0});\r\n        //axis.push({label:data[0].values[j].label,value:max});\r\n        gridAxis.push({ label: data[0].values[j].label, value: max });\r\n      }\r\n\r\n      //console.log(gridData)\r\n      return gridAxis;\r\n    }\r\n\r\n    function getTickLabels() {\r\n      var tickLabels = [];\r\n      for (var i = 0; i < tickCount; i++) {\r\n        tickLabels.push({ value: max * (i + 1) / tickCount });\r\n      }\r\n      //console.log(gridData)\r\n      return tickLabels;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    chart.dispatch = scatter.dispatch;\r\n    chart.scatter = scatter;\r\n\r\n    d3.rebind(chart, scatter, \"id\", \"interactive\", \"size\", \"xScale\", \"yScale\", \"zScale\", \"xDomain\", \"yDomain\", \"xRange\", \"yRange\", \"sizeDomain\", \"forceX\", \"forceY\", \"forceSize\", \"clipVoronoi\", \"useVoronoi\", \"clipRadius\", \"padData\", \"highlightPoint\", \"clearHighlights\");\r\n\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.x = function (_) {\r\n      if (!arguments.length) return getX;\r\n      getX = _;\r\n      scatter.x(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.y = function (_) {\r\n      if (!arguments.length) return getY;\r\n      getY = _;\r\n      scatter.y(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.grid = function (_) {\r\n      if (!arguments.length) return showGrid;\r\n      showGrid = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.axisLabel = function (_) {\r\n      if (!arguments.length) return showAxisLabels;\r\n      showAxisLabels = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tickLabel = function (_) {\r\n      if (!arguments.length) return showTickLabels;\r\n      showTickLabels = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.ticks = function (_) {\r\n      if (!arguments.length) return tickCount;\r\n      tickCount = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.label = function (_) {\r\n      //console.log(\"chart label\",_)\r\n      if (!arguments.length) return getLabel;\r\n      getLabel = _;\r\n      scatter.label(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.clipEdge = function (_) {\r\n      if (!arguments.length) return clipEdge;\r\n      clipEdge = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      scatter.color(color);\r\n      return chart;\r\n    };\r\n\r\n    chart.interpolate = function (_) {\r\n      if (!arguments.length) return interpolate;\r\n      interpolate = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defined = function (_) {\r\n      if (!arguments.length) return defined;\r\n      defined = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.isArea = function (_) {\r\n      if (!arguments.length) return isArea;\r\n      isArea = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    return chart;\r\n  };\r\n\r\n\r\n  nv.models.radarChart = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var lines = nv.models.radar(),\r\n        xAxis = nv.models.axis(),\r\n        yAxis = nv.models.axis(),\r\n        legend = nv.models.legend(),\r\n        interactiveLayer = nv.interactiveGuideline();\r\n\r\n    var margin = { top: 30, right: 20, bottom: 50, left: 60 },\r\n        color = nv.utils.defaultColor(),\r\n        width = null,\r\n        height = null,\r\n        showLegend = true,\r\n        showXAxis = false,\r\n        showYAxis = false,\r\n        rightAlignYAxis = false,\r\n        useInteractiveGuideline = false,\r\n        tooltips = true,\r\n        tooltip = function (key, x, y, e, graph) {\r\n      return \"<h3>\" + key + \"</h3>\" + \"<p>\" + y + \" at \" + x + \"</p>\";\r\n    },\r\n        x,\r\n        y,\r\n        state = {},\r\n        defaultState = null,\r\n        noData = \"No Data Available.\",\r\n        dispatch = d3.dispatch(\"tooltipShow\", \"tooltipHide\", \"stateChange\", \"changeState\"),\r\n        transitionDuration = 250,\r\n        tickCount = 5,\r\n        tooltipShift = { x: 0, y: 0 };\r\n\r\n    xAxis.orient(\"bottom\").tickPadding(7);\r\n    yAxis.orient(rightAlignYAxis ? \"right\" : \"left\");\r\n\r\n    //============================================================\r\n    function getOffset(elem) {\r\n      if (elem.getBoundingClientRect) {\r\n        // \"правильный\" вариант\r\n        return getOffsetRect(elem);\r\n      } else {\r\n        // пусть работает хоть как-то\r\n        return getOffsetSum(elem);\r\n      }\r\n    }\r\n\r\n    function getOffsetSum(elem) {\r\n      var top = 0,\r\n          left = 0;\r\n      while (elem) {\r\n        top = top + parseInt(elem.offsetTop);\r\n        left = left + parseInt(elem.offsetLeft);\r\n        elem = elem.offsetParent;\r\n      }\r\n\r\n      return { top: top, left: left };\r\n    }\r\n\r\n    function getOffsetRect(elem) {\r\n      // (1)\r\n      var box = elem.getBoundingClientRect();\r\n\r\n      // (2)\r\n      var body = document.body;\r\n      var docElem = document.documentElement;\r\n\r\n      // (3)\r\n      var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n      var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\r\n      // (4)\r\n      var clientTop = docElem.clientTop || body.clientTop || 0;\r\n      var clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\r\n      // (5)\r\n      var top = box.top + scrollTop - clientTop;\r\n      var left = box.left + scrollLeft - clientLeft;\r\n\r\n      return { top: Math.round(top), left: Math.round(left) };\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Private Variables\r\n    //------------------------------------------------------------\r\n\r\n    var showTooltip = function (e, offsetElement) {\r\n      // console.log(e);\r\n      var left = e.event.pageX,\r\n\r\n      //pos[0],\r\n      top = e.event.pageY,\r\n\r\n      //pos[1],\r\n      x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\r\n          y = yAxis.tickFormat()(lines.y()(e.point, e.pointIndex)),\r\n          content = tooltip(e.series.key, x, y, e, chart);\r\n      // console.log(left, top, tooltipShift);\r\n      nv.tooltip.show([left /* + tooltipShift.x*/, top /*+ tooltipShift.y*/], content, null, null, offsetElement, \"xy-tooltip with-3d-shadow with-transitions\");\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n\r\n        convertDateTime(data);\r\n\r\n        var container = d3.select(this),\r\n            that = this;\r\n            // console.log(container)\r\n\r\n        var availableWidth = (width || parseInt(container.style(\"width\")) || 960) - margin.left - margin.right,\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n\r\n\r\n        chart.update = function () {\r\n          container.transition().duration(transitionDuration).call(chart);\r\n        };\r\n        chart.container = this;\r\n\r\n        //set state.disabled\r\n        state.disabled = data.map(function (d) {\r\n          return !!d.disabled;\r\n        });\r\n\r\n\r\n        if (!defaultState) {\r\n          var key;\r\n          defaultState = {};\r\n          for (key in state) {\r\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\r\n          }\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        // Display noData message if there's nothing to show.\r\n\r\n        if (!data || !data.length || !data.filter(function (d) {\r\n          return d.values.length;\r\n        }).length) {\r\n          var noDataText = container.selectAll(\".nv-noData\").data([noData]);\r\n\r\n          noDataText.enter().append(\"text\").attr(\"class\", \"nvd3 nv-noData\").attr(\"dy\", \"-.7em\").style(\"text-anchor\", \"middle\");\r\n\r\n          noDataText.attr(\"x\", margin.left + availableWidth / 2).attr(\"y\", margin.top + availableHeight / 2).text(function (d) {\r\n            return d;\r\n          });\r\n\r\n          return chart;\r\n        } else {\r\n          container.selectAll(\".nv-noData\").remove();\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup Scales\r\n\r\n        x = lines.xScale();\r\n        y = lines.yScale();\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n        // console.log(this)\r\n        // console.log(container.selectAll(\"g.nv-wrap.nv-lineChart\"))\r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-lineChart\").data([data]);\r\n        var gEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-lineChart\").append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        gEnter.append(\"rect\").style(\"opacity\", 0);\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-x nv-axis\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-y nv-axis\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-linesWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-legendWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-interactive\");\r\n\r\n\r\n        g.select(\"rect\").attr(\"width\", availableWidth).attr(\"height\", availableHeight > 0 ? availableHeight : 0);\r\n        //------------------------------------------------------------\r\n        // Legend\r\n\r\n         showLegend = showLegend && data.length > 1;\r\n\r\n\r\n        if (showLegend) {\r\n          legend.width(availableWidth);\r\n\r\n          var temp = g.select(\".nv-legendWrap\").datum(data)\r\n          // console.log(\"RADAR gEnter.select(\\\".nv-legendWrap\\\").datum(data)\",temp)\r\n          temp.call(legend);\r\n\r\n          if (margin.top != legend.height()) {\r\n            margin.top = legend.height() + 5;\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n          }\r\n\r\n          wrap.select(\".nv-legendWrap\").attr(\"transform\", \"translate(0,\" + -margin.top + \")\");\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n        var ml = margin.left;\r\n        wrap.attr(\"transform\", \"translate(\" + ml + \",\" + margin.top + \")\");\r\n\r\n        if (rightAlignYAxis) {\r\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        // Main Chart Component(s)\r\n\r\n\r\n        //------------------------------------------------------------\r\n        //Set up interactive layer\r\n        if (useInteractiveGuideline) {\r\n          interactiveLayer.width(availableWidth).height(availableHeight).margin({ left: margin.left, top: margin.top }).svgContainer(container).xScale(x);\r\n          wrap.select(\".nv-interactive\").call(interactiveLayer);\r\n        }\r\n\r\n\r\n        var radius = Math.min(availableWidth, availableHeight);\r\n        tooltipShift.x = this.offsetLeft + availableWidth / 2 - radius / 2;\r\n        tooltipShift.y = getOffset(this).top + margin.top + 10;\r\n\r\n\r\n        lines.width(radius).height(radius).color(data.map(function (d, i) {\r\n          return d.color || color(d, i);\r\n        }).filter(function (d, i) {\r\n          return !data[i].disabled;\r\n        }));\r\n\r\n\r\n        var linesWrap = g.select(\".nv-linesWrap\").datum(data.filter(function (d,i) {\r\n          // console.log( \"linesWrap\",i,d)\r\n          return !d.disabled;\r\n        }));\r\n\r\n\r\n        linesWrap.transition().call(lines);\r\n\r\n\r\n        var lws = availableWidth / 2 - radius / 2;\r\n        linesWrap.attr(\"transform\", \"translate(\" + lws + \",0)\");\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup Axes\r\n\r\n        if (showXAxis) {\r\n          xAxis.scale(x).ticks(availableWidth / 100).tickSize(-availableHeight, 0);\r\n\r\n          g.select(\".nv-x.nv-axis\").attr(\"transform\", \"translate(0,\" + y.range()[0] + \")\");\r\n          g.select(\".nv-x.nv-axis\").transition().call(xAxis);\r\n        }\r\n\r\n        if (showYAxis) {\r\n          yAxis.scale(y).ticks(availableHeight / 36).tickSize(-availableWidth, 0);\r\n\r\n          g.select(\".nv-y.nv-axis\").transition().call(yAxis);\r\n        }\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //============================================================\r\n        // Event Handling/Dispatching (in chart's scope)\r\n        //------------------------------------------------------------\r\n\r\n        legend.dispatch.on(\"stateChange\", function (newState) {\r\n          // console.log(\"state change legent event\", newState)\r\n          state = newState;\r\n          // dispatch.changeState(state);\r\n          data.forEach(function (series, i) {\r\n              series.disabled = state.disabled[i];\r\n            });\r\n\r\n          chart.update();\r\n        });\r\n\r\n        interactiveLayer.dispatch.on(\"elementMousemove\", function (e) {\r\n          lines.clearHighlights();\r\n          var singlePoint,\r\n              pointIndex,\r\n              pointXLocation,\r\n              allData = [];\r\n          data.filter(function (series, i) {\r\n            series.seriesIndex = i;\r\n            return !series.disabled;\r\n          }).forEach(function (series, i) {\r\n            pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\r\n            lines.highlightPoint(i, pointIndex, true);\r\n            var point = series.values[pointIndex];\r\n            if (typeof point === \"undefined\") return;\r\n            if (typeof singlePoint === \"undefined\") singlePoint = point;\r\n            if (typeof pointXLocation === \"undefined\") pointXLocation = chart.xScale()(chart.x()(point, pointIndex));\r\n            allData.push({\r\n              key: series.key,\r\n              value: chart.y()(point, pointIndex),\r\n              color: color(series, series.seriesIndex)\r\n            });\r\n          });\r\n          //Highlight the tooltip entry based on which point the mouse is closest to.\r\n          if (allData.length > 2) {\r\n            var yValue = chart.yScale().invert(e.mouseY);\r\n            var domainExtent = Math.abs(chart.yScale().domain()[0] - chart.yScale().domain()[1]);\r\n            var threshold = 0.03 * domainExtent;\r\n            var indexToHighlight = nv.nearestValueIndex(allData.map(function (d) {\r\n              return d.value;\r\n            }), yValue, threshold);\r\n            if (indexToHighlight !== null) allData[indexToHighlight].highlight = true;\r\n          }\r\n\r\n          var xValue = xAxis.tickFormat()(chart.x()(singlePoint, pointIndex));\r\n          interactiveLayer.tooltip.position({ left: pointXLocation + margin.left, top: e.mouseY + margin.top }).chartContainer(that.parentNode).enabled(tooltips).valueFormatter(function (d, i) {\r\n            return new Number(yAxis.tickFormat()(d)).toFixed(2);\r\n          }).data({\r\n            value: xValue,\r\n            series: allData\r\n          })();\r\n\r\n          interactiveLayer.renderGuideLine(pointXLocation);\r\n        });\r\n\r\n        interactiveLayer.dispatch.on(\"elementMouseout\", function (e) {\r\n          dispatch.tooltipHide();\r\n          lines.clearHighlights();\r\n        });\r\n\r\n        dispatch.on(\"tooltipShow\", function (e) {\r\n          if (tooltips) {\r\n            showTooltip(e);\r\n          }\r\n        });\r\n\r\n\r\n        dispatch.on(\"stateChange\", function (e) {\r\n          // console.log(\"stateChange\",e)\r\n          if (typeof e.disabled !== \"undefined\" && data.length === e.disabled.length) {\r\n            data.forEach(function (series, i) {\r\n              series.disabled = e.disabled[i];\r\n            });\r\n\r\n            state.disabled = e.disabled;\r\n          }\r\n\r\n          chart.update();\r\n        });\r\n\r\n        //============================================================\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Event Handling/Dispatching (out of chart's scope)\r\n    //------------------------------------------------------------\r\n\r\n    lines.dispatch.on(\"elementMouseover.tooltip\", function (e) {\r\n      dispatch.tooltipShow(e);\r\n    });\r\n\r\n    lines.dispatch.on(\"elementMouseout.tooltip\", function (e) {\r\n      dispatch.tooltipHide(e);\r\n    });\r\n\r\n    dispatch.on(\"tooltipHide\", function () {\r\n      if (tooltips) nv.tooltip.cleanup();\r\n    });\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    // expose chart's sub-components\r\n    chart.dispatch = dispatch;\r\n    chart.lines = lines;\r\n    chart.legend = legend;\r\n    chart.xAxis = xAxis;\r\n    chart.yAxis = yAxis;\r\n    chart.interactiveLayer = interactiveLayer;\r\n\r\n    d3.rebind(\r\n      chart, \r\n      lines, \r\n      \"defined\", \r\n      \"isArea\", \r\n      \"x\", \r\n      \"y\", \r\n      \"size\", \r\n      \"xScale\", \r\n      \"yScale\", \r\n      \"xDomain\", \r\n      \"yDomain\", \r\n      \"xRange\", \r\n      \"yRange\", \r\n      \"forceX\", \r\n      \"forceY\", \r\n      \"interactive\", \r\n      \"clipEdge\", \r\n      \"clipVoronoi\", \r\n      \"useVoronoi\", \r\n      \"id\", \r\n      \"interpolate\");\r\n\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      legend.color(color);\r\n      return chart;\r\n    };\r\n\r\n    chart.showLegend = function (_) {\r\n      if (!arguments.length) return showLegend;\r\n      showLegend = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showXAxis = function (_) {\r\n      if (!arguments.length) return showXAxis;\r\n      showXAxis = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showYAxis = function (_) {\r\n      if (!arguments.length) return showYAxis;\r\n      showYAxis = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.rightAlignYAxis = function (_) {\r\n      if (!arguments.length) return rightAlignYAxis;\r\n      rightAlignYAxis = _;\r\n      yAxis.orient(_ ? \"right\" : \"left\");\r\n      return chart;\r\n    };\r\n\r\n    chart.useInteractiveGuideline = function (_) {\r\n      if (!arguments.length) return useInteractiveGuideline;\r\n      useInteractiveGuideline = _;\r\n      if (_ === true) {\r\n        chart.interactive(false);\r\n        chart.useVoronoi(false);\r\n      }\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltips = function (_) {\r\n      if (!arguments.length) return tooltips;\r\n      tooltips = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltipContent = function (_) {\r\n      if (!arguments.length) return tooltip;\r\n      tooltip = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.state = function (_) {\r\n      if (!arguments.length) return state;\r\n      state = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultState = function (_) {\r\n      if (!arguments.length) return defaultState;\r\n      defaultState = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.noData = function (_) {\r\n      if (!arguments.length) return noData;\r\n      noData = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.transitionDuration = function (_) {\r\n      if (!arguments.length) return transitionDuration;\r\n      transitionDuration = _;\r\n      return chart;\r\n    };\r\n\r\n    //============================================================\r\n\r\n    //chart.update();\r\n\r\n    return chart;\r\n  };\r\n\r\n\r\n  nv.models.line = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var scatter = nv.models.scatter();\r\n\r\n    var margin = { top: 0, right: 0, bottom: 0, left: 0 },\r\n        width = 960,\r\n        height = 500,\r\n        color = nv.utils.defaultColor() // a function that returns a color\r\n       \r\n    ,\r\n        getX = function (d, i) {\r\n      return d.x;\r\n    } // accessor to get the x value from a data point\r\n    ,\r\n        getY = function (d, i) {\r\n      return d.y;\r\n    } // accessor to get the y value from a data point\r\n    ,\r\n        getLabel = undefined //function(d) { return d.y }\r\n    ,\r\n        defined = function (d, i) {\r\n      return !isNaN(getY(d, i)) && getY(d, i) !== null;\r\n    } // allows a line to be not continuous when it is not defined\r\n    ,\r\n        isArea = function (d) {\r\n      return d.area;\r\n    } // decides if a line is an area or just a line\r\n    ,\r\n        clipEdge = false // if true, masks lines within x and y scale\r\n    ,\r\n        x //can be accessed via chart.xScale()\r\n    ,\r\n        y //can be accessed via chart.yScale()\r\n    ,\r\n        interpolate = \"linear\" // controls the line interpolation\r\n    ;\r\n\r\n    scatter.size(16) // default size\r\n    .sizeDomain([16, 256]);\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Private Variables\r\n    //------------------------------------------------------------\r\n\r\n    var x0, y0 //used to store previous scales\r\n    ;\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        var availableWidth = width - margin.left - margin.right,\r\n            availableHeight = height - margin.top - margin.bottom,\r\n            container = d3.select(this);\r\n\r\n        //------------------------------------------------------------\r\n        // Setup Scales\r\n\r\n        x = scatter.xScale();\r\n        y = scatter.yScale();\r\n\r\n        x0 = x0 || x;\r\n        y0 = y0 || y;\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-line\").data([data]);\r\n        var wrapEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-line\");\r\n        var defsEnter = wrapEnter.append(\"defs\");\r\n        var gEnter = wrapEnter.append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-groups\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-scatterWrap\");\r\n        var mt = margin.top + 10;\r\n        wrap.attr(\"transform\", \"translate(\" + margin.left + \",\" + mt + \")\");\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        scatter.width(availableWidth).height(availableHeight);\r\n\r\n        var scatterWrap = wrap.select(\".nv-scatterWrap\");\r\n        //.datum(data); // Data automatically trickles down from the wrap\r\n\r\n        scatterWrap.transition().call(scatter);\r\n\r\n\r\n        defsEnter.append(\"clipPath\").attr(\"id\", \"nv-edge-clip-\" + scatter.id()).append(\"rect\");\r\n\r\n        wrap.select(\"#nv-edge-clip-\" + scatter.id() + \" rect\").attr(\"width\", availableWidth).attr(\"height\", availableHeight > 0 ? availableHeight : 0);\r\n\r\n        g.attr(\"clip-path\", clipEdge ? \"url(#nv-edge-clip-\" + scatter.id() + \")\" : \"\");\r\n        scatterWrap.attr(\"clip-path\", clipEdge ? \"url(#nv-edge-clip-\" + scatter.id() + \")\" : \"\");\r\n\r\n\r\n        var groups = wrap.select(\".nv-groups\").selectAll(\".nv-group\").data(function (d) {\r\n          return d;\r\n        }, function (d) {\r\n          return d.key;\r\n        });\r\n        groups.enter().append(\"g\").style(\"stroke-opacity\", 0.000001).style(\"fill-opacity\", 0.000001);\r\n\r\n        groups.exit().remove();\r\n\r\n        groups.attr(\"class\", function (d, i) {\r\n          return \"nv-group nv-series-\" + i;\r\n        }).classed(\"hover\", function (d) {\r\n          return d.hover;\r\n        }).style(\"fill\", function (d, i) {\r\n          return color(d, i);\r\n        }).style(\"stroke\", function (d, i) {\r\n          return color(d, i);\r\n        });\r\n        groups.transition().style(\"stroke-opacity\", 1).style(\"fill-opacity\", 0.5);\r\n\r\n\r\n        var areaPaths = groups.selectAll(\"path.nv-area\").data(function (d) {\r\n          return isArea(d) ? [d] : [];\r\n        }); // this is done differently than lines because I need to check if series is an area\r\n        areaPaths.enter().append(\"path\").attr(\"class\", \"nv-area\").attr(\"d\", function (d) {\r\n          return d3.svg.area().interpolate(interpolate).defined(defined).x(function (d, i) {\r\n            return nv.utils.NaNtoZero(x0(getX(d, i)));\r\n          }).y0(function (d, i) {\r\n            return nv.utils.NaNtoZero(y0(getY(d, i)));\r\n          }).y1(function (d, i) {\r\n            return y0(y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0]);\r\n          })\r\n          //.y1(function(d,i) { return y0(0) }) //assuming 0 is within y domain.. may need to tweak this\r\n          .apply(this, [d.values]);\r\n        });\r\n        groups.exit().selectAll(\"path.nv-area\").remove();\r\n\r\n        areaPaths.transition().attr(\"d\", function (d) {\r\n          return d3.svg.area().interpolate(interpolate).defined(defined).x(function (d, i) {\r\n            return nv.utils.NaNtoZero(x(getX(d, i)));\r\n          }).y0(function (d, i) {\r\n            return nv.utils.NaNtoZero(y(getY(d, i)));\r\n          }).y1(function (d, i) {\r\n            return y(y.domain()[0] <= 0 ? y.domain()[1] >= 0 ? 0 : y.domain()[1] : y.domain()[0]);\r\n          })\r\n          //.y1(function(d,i) { return y0(0) }) //assuming 0 is within y domain.. may need to tweak this\r\n          .apply(this, [d.values]);\r\n        });\r\n\r\n\r\n        var linePaths = groups.selectAll(\"path.nv-line\").data(function (d) {\r\n          return [d.values];\r\n        });\r\n        linePaths.enter().append(\"path\").attr(\"class\", \"nv-line\").attr(\"d\", d3.svg.line().interpolate(interpolate).defined(defined).x(function (d, i) {\r\n          return nv.utils.NaNtoZero(x0(getX(d, i)));\r\n        }).y(function (d, i) {\r\n          return nv.utils.NaNtoZero(y0(getY(d, i)));\r\n        }));\r\n\r\n        linePaths.transition().attr(\"d\", d3.svg.line().interpolate(interpolate).defined(defined).x(function (d, i) {\r\n          return nv.utils.NaNtoZero(x(getX(d, i)));\r\n        }).y(function (d, i) {\r\n          return nv.utils.NaNtoZero(y(getY(d, i)));\r\n        }));\r\n\r\n\r\n        //store old scales for use in transitions on update\r\n        x0 = x.copy();\r\n        y0 = y.copy();\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    chart.dispatch = scatter.dispatch;\r\n    chart.scatter = scatter;\r\n\r\n    d3.rebind(chart, scatter, \"id\", \"interactive\", \"size\", \"xScale\", \"yScale\", \"zScale\", \"xDomain\", \"yDomain\", \"xRange\", \"yRange\", \"sizeDomain\", \"forceX\", \"forceY\", \"forceSize\", \"clipVoronoi\", \"useVoronoi\", \"clipRadius\", \"padData\", \"highlightPoint\", \"clearHighlights\");\r\n\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.x = function (_) {\r\n      if (!arguments.length) return getX;\r\n      getX = _;\r\n      scatter.x(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.y = function (_) {\r\n      if (!arguments.length) return getY;\r\n      getY = _;\r\n      scatter.y(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.label = function (_) {\r\n      //console.log(\"chart label\",_)\r\n      if (!arguments.length) return getLabel;\r\n      getLabel = _;\r\n      scatter.label(_);\r\n      return chart;\r\n    };\r\n\r\n    \r\n\r\n\r\n\r\n    chart.clipEdge = function (_) {\r\n      if (!arguments.length) return clipEdge;\r\n      clipEdge = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      scatter.color(color);\r\n      return chart;\r\n    };\r\n\r\n    chart.interpolate = function (_) {\r\n      if (!arguments.length) return interpolate;\r\n      interpolate = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defined = function (_) {\r\n      if (!arguments.length) return defined;\r\n      defined = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.isArea = function (_) {\r\n      if (!arguments.length) return isArea;\r\n      isArea = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    return chart;\r\n  };\r\n\r\n\r\n  nv.models.lineChart = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var lines = nv.models.line(),\r\n        xAxis = nv.models.axis(),\r\n        yAxis = nv.models.axis(),\r\n        legend = nv.models.legend(),\r\n        interactiveLayer = nv.interactiveGuideline();\r\n\r\n    var margin = { top: 30, right: 20, bottom: 50, left: 60 },\r\n        color = nv.utils.defaultColor(),\r\n        width = null,\r\n        height = null,\r\n        showLegend = true,\r\n        showXAxis = true,\r\n        showYAxis = true,\r\n        rightAlignYAxis = false,\r\n        useInteractiveGuideline = false,\r\n        label = function(d,i){return d.label},\r\n        tooltips = true,\r\n        tooltip = function (key, x, y, e, graph) {\r\n      return \"<h3>\" + key + \"</h3>\" + \"<p>\" + y + \" at \" + x + \"</p>\";\r\n    },\r\n        x,\r\n        y,\r\n        state = {},\r\n        defaultState = null,\r\n        noData = \"No Data Available.\",\r\n        dispatch = d3.dispatch(\"tooltipShow\", \"tooltipHide\", \"stateChange\", \"changeState\"),\r\n        transitionDuration = 250;\r\n\r\n    xAxis.orient(\"bottom\").tickPadding(7);\r\n    yAxis.orient(rightAlignYAxis ? \"right\" : \"left\");\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Private Variables\r\n    //------------------------------------------------------------\r\n\r\n    var showTooltip = function (e, offsetElement) {\r\n      var left = e.pos[0] + (offsetElement.offsetLeft || 0),\r\n          top = e.pos[1] + (offsetElement.offsetTop || 0),\r\n          x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),\r\n          y = yAxis.tickFormat()(lines.y()(e.point, e.pointIndex)),\r\n          content = tooltip(e.series.key, x, y, e, chart);\r\n          // console.log(e)\r\n      nv.tooltip.show([left, top], content, null, null, offsetElement);\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        // console.log(\"ScatterSerie\",data)\r\n        // console.log(\"scatter\", lines.scatter)\r\n\r\n        var container = d3.select(this),\r\n            that = this;\r\n\r\n        var availableWidth = (width || parseInt(container.style(\"width\")) || 960) - margin.left - margin.right,\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n\r\n\r\n        chart.update = function () {\r\n          container.transition().duration(transitionDuration).call(chart);\r\n        };\r\n        chart.container = this;\r\n\r\n        //set state.disabled\r\n        state.disabled = data.map(function (d) {\r\n          return !!d.disabled;\r\n        });\r\n\r\n\r\n        if (!defaultState) {\r\n          var key;\r\n          defaultState = {};\r\n          for (key in state) {\r\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\r\n          }\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        // Display noData message if there's nothing to show.\r\n\r\n        if (!data || !data.length || !data.filter(function (d) {\r\n          return d.values.length;\r\n        }).length) {\r\n          var noDataText = container.selectAll(\".nv-noData\").data([noData]);\r\n\r\n          noDataText.enter().append(\"text\").attr(\"class\", \"nvd3 nv-noData\").attr(\"dy\", \"-.7em\").style(\"text-anchor\", \"middle\");\r\n\r\n          noDataText.attr(\"x\", margin.left + availableWidth / 2).attr(\"y\", margin.top + availableHeight / 2).text(function (d) {\r\n            return d;\r\n          });\r\n\r\n          return chart;\r\n        } else {\r\n          container.selectAll(\".nv-noData\").remove();\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n          if(data[0].axisX.role == \"time\"){\r\n            data.forEach(function(serie){\r\n              serie.values.forEach(function(value){\r\n                value.x = new Date(value.x)\r\n              })\r\n            })\r\n            // console.log(\"Time format\", data)\r\n          }  \r\n\r\n        //------------------------------------------------------------\r\n        // Setup Scales\r\n        if(data[0].axisX.role == \"time\"){\r\n          x = d3.time.scale();\r\n          x.domain([data[0].values[0].x,data[0].values[data[0].values.length-1].x])\r\n          x.range([0, availableWidth])  \r\n          lines.xScale(x);\r\n        }else{\r\n          x = lines.xScale();\r\n        }\r\n\r\n        y = lines.yScale();\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-lineChart\").data([data]);\r\n        var gEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-lineChart\").append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        gEnter.append(\"rect\").style(\"opacity\", 0);\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-x nv-axis\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-y nv-axis\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-linesWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-legendWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-interactive\");\r\n\r\n        g.select(\"rect\").attr(\"width\", availableWidth).attr(\"height\", availableHeight > 0 ? availableHeight : 0);\r\n        //------------------------------------------------------------\r\n        // Legend\r\n        \r\n        showLegend = showLegend && data.length > 1;\r\n\r\n        if (showLegend) {\r\n          legend.width(availableWidth);\r\n\r\n          g.select(\".nv-legendWrap\").datum(data).call(legend);\r\n\r\n          if (margin.top != legend.height()) {\r\n            margin.top = legend.height();\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n          }\r\n\r\n          wrap.select(\".nv-legendWrap\").attr(\"transform\", \"translate(0,\" + -margin.top + \")\");\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n        wrap.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        if (rightAlignYAxis) {\r\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        // Main Chart Component(s)\r\n\r\n\r\n        //------------------------------------------------------------\r\n        //Set up interactive layer\r\n        if (useInteractiveGuideline) {\r\n          interactiveLayer.width(availableWidth).height(availableHeight).margin({ left: margin.left, top: margin.top }).svgContainer(container).xScale(x);\r\n          wrap.select(\".nv-interactive\").call(interactiveLayer);\r\n        }\r\n\r\n\r\n        lines.width(availableWidth).height(availableHeight).color(data.map(function (d, i) {\r\n          return d.color || color(d, i);\r\n        }).filter(function (d, i) {\r\n          return !data[i].disabled;\r\n        }));\r\n\r\n\r\n        var linesWrap = g.select(\".nv-linesWrap\").datum(data.filter(function (d) {\r\n          return !d.disabled;\r\n        }));\r\n\r\n        linesWrap.transition().call(lines);\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup Axes\r\n\r\n          if (showXAxis) {\r\n            if(data[0].axisX.role == \"time\"){\r\n                xAxis.tickFormat(customTimeFormat);\r\n          }\r\n          // else{\r\n          \r\n            xAxis.scale(x).ticks(availableWidth / 100).tickSize(-availableHeight, 0);\r\n          // }\r\n\r\n          // console.log(\"AXIS LINE \", xAxis.ticks(), xAxis.tickFormat())\r\n\r\n          g.select(\".nv-x.nv-axis\").attr(\"transform\", \"translate(0,\" + (y.range()[0] + 10) + \")\");\r\n          g.select(\".nv-x.nv-axis\").transition().call(xAxis);\r\n        }\r\n\r\n        if (showYAxis) {\r\n          yAxis.scale(y).ticks(availableHeight / 36).tickSize(-availableWidth, 0);\r\n\r\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(0,\" + 10 + \")\").transition().call(yAxis);\r\n        }\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //============================================================\r\n        // Event Handling/Dispatching (in chart's scope)\r\n        //------------------------------------------------------------\r\n\r\n        legend.dispatch.on(\"stateChange\", function (newState) {\r\n          state = newState;\r\n          dispatch.stateChange(state);\r\n          chart.update();\r\n        });\r\n\r\n        interactiveLayer.dispatch.on(\"elementMousemove\", function (e) {\r\n          lines.clearHighlights();\r\n          var singlePoint,\r\n              pointIndex,\r\n              pointXLocation,\r\n              allData = [];\r\n          data.filter(function (series, i) {\r\n            series.seriesIndex = i;\r\n            return !series.disabled;\r\n          }).forEach(function (series, i) {\r\n            pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\r\n            lines.highlightPoint(i, pointIndex, true);\r\n            var point = series.values[pointIndex];\r\n            if (typeof point === \"undefined\") return;\r\n            if (typeof singlePoint === \"undefined\") singlePoint = point;\r\n            if (typeof pointXLocation === \"undefined\") pointXLocation = chart.xScale()(chart.x()(point, pointIndex));\r\n            allData.push({\r\n              key: series.key,\r\n              value: chart.y()(point, pointIndex),\r\n              color: color(series, series.seriesIndex)\r\n            });\r\n          });\r\n          //Highlight the tooltip entry based on which point the mouse is closest to.\r\n          if (allData.length > 2) {\r\n            var yValue = chart.yScale().invert(e.mouseY);\r\n            var domainExtent = Math.abs(chart.yScale().domain()[0] - chart.yScale().domain()[1]);\r\n            var threshold = 0.03 * domainExtent;\r\n            var indexToHighlight = nv.nearestValueIndex(allData.map(function (d) {\r\n              return d.value;\r\n            }), yValue, threshold);\r\n            if (indexToHighlight !== null) allData[indexToHighlight].highlight = true;\r\n          }\r\n\r\n          var xValue = xAxis.tickFormat()(chart.x()(singlePoint, pointIndex));\r\n          // ,\r\n          //   label : chart.label()(singlePoint, pointIndex)\r\n          // };\r\n          interactiveLayer\r\n            .tooltip.position({ left: pointXLocation + margin.left, top: e.mouseY + margin.top })\r\n            .chartContainer(that.parentNode)\r\n            .enabled(tooltips)\r\n            .valueFormatter(function (d, i) {\r\n              // console.log(\"VAlue Formatter\", d,i)\r\n              return yAxis.tickFormat()(d);\r\n            })\r\n            .headerFormatter(function(d){\r\n              return d;\r\n              // console.log(\"Header Formatter\", d,i)\r\n              // var v = xAxis.tickFormat()(d);\r\n              // if(new Number((v).toFixed(0)) == v){\r\n              //   v = new Number(v.toFixed(0));\r\n              //   return v//d.label\r\n              // }else{\r\n              //   return v.toFixed(2)\r\n              // }\r\n               // v = (new Number((v).toFixed(0)) == v) ? v.toFixed(0) : v.toFixed(2);\r\n               // return v;\r\n              // return (xAxis.tickFormat()(d)).toFixed(2);\r\n            })\r\n            .data({\r\n              value: xValue,\r\n              series: allData\r\n            })();\r\n\r\n          interactiveLayer.renderGuideLine(pointXLocation);\r\n        });\r\n\r\n        interactiveLayer.dispatch.on(\"elementMouseout\", function (e) {\r\n          dispatch.tooltipHide();\r\n          lines.clearHighlights();\r\n        });\r\n\r\n        dispatch.on(\"tooltipShow\", function (e) {\r\n          // console.log(\" dispath tooltipShow\",tooltips,e)\r\n          if (tooltips) showTooltip(e, that.parentNode);\r\n        });\r\n\r\n\r\n        dispatch.on(\"changeState\", function (e) {\r\n          if (typeof e.disabled !== \"undefined\" && data.length === e.disabled.length) {\r\n            data.forEach(function (series, i) {\r\n              series.disabled = e.disabled[i];\r\n            });\r\n\r\n            state.disabled = e.disabled;\r\n          }\r\n\r\n          chart.update();\r\n        });\r\n\r\n        //============================================================\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Event Handling/Dispatching (out of chart's scope)\r\n    //------------------------------------------------------------\r\n\r\n    lines.dispatch.on(\"elementMouseover.tooltip\", function (e) {\r\n      e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top];\r\n      dispatch.tooltipShow(e);\r\n    });\r\n\r\n    lines.dispatch.on(\"elementMouseout.tooltip\", function (e) {\r\n      dispatch.tooltipHide(e);\r\n    });\r\n\r\n    dispatch.on(\"tooltipHide\", function () {\r\n      if (tooltips) nv.tooltip.cleanup();\r\n    });\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    // expose chart's sub-components\r\n    chart.dispatch = dispatch;\r\n    chart.lines = lines;\r\n    chart.legend = legend;\r\n    chart.xAxis = xAxis;\r\n    chart.yAxis = yAxis;\r\n    chart.interactiveLayer = interactiveLayer;\r\n    chart.label = label;\r\n\r\n    d3.rebind(chart, lines, \"defined\", \"isArea\", \"x\", \"y\", \"size\", \"xScale\", \"yScale\", \"xDomain\", \"yDomain\", \"xRange\", \"yRange\", \"forceX\", \"forceY\", \"interactive\", \"clipEdge\", \"clipVoronoi\", \"useVoronoi\", \"id\", \"interpolate\",\"label\");\r\n\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      legend.color(color);\r\n      return chart;\r\n    };\r\n\r\n    chart.showLegend = function (_) {\r\n      if (!arguments.length) return showLegend;\r\n      showLegend = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showPoints = function (_) {\r\n      \r\n      if (!arguments.length) return lines.scatter.showPoints;\r\n     lines.scatter.showPoints(_);\r\n      return chart;\r\n    }; \r\n\r\n    chart.showXAxis = function (_) {\r\n      if (!arguments.length) return showXAxis;\r\n      showXAxis = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showYAxis = function (_) {\r\n      if (!arguments.length) return showYAxis;\r\n      showYAxis = _;\r\n      return chart;\r\n    };\r\n\r\n    // chart.showPoints = function (_) {\r\n    //   if (!arguments.length) return line.showPoints;\r\n    //   line.showPoins(_);\r\n    //   return chart;\r\n    // };\r\n\r\n    chart.rightAlignYAxis = function (_) {\r\n      if (!arguments.length) return rightAlignYAxis;\r\n      rightAlignYAxis = _;\r\n      yAxis.orient(_ ? \"right\" : \"left\");\r\n      return chart;\r\n    };\r\n\r\n    chart.useInteractiveGuideline = function (_) {\r\n      if (!arguments.length) return useInteractiveGuideline;\r\n      useInteractiveGuideline = _;\r\n      if (_ === true) {\r\n        chart.interactive(false);\r\n        chart.useVoronoi(false);\r\n      }\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltips = function (_) {\r\n      if (!arguments.length) return tooltips;\r\n      tooltips = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltipContent = function (_) {\r\n      if (!arguments.length) return tooltip;\r\n      tooltip = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.state = function (_) {\r\n      if (!arguments.length) return state;\r\n      state = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultState = function (_) {\r\n      if (!arguments.length) return defaultState;\r\n      defaultState = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.noData = function (_) {\r\n      if (!arguments.length) return noData;\r\n      noData = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.transitionDuration = function (_) {\r\n      if (!arguments.length) return transitionDuration;\r\n      transitionDuration = _;\r\n      return chart;\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    return chart;\r\n  };\r\n\r\n\r\n  nv.models.stackedArea = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var margin = { top: 0, right: 0, bottom: 0, left: 0 },\r\n        width = 960,\r\n        height = 500,\r\n        color = nv.utils.defaultColor() // a function that computes the color\r\n    ,\r\n        id = Math.floor(Math.random() * 100000) //Create semi-unique ID incase user doesn't selet one\r\n    ,\r\n        getX = function (d) {\r\n      return d.x;\r\n    } // accessor to get the x value from a data point\r\n    ,\r\n        getY = function (d) {\r\n      return d.y;\r\n    } // accessor to get the y value from a data point\r\n    ,\r\n        getLabel = undefined,\r\n        style = \"stack\",\r\n        offset = \"zero\",\r\n        order = \"default\",\r\n        interpolate = \"linear\" // controls the line interpolation\r\n    ,\r\n        clipEdge = false // if true, masks lines within x and y scale\r\n    ,\r\n        x //can be accessed via chart.xScale()\r\n    ,\r\n        y //can be accessed via chart.yScale()\r\n    ,\r\n        scatter = nv.models.scatter(),\r\n        dispatch = d3.dispatch(\"tooltipShow\", \"tooltipHide\", \"areaClick\", \"areaMouseover\", \"areaMouseout\");\r\n\r\n    scatter.size(2.2) // default size\r\n    .sizeDomain([2.2, 2.2]);\r\n\r\n    /************************************\r\n     * offset:\r\n     *   'wiggle' (stream)\r\n     *   'zero' (stacked)\r\n     *   'expand' (normalize to 100%)\r\n     *   'silhouette' (simple centered)\r\n     *\r\n     * order:\r\n     *   'inside-out' (stream)\r\n     *   'default' (input order)\r\n     ************************************/\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        var availableWidth = width - margin.left - margin.right,\r\n            availableHeight = height - margin.top - margin.bottom,\r\n            container = d3.select(this);\r\n\r\n        //------------------------------------------------------------\r\n        // Setup Scales\r\n\r\n        x = scatter.xScale();\r\n        y = scatter.yScale();\r\n\r\n        //------------------------------------------------------------\r\n\r\n        var dataRaw = data;\r\n        // Injecting point index into each point because d3.layout.stack().out does not give index\r\n        data.forEach(function (aseries, i) {\r\n          aseries.seriesIndex = i;\r\n          aseries.values = aseries.values.map(function (d, j) {\r\n            d.index = j;\r\n            d.seriesIndex = i;\r\n            return d;\r\n          });\r\n        });\r\n\r\n        var dataFiltered = data.filter(function (series) {\r\n          return !series.disabled;\r\n        });\r\n\r\n        data = d3.layout.stack().order(order).offset(offset).values(function (d) {\r\n          return d.values;\r\n        }) //TODO: make values customizeable in EVERY model in this fashion\r\n        .x(getX).y(getY).out(function (d, y0, y) {\r\n          var yHeight = getY(d) === 0 ? 0 : y;\r\n          d.display = {\r\n            y: yHeight,\r\n            y0: y0\r\n          };\r\n        })(dataFiltered);\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-stackedarea\").data([data]);\r\n        var wrapEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-stackedarea\");\r\n        var defsEnter = wrapEnter.append(\"defs\");\r\n        var gEnter = wrapEnter.append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-areaWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-scatterWrap\");\r\n\r\n        wrap.attr(\"transform\", \"translate(\" + margin.left + \",\" + (margin.top + 10) + \")\");\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        scatter.width(availableWidth).height(availableHeight).x(getX).y(function (d) {\r\n          return d.display.y + d.display.y0;\r\n        }).forceY([0]).color(data.map(function (d, i) {\r\n          return d.color || color(d, d.seriesIndex);\r\n        }));\r\n\r\n\r\n        var scatterWrap = g.select(\".nv-scatterWrap\").datum(data);\r\n\r\n        scatterWrap.call(scatter);\r\n\r\n        defsEnter.append(\"clipPath\").attr(\"id\", \"nv-edge-clip-\" + id).append(\"rect\");\r\n\r\n        wrap.select(\"#nv-edge-clip-\" + id + \" rect\").attr(\"width\", availableWidth).attr(\"height\", availableHeight);\r\n\r\n        g.attr(\"clip-path\", clipEdge ? \"url(#nv-edge-clip-\" + id + \")\" : \"\");\r\n\r\n        var area = d3.svg.area().x(function (d, i) {\r\n          return x(getX(d, i));\r\n        }).y0(function (d) {\r\n          return y(d.display.y0);\r\n        }).y1(function (d) {\r\n          return y(d.display.y + d.display.y0);\r\n        }).interpolate(interpolate);\r\n\r\n        var zeroArea = d3.svg.area().x(function (d, i) {\r\n          return x(getX(d, i));\r\n        }).y0(function (d) {\r\n          return y(d.display.y0);\r\n        }).y1(function (d) {\r\n          return y(d.display.y0);\r\n        });\r\n\r\n\r\n        var path = g.select(\".nv-areaWrap\").selectAll(\"path.nv-area\").data(function (d) {\r\n          return d;\r\n        });\r\n\r\n        path.enter().append(\"path\").attr(\"class\", function (d, i) {\r\n          return \"nv-area nv-area-\" + i;\r\n        }).attr(\"d\", function (d, i) {\r\n          return zeroArea(d.values, d.seriesIndex);\r\n        }).on(\"mouseover\", function (d, i) {\r\n          d3.select(this).classed(\"hover\", true);\r\n          dispatch.areaMouseover({\r\n            point: d,\r\n            series: d.key,\r\n            pos: [d3.event.pageX, d3.event.pageY],\r\n            seriesIndex: d.seriesIndex\r\n          });\r\n        }).on(\"mouseout\", function (d, i) {\r\n          d3.select(this).classed(\"hover\", false);\r\n          dispatch.areaMouseout({\r\n            point: d,\r\n            series: d.key,\r\n            pos: [d3.event.pageX, d3.event.pageY],\r\n            seriesIndex: d.seriesIndex\r\n          });\r\n        }).on(\"click\", function (d, i) {\r\n          d3.select(this).classed(\"hover\", false);\r\n          dispatch.areaClick({\r\n            point: d,\r\n            series: d.key,\r\n            pos: [d3.event.pageX, d3.event.pageY],\r\n            seriesIndex: d.seriesIndex\r\n          });\r\n        });\r\n\r\n        path.exit().remove();\r\n\r\n        path.style(\"fill\", function (d, i) {\r\n          return d.color || color(d, d.seriesIndex);\r\n        }).style(\"stroke\", function (d, i) {\r\n          return d.color || color(d, d.seriesIndex);\r\n        });\r\n        path.transition().attr(\"d\", function (d, i) {\r\n          return area(d.values, i);\r\n        });\r\n\r\n\r\n        //============================================================\r\n        // Event Handling/Dispatching (in chart's scope)\r\n        //------------------------------------------------------------\r\n\r\n        scatter.dispatch.on(\"elementMouseover.area\", function (e) {\r\n          g.select(\".nv-chart-\" + id + \" .nv-area-\" + e.seriesIndex).classed(\"hover\", true);\r\n        });\r\n        scatter.dispatch.on(\"elementMouseout.area\", function (e) {\r\n          g.select(\".nv-chart-\" + id + \" .nv-area-\" + e.seriesIndex).classed(\"hover\", false);\r\n        });\r\n\r\n        //============================================================\r\n        //Special offset functions\r\n        chart.d3_stackedOffset_stackPercent = function (stackData) {\r\n          var n = stackData.length,\r\n\r\n\r\n\r\n\r\n          //How many series\r\n          m = stackData[0].length,\r\n\r\n\r\n\r\n\r\n          //how many points per series\r\n          k = 1 / n,\r\n              i,\r\n              j,\r\n              o,\r\n              y0 = [];\r\n\r\n          for (j = 0; j < m; ++j) {\r\n            //Looping through all points\r\n            for (i = 0, o = 0; i < dataRaw.length; i++) //looping through series'\r\n            o += getY(dataRaw[i].values[j]); //total value of all points at a certian point in time.\r\n\r\n            if (o) for (i = 0; i < n; i++) stackData[i][j][1] /= o;else for (i = 0; i < n; i++) stackData[i][j][1] = k;\r\n          }\r\n          for (j = 0; j < m; ++j) y0[j] = 0;\r\n          return y0;\r\n        };\r\n      });\r\n\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Event Handling/Dispatching (out of chart's scope)\r\n    //------------------------------------------------------------\r\n\r\n    scatter.dispatch.on(\"elementClick.area\", function (e) {\r\n      dispatch.areaClick(e);\r\n    });\r\n    scatter.dispatch.on(\"elementMouseover.tooltip\", function (e) {\r\n      e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top], dispatch.tooltipShow(e);\r\n    });\r\n    scatter.dispatch.on(\"elementMouseout.tooltip\", function (e) {\r\n      dispatch.tooltipHide(e);\r\n    });\r\n\r\n    //============================================================\r\n\r\n    //============================================================\r\n    // Global getters and setters\r\n    //------------------------------------------------------------\r\n\r\n    chart.dispatch = dispatch;\r\n    chart.scatter = scatter;\r\n\r\n    d3.rebind(chart, scatter, \"interactive\", \"size\", \"xScale\", \"yScale\", \"zScale\", \"xDomain\", \"yDomain\", \"xRange\", \"yRange\", \"sizeDomain\", \"forceX\", \"forceY\", \"forceSize\", \"clipVoronoi\", \"useVoronoi\", \"clipRadius\", \"highlightPoint\", \"clearHighlights\");\r\n\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.x = function (_) {\r\n      if (!arguments.length) return getX;\r\n      getX = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.y = function (_) {\r\n      if (!arguments.length) return getY;\r\n      getY = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.label = function (_) {\r\n      //console.log(\"stacked Area label\",_)\r\n      if (!arguments.length) return getLabel;\r\n      getLabel = _;\r\n      scatter.label(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.clipEdge = function (_) {\r\n      if (!arguments.length) return clipEdge;\r\n      clipEdge = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.offset = function (_) {\r\n      if (!arguments.length) return offset;\r\n      offset = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.order = function (_) {\r\n      if (!arguments.length) return order;\r\n      order = _;\r\n      return chart;\r\n    };\r\n\r\n    //shortcut for offset + order\r\n    chart.style = function (_) {\r\n      if (!arguments.length) return style;\r\n      style = _;\r\n\r\n      switch (style) {\r\n        case \"stack\":\r\n          chart.offset(\"zero\");\r\n          chart.order(\"default\");\r\n          break;\r\n        case \"stream\":\r\n          chart.offset(\"wiggle\");\r\n          chart.order(\"inside-out\");\r\n          break;\r\n        case \"stream-center\":\r\n          chart.offset(\"silhouette\");\r\n          chart.order(\"inside-out\");\r\n          break;\r\n        case \"expand\":\r\n          chart.offset(\"expand\");\r\n          chart.order(\"default\");\r\n          break;\r\n        case \"stack_percent\":\r\n          chart.offset(chart.d3_stackedOffset_stackPercent);\r\n          chart.order(\"default\");\r\n          break;\r\n      }\r\n\r\n      return chart;\r\n    };\r\n\r\n    chart.interpolate = function (_) {\r\n      if (!arguments.length) return interpolate;\r\n      interpolate = _;\r\n      return chart;\r\n    };\r\n    //============================================================\r\n\r\n\r\n    return chart;\r\n  };\r\n\r\n\r\n  // nv.models.stackedAreaChart = function () {\r\n  //   \"use strict\";\r\n  //   //============================================================\r\n  //   // Public Variables with Default Settings\r\n  //   //------------------------------------------------------------\r\n\r\n  //   var stacked = nv.models.stackedArea(),\r\n  //       xAxis = nv.models.axis(),\r\n  //       yAxis = nv.models.axis(),\r\n  //       legend = nv.models.legend(),\r\n  //       controls = nv.models.legend(),\r\n  //       interactiveLayer = nv.interactiveGuideline();\r\n\r\n  //   var margin = { top: 30, right: 25, bottom: 50, left: 60 },\r\n  //       width = null,\r\n  //       height = null,\r\n  //       color = nv.utils.defaultColor() // a function that takes in d, i and returns color\r\n  //   ,\r\n  //       showControls = true,\r\n  //       showLegend = true,\r\n  //       showXAxis = true,\r\n  //       showYAxis = true,\r\n  //       rightAlignYAxis = false,\r\n  //       useInteractiveGuideline = false,\r\n  //       tooltips = true,\r\n  //       tooltip = function (key, x, y, e, graph) {\r\n  //     return \"<h3>\" + key + \"</h3>\" + \"<p>\" + y + \" on \" + x + \"</p>\";\r\n  //   },\r\n  //       x //can be accessed via chart.xScale()\r\n  //   ,\r\n  //       y //can be accessed via chart.yScale()\r\n  //   ,\r\n  //       yAxisTickFormat = d3.format(\".2f\"),\r\n  //       state = { style: stacked.style() },\r\n  //       defaultState = null,\r\n  //       noData = \"No Data Available.\",\r\n  //       dispatch = d3.dispatch(\"tooltipShow\", \"tooltipHide\", \"stateChange\", \"changeState\"),\r\n  //       controlWidth = 250,\r\n  //       cData = [\"Stacked\", \"Stream\", \"Expanded\"],\r\n  //       controlLabels = {},\r\n  //       transitionDuration = 250;\r\n\r\n  //   xAxis.orient(\"bottom\").tickPadding(7);\r\n  //   yAxis.orient(rightAlignYAxis ? \"right\" : \"left\");\r\n\r\n  //   controls.updateState(false);\r\n  //   //============================================================\r\n\r\n\r\n  //   //============================================================\r\n  //   // Private Variables\r\n  //   //------------------------------------------------------------\r\n\r\n  //   var showTooltip = function (e, offsetElement) {\r\n  //     var left = e.pos[0] + (offsetElement.offsetLeft || 0),\r\n  //         top = e.pos[1] + (offsetElement.offsetTop || 0),\r\n  //         x = xAxis.tickFormat()(stacked.x()(e.point, e.pointIndex)),\r\n  //         y = yAxis.tickFormat()(stacked.y()(e.point, e.pointIndex)),\r\n  //         content = tooltip(e.series.key, x, y, e, chart);\r\n\r\n  //     nv.tooltip.show([left, top], content, e.value < 0 ? \"n\" : \"s\", null, offsetElement);\r\n  //   };\r\n\r\n  //   //============================================================\r\n\r\n\r\n  //   function chart(selection) {\r\n  //     selection.each(function (data) {\r\n  //       var container = d3.select(this),\r\n  //           that = this;\r\n\r\n  //       var availableWidth = (width || parseInt(container.style(\"width\")) || 960) - margin.left - margin.right,\r\n  //           availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n\r\n  //       chart.update = function () {\r\n  //         container.transition().duration(transitionDuration).call(chart);\r\n  //       };\r\n  //       chart.container = this;\r\n\r\n  //       //set state.disabled\r\n  //       state.disabled = data.map(function (d) {\r\n  //         return !!d.disabled;\r\n  //       });\r\n\r\n  //       if (!defaultState) {\r\n  //         var key;\r\n  //         defaultState = {};\r\n  //         for (key in state) {\r\n  //           if (state[key] instanceof Array) \r\n  //               defaultState[key] = state[key].slice(0);\r\n  //           else \r\n  //               defaultState[key] = state[key];\r\n  //         }\r\n  //       }\r\n\r\n  //       //------------------------------------------------------------\r\n  //       // Display No Data message if there's nothing to show.\r\n\r\n  //       if (!data || !data.length || !data.filter(function (d) {\r\n  //         return d.values.length;\r\n  //       }).length) {\r\n  //         var noDataText = container.selectAll(\".nv-noData\").data([noData]);\r\n\r\n  //         noDataText.enter().append(\"text\").attr(\"class\", \"nvd3 nv-noData\").attr(\"dy\", \"-.7em\").style(\"text-anchor\", \"middle\");\r\n\r\n  //         noDataText.attr(\"x\", margin.left + availableWidth / 2).attr(\"y\", margin.top + availableHeight / 2).text(function (d) {\r\n  //           return d;\r\n  //         });\r\n\r\n  //         return chart;\r\n  //       } else {\r\n  //         container.selectAll(\".nv-noData\").remove();\r\n  //       }\r\n\r\n  //       //------------------------------------------------------------\r\n\r\n\r\n  //       //------------------------------------------------------------\r\n  //       // Setup Scales\r\n\r\n  //       x = stacked.xScale();\r\n  //       y = stacked.yScale();\r\n\r\n  //       //------------------------------------------------------------\r\n\r\n\r\n  //       //------------------------------------------------------------\r\n  //       // Setup containers and skeleton of chart\r\n\r\n  //       var wrap = container.selectAll(\"g.nv-wrap.nv-stackedAreaChart\").data([data]);\r\n  //       var gEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-stackedAreaChart\").append(\"g\");\r\n  //       var g = wrap.select(\"g\");\r\n\r\n  //       gEnter.append(\"rect\").style(\"opacity\", 0);\r\n  //       gEnter.append(\"g\").attr(\"class\", \"nv-x nv-axis\");\r\n  //       gEnter.append(\"g\").attr(\"class\", \"nv-y nv-axis\");\r\n  //       gEnter.append(\"g\").attr(\"class\", \"nv-stackedWrap\");\r\n  //       gEnter.append(\"g\").attr(\"class\", \"nv-legendWrap\");\r\n  //       gEnter.append(\"g\").attr(\"class\", \"nv-controlsWrap\");\r\n  //       gEnter.append(\"g\").attr(\"class\", \"nv-interactive\");\r\n\r\n  //       g.select(\"rect\").attr(\"width\", availableWidth).attr(\"height\", availableHeight);\r\n  //       //------------------------------------------------------------\r\n  //       // Legend\r\n        \r\n  //        showLegend = showLegend && data.length > 1;\r\n\r\n\r\n  //       if (showLegend) {\r\n  //         var legendWidth = showControls ? availableWidth - controlWidth : availableWidth;\r\n  //         legend.width(legendWidth);\r\n\r\n  //         g.select(\".nv-legendWrap\").datum(data).call(legend);\r\n\r\n  //         if (margin.top != legend.height()) {\r\n  //           margin.top = legend.height();\r\n  //           availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n  //         }\r\n\r\n  //         g.select(\".nv-legendWrap\").attr(\"transform\", \"translate(\" + (availableWidth - legendWidth) + \",\" + -margin.top + \")\");\r\n  //       }\r\n\r\n  //       //------------------------------------------------------------\r\n\r\n\r\n  //       //------------------------------------------------------------\r\n  //       // Controls\r\n\r\n  //       if (showControls) {\r\n  //         var controlsData = [{\r\n  //           key: controlLabels.stacked || \"Stacked\",\r\n  //           metaKey: \"Stacked\",\r\n  //           disabled: stacked.style() != \"stack\",\r\n  //           style: \"stack\"\r\n  //         }, {\r\n  //           key: controlLabels.stream || \"Stream\",\r\n  //           metaKey: \"Stream\",\r\n  //           disabled: stacked.style() != \"stream\",\r\n  //           style: \"stream\"\r\n  //         }, {\r\n  //           key: controlLabels.expanded || \"Expanded\",\r\n  //           metaKey: \"Expanded\",\r\n  //           disabled: stacked.style() != \"expand\",\r\n  //           style: \"expand\"\r\n  //         }, {\r\n  //           key: controlLabels.stack_percent || \"Stack %\",\r\n  //           metaKey: \"Stack_Percent\",\r\n  //           disabled: stacked.style() != \"stack_percent\",\r\n  //           style: \"stack_percent\"\r\n  //         }];\r\n\r\n  //         controlWidth = cData.length / 3 * 260;\r\n\r\n  //         controlsData = controlsData.filter(function (d) {\r\n  //           return cData.indexOf(d.metaKey) !== -1;\r\n  //         });\r\n\r\n  //         controls.width(controlWidth).color([\"#444\", \"#444\", \"#444\"]);\r\n\r\n  //         g.select(\".nv-controlsWrap\").datum(controlsData).call(controls);\r\n\r\n\r\n  //         if (margin.top != Math.max(controls.height(), legend.height())) {\r\n  //           margin.top = Math.max(controls.height(), legend.height());\r\n  //           availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n  //         }\r\n\r\n\r\n  //         g.select(\".nv-controlsWrap\").attr(\"transform\", \"translate(0,\" + -margin.top + \")\");\r\n  //       }\r\n\r\n  //       //------------------------------------------------------------\r\n\r\n\r\n  //       wrap.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n  //       if (rightAlignYAxis) {\r\n  //         g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\r\n  //       }\r\n\r\n  //       //------------------------------------------------------------\r\n  //       // Main Chart Component(s)\r\n\r\n  //       //------------------------------------------------------------\r\n  //       //Set up interactive layer\r\n  //       if (useInteractiveGuideline) {\r\n  //         interactiveLayer.width(availableWidth).height(availableHeight).margin({ left: margin.left, top: margin.top }).svgContainer(container).xScale(x);\r\n  //         wrap.select(\".nv-interactive\").call(interactiveLayer);\r\n  //       }\r\n\r\n  //       stacked.width(availableWidth).height(availableHeight);\r\n\r\n  //       var stackedWrap = g.select(\".nv-stackedWrap\").datum(data);\r\n\r\n  //       stackedWrap.transition().call(stacked);\r\n\r\n  //       //------------------------------------------------------------\r\n\r\n\r\n  //       //------------------------------------------------------------\r\n  //       // Setup Axes\r\n\r\n  //       if (showXAxis) {\r\n  //         xAxis.scale(x).ticks(availableWidth / 100).tickSize(-availableHeight, 0);\r\n\r\n  //         g.select(\".nv-x.nv-axis\").attr(\"transform\", \"translate(0,\" + (availableHeight + 10) + \")\");\r\n\r\n  //         g.select(\".nv-x.nv-axis\").transition().duration(0).call(xAxis);\r\n  //       }\r\n\r\n  //       if (showYAxis) {\r\n  //         yAxis.scale(y)\r\n  //           .ticks(stacked.offset() == \"wiggle\" ? 0 : \r\n  //             availableHeight / 36).tickSize(-availableWidth, 0)\r\n  //           // .setTickFormat(yAxisTickFormat);\r\n  //           .setTickFormat(stacked.style() == \"expand\" || stacked.style() == \"stack_percent\" ? \r\n  //             d3.format(\"%\") : yAxisTickFormat);\r\n\r\n  //         g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(0,\" + 10 + \")\").transition().duration(0).call(yAxis);\r\n  //       }\r\n\r\n  //       //------------------------------------------------------------\r\n\r\n\r\n  //       //============================================================\r\n  //       // Event Handling/Dispatching (in chart's scope)\r\n  //       //------------------------------------------------------------\r\n\r\n  //       stacked.dispatch.on(\"areaClick.toggle\", function (e) {\r\n  //         if (data.filter(function (d) {\r\n  //           return !d.disabled;\r\n  //         }).length === 1) data.forEach(function (d) {\r\n  //           d.disabled = false;\r\n  //         });else data.forEach(function (d, i) {\r\n  //           d.disabled = i != e.seriesIndex;\r\n  //         });\r\n\r\n  //         state.disabled = data.map(function (d) {\r\n  //           return !!d.disabled;\r\n  //         });\r\n  //         dispatch.stateChange(state);\r\n\r\n  //         chart.update();\r\n  //       });\r\n\r\n  //       legend.dispatch.on(\"stateChange\", function (newState) {\r\n  //         state.disabled = newState.disabled;\r\n  //         dispatch.stateChange(state);\r\n  //         chart.update();\r\n  //       });\r\n\r\n  //       controls.dispatch.on(\"legendClick\", function (d, i) {\r\n  //         if (!d.disabled) return;\r\n\r\n  //         controlsData = controlsData.map(function (s) {\r\n  //           s.disabled = true;\r\n  //           return s;\r\n  //         });\r\n  //         d.disabled = false;\r\n\r\n  //         stacked.style(d.style);\r\n\r\n\r\n  //         state.style = stacked.style();\r\n  //         dispatch.stateChange(state);\r\n\r\n  //         chart.update();\r\n  //       });\r\n\r\n\r\n  //       interactiveLayer.dispatch.on(\"elementMousemove\", function (e) {\r\n  //         stacked.clearHighlights();\r\n  //         var singlePoint,\r\n  //             pointIndex,\r\n  //             pointXLocation,\r\n  //             allData = [];\r\n  //         data.filter(function (series, i) {\r\n  //           series.seriesIndex = i;\r\n  //           return !series.disabled;\r\n  //         }).forEach(function (series, i) {\r\n  //           pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\r\n  //           stacked.highlightPoint(i, pointIndex, true);\r\n  //           var point = series.values[pointIndex];\r\n  //           if (typeof point === \"undefined\") return;\r\n  //           if (typeof singlePoint === \"undefined\") singlePoint = point;\r\n  //           if (typeof pointXLocation === \"undefined\") pointXLocation = chart.xScale()(chart.x()(point, pointIndex));\r\n\r\n  //           //If we are in 'expand' mode, use the stacked percent value instead of raw value.\r\n  //           var tooltipValue = stacked.style() == \"expand\" ? point.display.y : chart.y()(point, pointIndex);\r\n  //           allData.push({\r\n  //             key: series.key,\r\n  //             value: tooltipValue,\r\n  //             color: color(series, series.seriesIndex),\r\n  //             stackedValue: point.display\r\n  //           });\r\n  //         });\r\n\r\n  //         allData.reverse();\r\n\r\n  //         //Highlight the tooltip entry based on which stack the mouse is closest to.\r\n  //         if (allData.length > 2) {\r\n  //           var yValue = chart.yScale().invert(e.mouseY);\r\n  //           var yDistMax = Infinity,\r\n  //               indexToHighlight = null;\r\n  //           allData.forEach(function (series, i) {\r\n  //             //To handle situation where the stacked area chart is negative, we need to use absolute values\r\n  //             //when checking if the mouse Y value is within the stack area.\r\n  //             yValue = Math.abs(yValue);\r\n  //             var stackedY0 = Math.abs(series.stackedValue.y0);\r\n  //             var stackedY = Math.abs(series.stackedValue.y);\r\n  //             if (yValue >= stackedY0 && yValue <= stackedY + stackedY0) {\r\n  //               indexToHighlight = i;\r\n  //               return;\r\n  //             }\r\n  //           });\r\n  //           if (indexToHighlight != null) allData[indexToHighlight].highlight = true;\r\n  //         }\r\n\r\n  //         var xValue = xAxis.tickFormat()(chart.x()(singlePoint, pointIndex));\r\n\r\n  //         //If we are in 'expand' mode, force the format to be a percentage.\r\n  //         var valueFormatter = stacked.style() == \"expand\" ? function (d, i) {\r\n  //           return d3.format(\".1%\")(d);\r\n  //         } : function (d, i) {\r\n  //           return new Number(yAxis.tickFormat()(d)).toFixed(2);\r\n  //         };\r\n  //         interactiveLayer.tooltip.position({ left: pointXLocation + margin.left, top: e.mouseY + margin.top }).chartContainer(that.parentNode).enabled(tooltips).valueFormatter(valueFormatter).data({\r\n  //           value: xValue,\r\n  //           series: allData\r\n  //         })();\r\n\r\n  //         interactiveLayer.renderGuideLine(pointXLocation);\r\n  //       });\r\n\r\n  //       interactiveLayer.dispatch.on(\"elementMouseout\", function (e) {\r\n  //         dispatch.tooltipHide();\r\n  //         stacked.clearHighlights();\r\n  //       });\r\n\r\n\r\n  //       dispatch.on(\"tooltipShow\", function (e) {\r\n  //         if (tooltips) showTooltip(e, that.parentNode);\r\n  //       });\r\n\r\n  //       // Update chart from a state object passed to event handler\r\n  //       dispatch.on(\"changeState\", function (e) {\r\n  //         if (typeof e.disabled !== \"undefined\" && data.length === e.disabled.length) {\r\n  //           data.forEach(function (series, i) {\r\n  //             series.disabled = e.disabled[i];\r\n  //           });\r\n\r\n  //           state.disabled = e.disabled;\r\n  //         }\r\n\r\n  //         if (typeof e.style !== \"undefined\") {\r\n  //           stacked.style(e.style);\r\n  //         }\r\n\r\n  //         chart.update();\r\n  //       });\r\n  //     });\r\n\r\n\r\n  //     return chart;\r\n  //   }\r\n\r\n\r\n  //   //============================================================\r\n  //   // Event Handling/Dispatching (out of chart's scope)\r\n  //   //------------------------------------------------------------\r\n\r\n  //   stacked.dispatch.on(\"tooltipShow\", function (e) {\r\n  //     //disable tooltips when value ~= 0\r\n  //     //// TODO: consider removing points from voronoi that have 0 value instead of this hack\r\n  //     /*\r\n  //      if (!Math.round(stacked.y()(e.point) * 100)) {  // 100 will not be good for very small numbers... will have to think about making this valu dynamic, based on data range\r\n  //      setTimeout(function() { d3.selectAll('.point.hover').classed('hover', false) }, 0);\r\n  //      return false;\r\n  //      }\r\n  //      */\r\n\r\n  //     e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top], dispatch.tooltipShow(e);\r\n  //   });\r\n\r\n  //   stacked.dispatch.on(\"tooltipHide\", function (e) {\r\n  //     dispatch.tooltipHide(e);\r\n  //   });\r\n\r\n  //   dispatch.on(\"tooltipHide\", function () {\r\n  //     if (tooltips) nv.tooltip.cleanup();\r\n  //   });\r\n\r\n  //   //============================================================\r\n\r\n\r\n  //   //============================================================\r\n  //   // Expose Public Variables\r\n  //   //------------------------------------------------------------\r\n\r\n  //   // expose chart's sub-components\r\n  //   chart.dispatch = dispatch;\r\n  //   chart.stacked = stacked;\r\n  //   chart.legend = legend;\r\n  //   chart.controls = controls;\r\n  //   chart.xAxis = xAxis;\r\n  //   chart.yAxis = yAxis;\r\n  //   chart.interactiveLayer = interactiveLayer;\r\n\r\n  //   d3.rebind(chart, stacked, \"x\", \"y\", \"size\", \"xScale\", \"yScale\", \"xDomain\", \"yDomain\", \"xRange\", \"yRange\", \"sizeDomain\", \"interactive\", \"useVoronoi\", \"offset\", \"order\", \"style\", \"clipEdge\", \"forceX\", \"forceY\", \"forceSize\", \"interpolate\");\r\n\r\n  //   chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n  //   chart.margin = function (_) {\r\n  //     if (!arguments.length) return margin;\r\n  //     margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n  //     margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n  //     margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n  //     margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.width = function (_) {\r\n  //     if (!arguments.length) return width;\r\n  //     width = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.height = function (_) {\r\n  //     if (!arguments.length) return height;\r\n  //     height = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.color = function (_) {\r\n  //     if (!arguments.length) return color;\r\n  //     color = nv.utils.getColor(_);\r\n  //     legend.color(color);\r\n  //     stacked.color(color);\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.label = function (_) {\r\n  //     //console.log(\"SA CHART\", _)\r\n  //     if (!arguments.length) return stacked.label;\r\n  //     stacked.label(_);\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.showControls = function (_) {\r\n  //     if (!arguments.length) return showControls;\r\n  //     showControls = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.showLegend = function (_) {\r\n  //     if (!arguments.length) return showLegend;\r\n  //     showLegend = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.showXAxis = function (_) {\r\n  //     if (!arguments.length) return showXAxis;\r\n  //     showXAxis = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.showYAxis = function (_) {\r\n  //     if (!arguments.length) return showYAxis;\r\n  //     showYAxis = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.rightAlignYAxis = function (_) {\r\n  //     if (!arguments.length) return rightAlignYAxis;\r\n  //     rightAlignYAxis = _;\r\n  //     yAxis.orient(_ ? \"right\" : \"left\");\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.useInteractiveGuideline = function (_) {\r\n  //     if (!arguments.length) return useInteractiveGuideline;\r\n  //     useInteractiveGuideline = _;\r\n  //     if (_ === true) {\r\n  //       chart.interactive(false);\r\n  //       chart.useVoronoi(false);\r\n  //     }\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.tooltip = function (_) {\r\n  //     if (!arguments.length) return tooltip;\r\n  //     tooltip = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.tooltips = function (_) {\r\n  //     if (!arguments.length) return tooltips;\r\n  //     tooltips = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.tooltipContent = function (_) {\r\n  //     if (!arguments.length) return tooltip;\r\n  //     tooltip = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.state = function (_) {\r\n  //     if (!arguments.length) return state;\r\n  //     state = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.defaultState = function (_) {\r\n  //     if (!arguments.length) return defaultState;\r\n  //     defaultState = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.noData = function (_) {\r\n  //     if (!arguments.length) return noData;\r\n  //     noData = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.transitionDuration = function (_) {\r\n  //     if (!arguments.length) return transitionDuration;\r\n  //     transitionDuration = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.controlsData = function (_) {\r\n  //     if (!arguments.length) return cData;\r\n  //     cData = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.controlLabels = function (_) {\r\n  //     if (!arguments.length) return controlLabels;\r\n  //     if (typeof _ !== \"object\") return controlLabels;\r\n  //     controlLabels = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   yAxis.setTickFormat = yAxis.tickFormat;\r\n\r\n  //   yAxis.tickFormat = function (_) {\r\n  //     if (!arguments.length) return yAxisTickFormat;\r\n  //     yAxisTickFormat = _;\r\n  //     return yAxis;\r\n  //   };\r\n\r\n\r\n  //   //============================================================\r\n\r\n  //   return chart;\r\n  // };\r\n  nv.models.stackedAreaChart = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var stacked = nv.models.stackedArea(),\r\n        xAxis = nv.models.axis(),\r\n        yAxis = nv.models.axis(),\r\n        legend = nv.models.legend(),\r\n        controls = nv.models.legend(),\r\n        interactiveLayer = nv.interactiveGuideline();\r\n\r\n    var margin = { top: 30, right: 25, bottom: 50, left: 60 },\r\n        width = null,\r\n        height = null,\r\n        color = nv.utils.defaultColor() // a function that takes in d, i and returns color\r\n    ,\r\n        showControls = true,\r\n        showLegend = true,\r\n        showXAxis = true,\r\n        showYAxis = true,\r\n        rightAlignYAxis = false,\r\n        useInteractiveGuideline = false,\r\n        tooltips = true,\r\n        tooltip = function (key, x, y, e, graph) {\r\n      return \"<h3>\" + key + \"</h3>\" + \"<p>\" + y + \" on \" + x + \"</p>\";\r\n    },\r\n        x //can be accessed via chart.xScale()\r\n    ,\r\n        y //can be accessed via chart.yScale()\r\n    ,\r\n        yAxisTickFormat = yAxis.tickFormat(), //d3.format(\",.2f\"),\r\n        state = { style: stacked.style() },\r\n        defaultState = null,\r\n        noData = \"No Data Available.\",\r\n        dispatch = d3.dispatch(\"tooltipShow\", \"tooltipHide\", \"stateChange\", \"changeState\"),\r\n        controlWidth = 250,\r\n        cData = [\"Stacked\", \"Stream\", \"Expanded\"],\r\n        controlLabels = {},\r\n        transitionDuration = 250;\r\n\r\n    xAxis.orient(\"bottom\").tickPadding(7);\r\n    yAxis.orient(rightAlignYAxis ? \"right\" : \"left\");\r\n\r\n    controls.updateState(false);\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Private Variables\r\n    //------------------------------------------------------------\r\n\r\n    var showTooltip = function (e, offsetElement) {\r\n      var left = e.pos[0] + (offsetElement.offsetLeft || 0),\r\n          top = e.pos[1] + (offsetElement.offsetTop || 0),\r\n          x = xAxis.tickFormat()(stacked.x()(e.point, e.pointIndex)),\r\n          y = yAxis.tickFormat()(stacked.y()(e.point, e.pointIndex)),\r\n          content = tooltip(e.series.key, x, y, e, chart);\r\n\r\n      nv.tooltip.show([left, top], content, e.value < 0 ? \"n\" : \"s\", null, offsetElement);\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        var container = d3.select(this),\r\n            that = this;\r\n\r\n        var availableWidth = (width || parseInt(container.style(\"width\")) || 960) - margin.left - margin.right,\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n\r\n        chart.update = function () {\r\n          container.transition().duration(transitionDuration).call(chart);\r\n        };\r\n        chart.container = this;\r\n\r\n        //set state.disabled\r\n        state.disabled = data.map(function (d) {\r\n          return !!d.disabled;\r\n        });\r\n\r\n        if (!defaultState) {\r\n          var key;\r\n          defaultState = {};\r\n          for (key in state) {\r\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\r\n          }\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        // Display No Data message if there's nothing to show.\r\n\r\n        if (!data || !data.length || !data.filter(function (d) {\r\n          return d.values.length;\r\n        }).length) {\r\n          var noDataText = container.selectAll(\".nv-noData\").data([noData]);\r\n\r\n          noDataText.enter().append(\"text\").attr(\"class\", \"nvd3 nv-noData\").attr(\"dy\", \"-.7em\").style(\"text-anchor\", \"middle\");\r\n\r\n          noDataText.attr(\"x\", margin.left + availableWidth / 2).attr(\"y\", margin.top + availableHeight / 2).text(function (d) {\r\n            return d;\r\n          });\r\n\r\n          return chart;\r\n        } else {\r\n          container.selectAll(\".nv-noData\").remove();\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        if(data[0].axisX.role == \"time\"){\r\n            data.forEach(function(serie){\r\n              serie.values.forEach(function(value){\r\n                value.x = new Date(value.x)\r\n              })\r\n            })\r\n            // console.log(\"Time format\", data)\r\n          }  \r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup Scales\r\n        if(data[0].axisX.role == \"time\"){\r\n          x = d3.time.scale();\r\n          x.domain([data[0].values[0].x,data[0].values[data[0].values.length-1].x])\r\n          x.range([0, availableWidth])  \r\n          stacked.xScale(x);\r\n        }else{\r\n          x = stacked.xScale();\r\n        }\r\n\r\n        // x = stacked.xScale();\r\n        y = stacked.yScale();\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-stackedAreaChart\").data([data]);\r\n        var gEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-stackedAreaChart\").append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        gEnter.append(\"rect\").style(\"opacity\", 0);\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-x nv-axis\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-y nv-axis\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-stackedWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-legendWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-controlsWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-interactive\");\r\n\r\n        g.select(\"rect\").attr(\"width\", availableWidth).attr(\"height\", availableHeight);\r\n        //------------------------------------------------------------\r\n        // Legend\r\n        // \r\n        \r\n        showLegend = showLegend && data.length > 1;\r\n\r\n        if (showLegend) {\r\n          var legendWidth = showControls ? availableWidth - controlWidth : availableWidth;\r\n          legend.width(legendWidth);\r\n\r\n          g.select(\".nv-legendWrap\").datum(data).call(legend);\r\n\r\n          if (margin.top != legend.height()) {\r\n            margin.top = legend.height();\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n          }\r\n\r\n          g.select(\".nv-legendWrap\").attr(\"transform\", \"translate(\" + (availableWidth - legendWidth) + \",\" + -margin.top + \")\");\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Controls\r\n\r\n        if (showControls) {\r\n          var controlsData = [{\r\n            key: controlLabels.stacked || \"Stacked\",\r\n            metaKey: \"Stacked\",\r\n            disabled: stacked.style() != \"stack\",\r\n            style: \"stack\"\r\n          }, {\r\n            key: controlLabels.stream || \"Stream\",\r\n            metaKey: \"Stream\",\r\n            disabled: stacked.style() != \"stream\",\r\n            style: \"stream\"\r\n          }, {\r\n            key: controlLabels.expanded || \"Expanded\",\r\n            metaKey: \"Expanded\",\r\n            disabled: stacked.style() != \"expand\",\r\n            style: \"expand\"\r\n          }, {\r\n            key: controlLabels.stack_percent || \"Stack %\",\r\n            metaKey: \"Stack_Percent\",\r\n            disabled: stacked.style() != \"stack_percent\",\r\n            style: \"stack_percent\"\r\n          }];\r\n\r\n          controlWidth = cData.length / 3 * 260;\r\n\r\n          controlsData = controlsData.filter(function (d) {\r\n            return cData.indexOf(d.metaKey) !== -1;\r\n          });\r\n\r\n          controls.width(controlWidth).color([\"#444\", \"#444\", \"#444\"]);\r\n\r\n          g.select(\".nv-controlsWrap\").datum(controlsData).call(controls);\r\n\r\n\r\n          if (margin.top != Math.max(controls.height(), legend.height())) {\r\n            margin.top = Math.max(controls.height(), legend.height());\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n          }\r\n\r\n\r\n          g.select(\".nv-controlsWrap\").attr(\"transform\", \"translate(0,\" + -margin.top + \")\");\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        wrap.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        if (rightAlignYAxis) {\r\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        // Main Chart Component(s)\r\n\r\n        //------------------------------------------------------------\r\n        //Set up interactive layer\r\n        if (useInteractiveGuideline) {\r\n          interactiveLayer.width(availableWidth).height(availableHeight).margin({ left: margin.left, top: margin.top }).svgContainer(container).xScale(x);\r\n          wrap.select(\".nv-interactive\").call(interactiveLayer);\r\n        }\r\n\r\n        stacked.width(availableWidth).height(availableHeight);\r\n\r\n        var stackedWrap = g.select(\".nv-stackedWrap\").datum(data);\r\n\r\n        stackedWrap.transition().call(stacked);\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup Axes\r\n        // \r\n        if (showXAxis) {\r\n            if(data[0].axisX.role == \"time\"){\r\n                xAxis.tickFormat(customTimeFormat);\r\n            }\r\n            xAxis.scale(x).ticks(availableWidth / 100).tickSize(-availableHeight, 0);\r\n          \r\n          g.select(\".nv-x.nv-axis\").attr(\"transform\", \"translate(0,\" + (y.range()[0] + 10) + \")\");\r\n          g.select(\".nv-x.nv-axis\").transition().call(xAxis);\r\n        }\r\n\r\n        // if (showXAxis) {\r\n        //   xAxis.scale(x).ticks(availableWidth / 100).tickSize(-availableHeight, 0);\r\n        //   console.log(\"AXIS Stacked \", xAxis.ticks(), xAxis.tickFormat())\r\n\r\n        //   g.select(\".nv-x.nv-axis\").attr(\"transform\", \"translate(0,\" + (availableHeight + 10) + \")\");\r\n\r\n        //   g.select(\".nv-x.nv-axis\").transition().duration(0).call(xAxis);\r\n        // }\r\n\r\n        if (showYAxis) {\r\n          yAxis.scale(y)\r\n            .ticks(stacked.offset() == \"wiggle\" ? 0 : availableHeight / 36)\r\n            .tickSize(-availableWidth, 0)\r\n            .setTickFormat(stacked.style() == \"expand\" || stacked.style() == \"stack_percent\" \r\n              ? d3.format(\"%\") \r\n              : yAxisTickFormat);\r\n\r\n          g.select(\".nv-y.nv-axis\").attr(\"transform\", \"translate(0,\" + 10 + \")\").transition().duration(0).call(yAxis);\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //============================================================\r\n        // Event Handling/Dispatching (in chart's scope)\r\n        //------------------------------------------------------------\r\n\r\n        stacked.dispatch.on(\"areaClick.toggle\", function (e) {\r\n          if (data.filter(function (d) {\r\n            return !d.disabled;\r\n          }).length === 1) data.forEach(function (d) {\r\n            d.disabled = false;\r\n          });else data.forEach(function (d, i) {\r\n            d.disabled = i != e.seriesIndex;\r\n          });\r\n\r\n          state.disabled = data.map(function (d) {\r\n            return !!d.disabled;\r\n          });\r\n          dispatch.stateChange(state);\r\n\r\n          chart.update();\r\n        });\r\n\r\n        legend.dispatch.on(\"stateChange\", function (newState) {\r\n          state.disabled = newState.disabled;\r\n          dispatch.stateChange(state);\r\n          chart.update();\r\n        });\r\n\r\n        controls.dispatch.on(\"legendClick\", function (d, i) {\r\n          if (!d.disabled) return;\r\n\r\n          controlsData = controlsData.map(function (s) {\r\n            s.disabled = true;\r\n            return s;\r\n          });\r\n          d.disabled = false;\r\n\r\n          stacked.style(d.style);\r\n\r\n\r\n          state.style = stacked.style();\r\n          dispatch.stateChange(state);\r\n\r\n          chart.update();\r\n        });\r\n\r\n\r\n        interactiveLayer.dispatch.on(\"elementMousemove\", function (e) {\r\n          stacked.clearHighlights();\r\n          var singlePoint,\r\n              pointIndex,\r\n              pointXLocation,\r\n              allData = [];\r\n          data.filter(function (series, i) {\r\n            series.seriesIndex = i;\r\n            return !series.disabled;\r\n          }).forEach(function (series, i) {\r\n            pointIndex = nv.interactiveBisect(series.values, e.pointXValue, chart.x());\r\n            stacked.highlightPoint(i, pointIndex, true);\r\n            var point = series.values[pointIndex];\r\n            if (typeof point === \"undefined\") return;\r\n            if (typeof singlePoint === \"undefined\") singlePoint = point;\r\n            if (typeof pointXLocation === \"undefined\") pointXLocation = chart.xScale()(chart.x()(point, pointIndex));\r\n\r\n            //If we are in 'expand' mode, use the stacked percent value instead of raw value.\r\n            var tooltipValue = stacked.style() == \"expand\" ? point.display.y : chart.y()(point, pointIndex);\r\n            allData.push({\r\n              key: series.key,\r\n              value: tooltipValue,\r\n              color: color(series, series.seriesIndex),\r\n              stackedValue: point.display\r\n            });\r\n          });\r\n\r\n          allData.reverse();\r\n\r\n          //Highlight the tooltip entry based on which stack the mouse is closest to.\r\n          if (allData.length > 2) {\r\n            var yValue = chart.yScale().invert(e.mouseY);\r\n            var yDistMax = Infinity,\r\n                indexToHighlight = null;\r\n            allData.forEach(function (series, i) {\r\n              //To handle situation where the stacked area chart is negative, we need to use absolute values\r\n              //when checking if the mouse Y value is within the stack area.\r\n              yValue = Math.abs(yValue);\r\n              var stackedY0 = Math.abs(series.stackedValue.y0);\r\n              var stackedY = Math.abs(series.stackedValue.y);\r\n              if (yValue >= stackedY0 && yValue <= stackedY + stackedY0) {\r\n                indexToHighlight = i;\r\n                return;\r\n              }\r\n            });\r\n            if (indexToHighlight != null) allData[indexToHighlight].highlight = true;\r\n          }\r\n\r\n          var xValue = xAxis.tickFormat()(chart.x()(singlePoint, pointIndex));\r\n\r\n          //If we are in 'expand' mode, force the format to be a percentage.\r\n          var valueFormatter = stacked.style() == \"expand\" ? function (d, i) {\r\n            return d3.format(\".1%\")(d);\r\n          } : function (d, i) {\r\n            return yAxis.tickFormat()(d);\r\n          };\r\n          interactiveLayer.tooltip.position({ left: pointXLocation + margin.left, top: e.mouseY + margin.top }).chartContainer(that.parentNode).enabled(tooltips).valueFormatter(valueFormatter).data({\r\n            value: xValue,\r\n            series: allData\r\n          })();\r\n\r\n          interactiveLayer.renderGuideLine(pointXLocation);\r\n        });\r\n\r\n        interactiveLayer.dispatch.on(\"elementMouseout\", function (e) {\r\n          dispatch.tooltipHide();\r\n          stacked.clearHighlights();\r\n        });\r\n\r\n\r\n        dispatch.on(\"tooltipShow\", function (e) {\r\n          if (tooltips) showTooltip(e, that.parentNode);\r\n        });\r\n\r\n        // Update chart from a state object passed to event handler\r\n        dispatch.on(\"changeState\", function (e) {\r\n          if (typeof e.disabled !== \"undefined\" && data.length === e.disabled.length) {\r\n            data.forEach(function (series, i) {\r\n              series.disabled = e.disabled[i];\r\n            });\r\n\r\n            state.disabled = e.disabled;\r\n          }\r\n\r\n          if (typeof e.style !== \"undefined\") {\r\n            stacked.style(e.style);\r\n          }\r\n\r\n          chart.update();\r\n        });\r\n      });\r\n\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Event Handling/Dispatching (out of chart's scope)\r\n    //------------------------------------------------------------\r\n\r\n    stacked.dispatch.on(\"tooltipShow\", function (e) {\r\n      //disable tooltips when value ~= 0\r\n      //// TODO: consider removing points from voronoi that have 0 value instead of this hack\r\n      /*\r\n       if (!Math.round(stacked.y()(e.point) * 100)) {  // 100 will not be good for very small numbers... will have to think about making this valu dynamic, based on data range\r\n       setTimeout(function() { d3.selectAll('.point.hover').classed('hover', false) }, 0);\r\n       return false;\r\n       }\r\n       */\r\n\r\n      e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top], dispatch.tooltipShow(e);\r\n    });\r\n\r\n    stacked.dispatch.on(\"tooltipHide\", function (e) {\r\n      dispatch.tooltipHide(e);\r\n    });\r\n\r\n    dispatch.on(\"tooltipHide\", function () {\r\n      if (tooltips) nv.tooltip.cleanup();\r\n    });\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    // expose chart's sub-components\r\n    chart.dispatch = dispatch;\r\n    chart.stacked = stacked;\r\n    chart.legend = legend;\r\n    chart.controls = controls;\r\n    chart.xAxis = xAxis;\r\n    chart.yAxis = yAxis;\r\n    chart.interactiveLayer = interactiveLayer;\r\n\r\n    d3.rebind(chart, stacked, \"x\", \"y\", \"size\", \"xScale\", \"yScale\", \"xDomain\", \"yDomain\", \"xRange\", \"yRange\", \"sizeDomain\", \"interactive\", \"useVoronoi\", \"offset\", \"order\", \"style\", \"clipEdge\", \"forceX\", \"forceY\", \"forceSize\", \"interpolate\");\r\n\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      legend.color(color);\r\n      stacked.color(color);\r\n      return chart;\r\n    };\r\n\r\n    chart.label = function (_) {\r\n      //console.log(\"SA CHART\", _)\r\n      if (!arguments.length) return stacked.label;\r\n      stacked.label(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.ShowPoints = function (_) {\r\n      //console.log(\"SA CHART\", _)\r\n      if (!arguments.length) return stacked.scatter.showPoints();\r\n      stacked.scatter.showPoints(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.showControls = function (_) {\r\n      if (!arguments.length) return showControls;\r\n      showControls = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showLegend = function (_) {\r\n      if (!arguments.length) return showLegend;\r\n      showLegend = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showXAxis = function (_) {\r\n      if (!arguments.length) return showXAxis;\r\n      showXAxis = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showYAxis = function (_) {\r\n      if (!arguments.length) return showYAxis;\r\n      showYAxis = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.rightAlignYAxis = function (_) {\r\n      if (!arguments.length) return rightAlignYAxis;\r\n      rightAlignYAxis = _;\r\n      yAxis.orient(_ ? \"right\" : \"left\");\r\n      return chart;\r\n    };\r\n\r\n    chart.useInteractiveGuideline = function (_) {\r\n      if (!arguments.length) return useInteractiveGuideline;\r\n      useInteractiveGuideline = _;\r\n      if (_ === true) {\r\n        chart.interactive(false);\r\n        chart.useVoronoi(false);\r\n      }\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltip = function (_) {\r\n      if (!arguments.length) return tooltip;\r\n      tooltip = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltips = function (_) {\r\n      if (!arguments.length) return tooltips;\r\n      tooltips = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltipContent = function (_) {\r\n      if (!arguments.length) return tooltip;\r\n      tooltip = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.state = function (_) {\r\n      if (!arguments.length) return state;\r\n      state = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultState = function (_) {\r\n      if (!arguments.length) return defaultState;\r\n      defaultState = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.noData = function (_) {\r\n      if (!arguments.length) return noData;\r\n      noData = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.transitionDuration = function (_) {\r\n      if (!arguments.length) return transitionDuration;\r\n      transitionDuration = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.controlsData = function (_) {\r\n      if (!arguments.length) return cData;\r\n      cData = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.controlLabels = function (_) {\r\n      if (!arguments.length) return controlLabels;\r\n      if (typeof _ !== \"object\") return controlLabels;\r\n      controlLabels = _;\r\n      return chart;\r\n    };\r\n\r\n    yAxis.setTickFormat = yAxis.tickFormat;\r\n\r\n    yAxis.tickFormat = function (_) {\r\n      if (!arguments.length) return yAxisTickFormat;\r\n      yAxisTickFormat = _;\r\n      return yAxis;\r\n    };\r\n\r\n\r\n    //============================================================\r\n\r\n    return chart;\r\n  };\r\n\r\n\r\n\r\n  nv.models.chord = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var margin = { top: 0, right: 0, bottom: 0, left: 0 },\r\n        width = 500,\r\n        height = 500,\r\n        getX = function (d) {\r\n      return d.x;\r\n    },\r\n        getY = function (d) {\r\n      return d.y;\r\n    },\r\n        getDescription = function (d) {\r\n      return d.description;\r\n    },\r\n        id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\r\n    ,\r\n        color = nv.utils.defaultColor()\r\n    //, valueFormat = d3.format(',.2f')\r\n    //, labelFormat = d3.format('%')\r\n    //, showLabels = true\r\n    //, chordLabelsOutside = true\r\n    //, donutLabelsOutside = false\r\n    //, labelType = \"key\"\r\n    //, labelThreshold = .02 //if slice percentage is under this, don't show label\r\n    //, donut = false\r\n    //, labelSunbeamLayout = false\r\n    //, startAngle = false\r\n    //, endAngle = false\r\n    //, donutRatio = 0.5\r\n    ,\r\n        dispatch = d3.dispatch(\"chartClick\", \"elementClick\", \"elementDblClick\", \"elementMouseover\", \"elementMouseout\");\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        // console.log(\"Chord data\", data);\r\n        var matrix = data[0];\r\n        // Prepare correlation matrix for chord layout\r\n        matrix = matrix.filter(function (series, i) {\r\n          series.seriesIndex = i;\r\n          return !series.disabled;\r\n        });\r\n\r\n        //console.log(\"MATRIX\", matrix)\r\n        var indexes = matrix.map(function (serie) {\r\n          return serie.seriesIndex;\r\n        });\r\n        var labels = matrix.map(function (serie) {\r\n          return serie.key;\r\n        });\r\n        //console.log(\"Indexes\", indexes)\r\n\r\n        matrix = matrix.map(function (serie, i) {\r\n          var values = [];\r\n          indexes.forEach(function (index) {\r\n            values.push(serie.values[index].value);\r\n          });\r\n\r\n          return values;\r\n        });\r\n\r\n        var layoutMatrix = matrix.map(function (item, index) {\r\n          //item[index] = 0;\r\n          item = item.map(function (value) {\r\n            return value * value;\r\n          });\r\n          return item;\r\n        });\r\n\r\n        //console.log(matrix)\r\n        //console.log(layoutMatrix)\r\n\r\n        var availableWidth = width - margin.left - margin.right,\r\n            availableHeight = height - margin.top - margin.bottom,\r\n            radius = Math.min(availableWidth, availableHeight) / 2,\r\n            arcRadius = radius - radius / 5,\r\n            container = d3.select(this);\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        //var wrap = container.selectAll('.nv-wrap.nv-pie').data([data]);\r\n        var wrap = container.selectAll(\".nv-wrap.nv-chord\").data(data);\r\n        var wrapEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-chord nv-chart-\" + id);\r\n        var gEnter = wrapEnter.append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-chord\");\r\n        //gEnter.append('g').attr('class', 'nv-pieLabels');\r\n\r\n        wrap.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n        g.select(\".nv-chord\").attr(\"transform\", \"translate(\" + availableWidth / 2 + \",\" + availableHeight / 2 + \")\");\r\n        //g.select('.nv-pieLabels').attr('transform', 'translate(' + availableWidth / 2 + ',' + availableHeight / 2 + ')');\r\n\r\n        //------------------------------------------------------------\r\n        var outerRadius = radius - margin.top - 10;\r\n        var innerRadius = outerRadius - 0.07 * radius;\r\n\r\n        var chordLayout = d3.layout.chord().padding(0.05).sortSubgroups(d3.descending).matrix(layoutMatrix);\r\n\r\n        var layoutGroups = chordLayout.groups();\r\n        layoutGroups = layoutGroups.map(function (group, i) {\r\n          group.key = labels[i];\r\n          group.seriesIndex = indexes[i];\r\n          return group;\r\n        });\r\n\r\n        var locked = false;\r\n        //console.log(\"GROUPS\", layoutGroups );\r\n        function lock() {\r\n          return function (g, i) {\r\n            if (locked) {\r\n              locked = false;\r\n              fade(false)(g, i);\r\n            } else {\r\n              fade(true)(g, i);\r\n              locked = true;\r\n            }\r\n          };\r\n        }\r\n\r\n        function fade(select) {\r\n          return function (g, i) {\r\n            if (locked) return;\r\n            if (select) {\r\n              //console.log(g);\r\n              wrap.select(\".nv-chord\").selectAll(\"path.nv-chord-group\").filter(function (d) {\r\n                return d.index == i;\r\n              }).transition().style(\"opacity\", 1).style(\"stroke-width\", \"3px\");\r\n\r\n              wrap.select(\".nv-chord\").selectAll(\"text.nv-chord-group\").filter(function (d) {\r\n                return d.index == i;\r\n              }).transition().style(\"opacity\", 1).style(\"font\", \"bold smaller Arial\");\r\n\r\n              var groups = wrap.select(\".nv-chord\").selectAll(\"path.nv-chord-group\").filter(function (d) {\r\n                return d.index != i;\r\n              });\r\n\r\n              groups.transition().style(\"opacity\", 0.1);\r\n\r\n              var labels = wrap.select(\".nv-chord\").selectAll(\"text.nv-chord-group\").filter(function (d) {\r\n                return d.index != i;\r\n              });\r\n\r\n              labels.transition().style(\"opacity\", 0.1);\r\n\r\n              wrap.select(\".nv-chord\").selectAll(\"path.nv-chord-dependency\").transition().style(\"opacity\", 0.01);\r\n\r\n              wrap.select(\".nv-chord\").selectAll(\"text.nv-chord-group-value\").transition().style(\"opacity\", 0);\r\n\r\n              var hords = wrap.select(\".nv-chord\").selectAll(\"path.nv-chord-dependency\").filter(function (d) {\r\n                return d.source.index == i || d.target.index == i;\r\n              });\r\n\r\n              hords.transition().style(\"opacity\", function (d) {\r\n                return d.determination;\r\n              });\r\n\r\n              var connectedGroups = [];\r\n\r\n              //console.log(hords.data());\r\n\r\n\r\n              hords.data().forEach(function (item) {\r\n                //console.log(\"HORDS ITEM\", item)\r\n                var index;\r\n                var determination;\r\n                var correlation;\r\n                if (item.source.index != i) {\r\n                  index = item.source.index;\r\n                  determination = item.determination;\r\n                  correlation = item.correlation;\r\n                }\r\n                if (item.target.index != i) {\r\n                  index = item.target.index;\r\n                  determination = item.determination;\r\n                  correlation = item.correlation;\r\n                }\r\n                connectedGroups.push({ index: index, determination: determination, correlation: correlation });\r\n              });\r\n\r\n              groups.filter(function (item) {\r\n                return connectedGroups.find(function (d) {\r\n                  return d.index == item.index;\r\n                });\r\n              }).data(connectedGroups).transition().style(\"opacity\", function (d) {\r\n                return d.determination;\r\n              });\r\n\r\n              labels.filter(function (item) {\r\n                return connectedGroups.find(function (d) {\r\n                  return d.index == item.index;\r\n                });\r\n              }).data(connectedGroups).transition().style(\"opacity\", function (d) {\r\n                return d.determination;\r\n              });\r\n\r\n              var values = wrap.select(\".nv-chord\").selectAll(\"text.nv-chord-group-value\").filter(function (item) {\r\n                return connectedGroups.find(function (d) {\r\n                  return d.index == item.index;\r\n                });\r\n              }).data(connectedGroups).transition().style(\"opacity\", function (d) {\r\n                if (d.determination > 0.3 && d.determination < 0.8) {\r\n                  return d.determination + 0.2;\r\n                }\r\n                return d.determination;\r\n              }).text(function (d) {\r\n                return d.correlation > 0 ? d.determination.toPrecision(2) : -d.determination.toPrecision(2);\r\n              }).style(\"fill\", function (d) {\r\n                //console.log(d)\r\n                return d.correlation > 0 ? \"#7f0000\" : \"#081d58\";\r\n              });\r\n            } else {\r\n              wrap.select(\".nv-chord\").selectAll(\"path.nv-chord-group\").transition().duration(250).style(\"opacity\", 0.5).style(\"stroke-width\", \"1px\");\r\n\r\n              wrap.select(\".nv-chord\").selectAll(\"text.nv-chord-group\").transition().duration(250).style(\"opacity\", 0.9).style(\"font\", \"bold x-small Arial\");\r\n\r\n              wrap.select(\".nv-chord\").selectAll(\"path.nv-chord-dependency\").transition().duration(250).style(\"opacity\", function (d) {\r\n                return 0.5 * d.determination;\r\n              }).style(\"stroke-width\", \"1px\");\r\n              wrap.select(\".nv-chord\").selectAll(\"text.nv-chord-group-value\").transition().duration(250).style(\"fill\", \"#000000\").style(\"opacity\", 0);\r\n            }\r\n          };\r\n        }\r\n\r\n\r\n        var groups = wrap.select(\".nv-chord\").selectAll(\"path.nv-chord-group\").data(layoutGroups);\r\n        groups.exit().remove();\r\n\r\n        groups.enter().append(\"path\").attr(\"class\", \"nv-chord-group\").style(\"fill\", function (d, i) {\r\n          return \"#238443\";\r\n        }).style(\"stroke\", function (d, i) {\r\n          return \"#238443\";\r\n        }).style(\"opacity\", 0.05).attr(\"d\", d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius)).on(\"mouseover\", fade(true)).on(\"mouseout\", fade(false)).on(\"click\", lock());\r\n        ;\r\n\r\n        groups.transition()\r\n        //.style(\"fill\", function (d, i) {\r\n        //    return color(d, d.seriesIndex);\r\n        //})\r\n        //.style(\"stroke\", function (d, i) {\r\n        //    return color(d, d.seriesIndex);\r\n        //})\r\n        .style(\"opacity\", 0.5).attr(\"d\", d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius));\r\n\r\n\r\n        var labels = wrap.select(\".nv-chord\").selectAll(\"text.nv-chord-group\").data(layoutGroups);\r\n        labels.exit().remove();\r\n        labels.enter().append(\"text\").attr(\"class\", \"nv-chord-group\").style(\"fill\", function (d, i) {\r\n          return \"#000000\";\r\n        }).style(\"font\", \"bold x-small Arial\").style(\"text-anchor\", function (d, i) {\r\n          return getTextAnchor(d, i);\r\n        }).attr(\"x\", function (d, i) {\r\n          return (outerRadius + 3) * Math.sin(Math.PI + (d.startAngle + d.endAngle) / -2);\r\n        }).attr(\"y\", function (d, i) {\r\n          return (outerRadius + 3) * Math.cos(Math.PI + (d.startAngle + d.endAngle) / -2);\r\n        }).attr(\"dy\", function (d, i) {\r\n          return getDy(d, i);\r\n        }).classed(\"nv-label\", true).text(function (d, i) {\r\n          return d.key;\r\n        });\r\n\r\n        labels.style(\"stroke\", \"none\").style(\"opacity\", 0.9);\r\n\r\n        labels.transition().style(\"fill\", function (d, i) {\r\n          return \"#000000\";\r\n        }).style(\"font\", \"bold x-small Arial\").style(\"text-anchor\", function (d, i) {\r\n          return getTextAnchor(d, i);\r\n        }).attr(\"x\", function (d, i) {\r\n          return (outerRadius + 3) * Math.sin(Math.PI + (d.startAngle + d.endAngle) / -2);\r\n        }).attr(\"y\", function (d, i) {\r\n          return (outerRadius + 3) * Math.cos(Math.PI + (d.startAngle + d.endAngle) / -2);\r\n        }).attr(\"dy\", function (d, i) {\r\n          return getDy(d, i);\r\n        }).text(function (d, i) {\r\n          return d.key;\r\n        });\r\n\r\n\r\n        var hordsData = chordLayout.chords();\r\n        hordsData = hordsData.map(function (item) {\r\n          item.correlation = matrix[item.source.index][item.target.index];\r\n          item.determination = item.correlation * item.correlation;\r\n          return item;\r\n        });\r\n        hordsData = hordsData.filter(function (item) {\r\n          return item.source.index != item.target.index;\r\n        });\r\n\r\n\r\n        var chords = wrap.select(\".nv-chord\").selectAll(\"path.nv-chord-dependency\").data(hordsData);\r\n\r\n        chords.exit().remove();\r\n\r\n        //console.log(\"CHORDS\",chordLayout.chords());\r\n\r\n        chords.enter().append(\"path\").attr(\"class\", \"nv-chord-dependency\").attr(\"d\", d3.svg.chord().radius(innerRadius)).style(\"fill\", function (d) {\r\n          return d.correlation > 0 ? \"#fb6a4a\" : \"#6baed6\";\r\n        }).style(\"stroke\", function (d) {\r\n          return d.correlation > 0 ? \"#fb6a4a\" : \"#6baed6\";\r\n        }).style(\"opacity\", 0.3);\r\n\r\n        chords.transition().duration(250).attr(\"d\", d3.svg.chord().radius(innerRadius)).style(\"fill\", function (d) {\r\n          return d.correlation > 0 ? \"#fb6a4a\" : \"#6baed6\";\r\n        }).style(\"stroke\", function (d) {\r\n          return d.correlation > 0 ? \"#fb6a4a\" : \"#6baed6\";\r\n        }).style(\"opacity\", function (d) {\r\n          return 0.5 * d.determination;\r\n        });\r\n\r\n        var values = wrap.select(\".nv-chord\").selectAll(\"text.nv-chord-group-value\").data(layoutGroups);\r\n        values.exit().remove();\r\n        values.enter().append(\"text\").attr(\"class\", \"nv-chord-group-value\").style(\"fill\", function (d, i) {\r\n          return \"#000000\";\r\n        }).style(\"font\", \"bold smaller Arial\").style(\"text-anchor\", function (d, i) {\r\n          return getValueAnchor(d, i);\r\n        }).attr(\"x\", function (d, i) {\r\n          return (innerRadius - 3) * Math.sin(Math.PI + (d.startAngle + d.endAngle) / -2);\r\n        }).attr(\"y\", function (d, i) {\r\n          return (innerRadius - 3) * Math.cos(Math.PI + (d.startAngle + d.endAngle) / -2);\r\n        }).attr(\"dy\", function (d, i) {\r\n          return getValueDy(d, i);\r\n        }).classed(\"nv-label\", true).text(function (d, i) {\r\n          return \"0.00\";\r\n        });\r\n\r\n        values.style(\"stroke\", \"none\").style(\"opacity\", 0);\r\n\r\n        values.transition().style(\"fill\", function (d, i) {\r\n          return \"#000000\";\r\n        }).style(\"font\", \"bold smaller Arial\").style(\"text-anchor\", function (d, i) {\r\n          return getValueAnchor(d, i);\r\n        }).attr(\"x\", function (d, i) {\r\n          return (innerRadius - 3) * Math.sin(Math.PI + (d.startAngle + d.endAngle) / -2);\r\n        }).attr(\"y\", function (d, i) {\r\n          return (innerRadius - 3) * Math.cos(Math.PI + (d.startAngle + d.endAngle) / -2);\r\n        }).attr(\"dy\", function (d, i) {\r\n          return getValueDy(d, i);\r\n        }).text(function (d, i) {\r\n          return \"0.00\";\r\n        });\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n    function getTextAnchor(d, i) {\r\n      var angle = Math.PI + (d.startAngle + d.endAngle) / -2;\r\n      var x = Math.sin(angle);\r\n      if (Math.abs(x) < 0.1) return \"middle\";\r\n      if (x > 0.1) return \"start\";\r\n      return \"end\";\r\n    }\r\n\r\n    function getDy(d, i) {\r\n      var angle = Math.PI + (d.startAngle + d.endAngle) / -2;\r\n      var y = Math.cos(angle);\r\n      if (Math.abs(y) < 0.1) return \".72em\";\r\n      if (y > 0.1) return \"1em\";\r\n      return \"-.3em\";\r\n    }\r\n\r\n    function getValueAnchor(d, i) {\r\n      var angle = Math.PI + (d.startAngle + d.endAngle) / -2;\r\n      var x = Math.sin(angle);\r\n      if (Math.abs(x) < 0.1) return \"middle\";\r\n      if (x > 0.1) return \"end\";\r\n      return \"start\";\r\n    }\r\n\r\n    function getValueDy(d, i) {\r\n      var angle = Math.PI + (d.startAngle + d.endAngle) / -2;\r\n      var y = Math.cos(angle);\r\n      if (Math.abs(y) < 0.1) return \".72em\";\r\n      if (y > 0.1) return \"-.3em\";\r\n      return \"1em\";\r\n    }\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    chart.dispatch = dispatch;\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    //chart.values = function(_) {\r\n    //    nv.log(\"chord.values() is no longer supported.\");\r\n    //    return chart;\r\n    //};\r\n\r\n    chart.x = function (_) {\r\n      if (!arguments.length) return getX;\r\n      getX = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.y = function (_) {\r\n      if (!arguments.length) return getY;\r\n      getY = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n    //chart.description = function(_) {\r\n    //    if (!arguments.length) return getDescription;\r\n    //    getDescription = _;\r\n    //    return chart;\r\n    //};\r\n    //\r\n    //chart.showLabels = function(_) {\r\n    //    if (!arguments.length) return showLabels;\r\n    //    showLabels = _;\r\n    //    return chart;\r\n    //};\r\n    //\r\n    //chart.labelSunbeamLayout = function(_) {\r\n    //    if (!arguments.length) return labelSunbeamLayout;\r\n    //    labelSunbeamLayout = _;\r\n    //    return chart;\r\n    //};\r\n    //\r\n    //chart.donutLabelsOutside = function(_) {\r\n    //    if (!arguments.length) return donutLabelsOutside;\r\n    //    donutLabelsOutside = _;\r\n    //    return chart;\r\n    //};\r\n    //\r\n    //chart.chordLabelsOutside = function(_) {\r\n    //    if (!arguments.length) return chordLabelsOutside;\r\n    //    chordLabelsOutside = _;\r\n    //    return chart;\r\n    //};\r\n    //\r\n    //chart.labelType = function(_) {\r\n    //    if (!arguments.length) return labelType;\r\n    //    labelType = _;\r\n    //    labelType = labelType || \"key\";\r\n    //    return chart;\r\n    //};\r\n    //\r\n    //chart.donut = function(_) {\r\n    //    if (!arguments.length) return donut;\r\n    //    donut = _;\r\n    //    return chart;\r\n    //};\r\n    //\r\n    //chart.donutRatio = function(_) {\r\n    //    if (!arguments.length) return donutRatio;\r\n    //    donutRatio = _;\r\n    //    return chart;\r\n    //};\r\n    //\r\n    //chart.startAngle = function(_) {\r\n    //    if (!arguments.length) return startAngle;\r\n    //    startAngle = _;\r\n    //    return chart;\r\n    //};\r\n    //\r\n    //chart.endAngle = function(_) {\r\n    //    if (!arguments.length) return endAngle;\r\n    //    endAngle = _;\r\n    //    return chart;\r\n    //};\r\n\r\n    chart.id = function (_) {\r\n      if (!arguments.length) return id;\r\n      id = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      return chart;\r\n    };\r\n\r\n    //chart.valueFormat = function(_) {\r\n    //    if (!arguments.length) return valueFormat;\r\n    //    valueFormat = _;\r\n    //    return chart;\r\n    //};\r\n    //\r\n    //chart.labelFormat = function(_) {\r\n    //    if (!arguments.length) return labelFormat;\r\n    //    labelFormat = _;\r\n    //    return chart;\r\n    //};\r\n    //\r\n    //chart.labelThreshold = function(_) {\r\n    //    if (!arguments.length) return labelThreshold;\r\n    //    labelThreshold = _;\r\n    //    return chart;\r\n    //};\r\n    //============================================================\r\n\r\n\r\n    return chart;\r\n  };\r\n\r\n\r\n  nv.models.chordChart = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var chord = nv.models.chord(),\r\n        legend = nv.models.legend();\r\n\r\n    var margin = { top: 30, right: 20, bottom: 20, left: 20 },\r\n        width = null,\r\n        height = null,\r\n        showLegend = false,\r\n        color = nv.utils.defaultColor(),\r\n        tooltips = true,\r\n        tooltip = function (key, y, e, graph) {\r\n      return \"<h3>\" + key + \"</h3>\" + \"<p>\" + y + \"</p>\";\r\n    },\r\n        state = {},\r\n        defaultState = null,\r\n        noData = \"No Data Available.\",\r\n        dispatch = d3.dispatch(\"tooltipShow\", \"tooltipHide\", \"stateChange\", \"changeState\");\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Private Variables\r\n    //------------------------------------------------------------\r\n\r\n    var showTooltip = function (e, offsetElement) {\r\n      var tooltipLabel = chord.description()(e.point) || chord.x()(e.point);\r\n      var left = e.pos[0] + (offsetElement && offsetElement.offsetLeft || 0),\r\n          top = e.pos[1] + (offsetElement && offsetElement.offsetTop || 0),\r\n          y = chord.valueFormat()(chord.y()(e.point)),\r\n          content = tooltip(tooltipLabel, y, e, chart);\r\n\r\n      nv.tooltip.show([left, top], content, e.value < 0 ? \"n\" : \"s\", null, offsetElement);\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        //console.log(\"CHORD CHART\", data)\r\n\r\n\r\n        var container = d3.select(this),\r\n            that = this;\r\n\r\n        var availableWidth = (width || parseInt(container.style(\"width\")) || 960) - margin.left - margin.right,\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n\r\n        chart.update = function () {\r\n          container.transition().call(chart);\r\n        };\r\n        chart.container = this;\r\n\r\n        //set state.disabled\r\n        state.disabled = data.map(function (d) {\r\n          return !!d.disabled;\r\n        });\r\n\r\n        if (!defaultState) {\r\n          var key;\r\n          defaultState = {};\r\n          for (key in state) {\r\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\r\n          }\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        // Display No Data message if there's nothing to show.\r\n\r\n        if (!data || !data.length) {\r\n          var noDataText = container.selectAll(\".nv-noData\").data([noData]);\r\n\r\n          noDataText.enter().append(\"text\").attr(\"class\", \"nvd3 nv-noData\").attr(\"dy\", \"-.7em\").style(\"text-anchor\", \"middle\");\r\n\r\n          noDataText.attr(\"x\", margin.left + availableWidth / 2).attr(\"y\", margin.top + availableHeight / 2).text(function (d) {\r\n            return d;\r\n          });\r\n\r\n          return chart;\r\n        } else {\r\n          container.selectAll(\".nv-noData\").remove();\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-chordChart\").data([data]);\r\n        var gEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-chordChart\").append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-chordWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-legendWrap\");\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Legend\r\n\r\n        // if (showLegend) {\r\n        //   legend.width(availableWidth).key(function (d) {\r\n        //     return d.key;\r\n        //   }).min(2).color(function (d) {\r\n        //     return \"#238443\";\r\n        //   });\r\n\r\n        //   wrap.select(\".nv-legendWrap\").datum(data).call(legend);\r\n\r\n        //   if (margin.top != legend.height()) {\r\n        //     margin.top = legend.height();\r\n        //     availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n        //   }\r\n\r\n        //   wrap.select(\".nv-legendWrap\").attr(\"transform\", \"translate(0,\" + -margin.top + \")\");\r\n        // }\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        wrap.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Main Chart Component(s)\r\n\r\n        chord.width(availableWidth).height(availableHeight);\r\n\r\n\r\n        var chordWrap = g.select(\".nv-chordWrap\").datum([data]);\r\n\r\n        d3.transition(chordWrap).call(chord);\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //============================================================\r\n        // Event Handling/Dispatching (in chart's scope)\r\n        //------------------------------------------------------------\r\n\r\n        // legend.dispatch.on(\"stateChange\", function (newState) {\r\n        //   state = newState;\r\n        //   dispatch.stateChange(state);\r\n        //   chart.update();\r\n        // });\r\n\r\n        //chord.dispatch.on('elementMouseout.tooltip', function(e) {\r\n        //    dispatch.tooltipHide(e);\r\n        //});\r\n\r\n\r\n        // Update chart from a state object passed to event handler\r\n        dispatch.on(\"changeState\", function (e) {\r\n          if (typeof e.disabled !== \"undefined\") {\r\n            data.forEach(function (series, i) {\r\n              series.disabled = e.disabled[i];\r\n            });\r\n\r\n            state.disabled = e.disabled;\r\n          }\r\n\r\n          chart.update();\r\n        });\r\n\r\n        //============================================================\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n    //============================================================\r\n    // Event Handling/Dispatching (out of chart's scope)\r\n    //------------------------------------------------------------\r\n\r\n    //chord.dispatch.on('elementMouseover.tooltip', function(e) {\r\n    //    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\r\n    //    dispatch.tooltipShow(e);\r\n    //});\r\n\r\n    dispatch.on(\"tooltipShow\", function (e) {\r\n      if (tooltips) showTooltip(e);\r\n    });\r\n\r\n    dispatch.on(\"tooltipHide\", function () {\r\n      if (tooltips) nv.tooltip.cleanup();\r\n    });\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    // expose chart's sub-components\r\n    chart.legend = legend;\r\n    chart.dispatch = dispatch;\r\n    chart.chord = chord;\r\n\r\n    d3.rebind(chart, chord, \"valueFormat\", \"labelFormat\", \"values\", \"x\", \"y\", \"description\", \"id\", \"showLabels\", \"donutLabelsOutside\", \"chordLabelsOutside\", \"labelType\", \"donut\", \"donutRatio\", \"labelThreshold\");\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      legend.color(color);\r\n      chord.color(color);\r\n      return chart;\r\n    };\r\n\r\n    chart.showLegend = function (_) {\r\n      if (!arguments.length) return showLegend;\r\n      showLegend = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltips = function (_) {\r\n      if (!arguments.length) return tooltips;\r\n      tooltips = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltipContent = function (_) {\r\n      if (!arguments.length) return tooltip;\r\n      tooltip = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.state = function (_) {\r\n      if (!arguments.length) return state;\r\n      state = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultState = function (_) {\r\n      if (!arguments.length) return defaultState;\r\n      defaultState = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.noData = function (_) {\r\n      if (!arguments.length) return noData;\r\n      noData = _;\r\n      return chart;\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    return chart;\r\n  };\r\n\r\n\r\n  nv.models.legend = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var margin = { top: 5, right: 0, bottom: 5, left: 0 },\r\n        width = 400,\r\n        height = 20,\r\n        \r\n        getKey = function (d) {\r\n          return d.key;\r\n        },\r\n\r\n        color = nv.utils.defaultColor(),\r\n        colorIndex = function(d){return d.colorIndex},\r\n\r\n        align = true,\r\n        rightAlign = true,\r\n        updateState = true //If true, legend will update data.disabled and trigger a 'stateChange' dispatch.\r\n    ,\r\n        radioButtonMode = false //If true, clicking legend items will cause it to behave like a radio button. (only one can be selected at a time)\r\n    ,\r\n        dispatch = d3.dispatch(\"legendClick\", \"legendDblclick\", \"legendMouseover\", \"legendMouseout\", \"stateChange\"),\r\n        minEnabledSeries,\r\n        bgOpacity = 0,\r\n        isSlaveChart = false;\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        // console.log(\"update legend\", data)\r\n        var availableWidth = width - margin.left - margin.right,\r\n            container = d3.select(this);\r\n\r\n        // console.log(\"legend\", data)    \r\n\r\n        if(isSlaveChart){\r\n          if(radioButtonMode){\r\n            var b = true;\r\n            data.forEach(function(d){\r\n              if(b){\r\n                if(d.disabled == undefined || d.disabled == false) b = false;\r\n              }else{\r\n                d.disabled = true;\r\n              }\r\n            })\r\n          }\r\n          \r\n          data = data.filter(function(d){return !d.disabled})\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container.selectAll(\"g.nv-legend\").data([data]);\r\n        var gEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-legend\").append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        wrap.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        //------------------------------------------------------------\r\n\r\n        var bg = gEnter.selectAll(\"rect.nv-series-bg\").data([0]);\r\n        \r\n        // if(isSlaveChart){\r\n        //   data = data.filter((item) => !item.disabled)\r\n        // }\r\n\r\n        if(radioButtonMode){   \r\n          var c = 0;\r\n          data.forEach(function(d){\r\n            if(d.disabled == undefined){\r\n              d.disabled = true;\r\n              c++;\r\n            }\r\n          })\r\n          if(c==data.length){\r\n            data[0].disabled = false;\r\n          }\r\n        }  \r\n\r\n        var series = g.selectAll(\".nv-series\").data(function (d) {\r\n          // console.log(\"Form series\",d);\r\n          return d;\r\n        });\r\n\r\n        gEnter\r\n          .append(\"rect\")\r\n          .style(\"stroke-width\", 1)\r\n          .style(\"stroke-opacity\", 0)\r\n          .style(\"fill-opacity\", bgOpacity)\r\n          .style(\"fill\", \"#ffffff\")\r\n          .attr(\"class\", \"nv-series-bg\")\r\n          .attr(\"transform\", \"translate(-10,-25)\");\r\n\r\n        var seriesEnter = series\r\n          .enter()\r\n          .append(\"g\")\r\n          .attr(\"class\", \"nv-series\")\r\n        if(!isSlaveChart){\r\n          seriesEnter  \r\n            .on(\"mouseover\", function (d, i) {\r\n              dispatch.legendMouseover(d, i); //TODO: Make consistent with other event objects\r\n            })\r\n            .on(\"mouseout\", function (d, i) {\r\n              dispatch.legendMouseout(d, i);\r\n            })\r\n            .on(\"click\", function (d, i) {\r\n            //console.log(\"LEGEND\",updateState,radioButtonMode )\r\n              dispatch.legendClick(d, i);\r\n              if (updateState) {\r\n              if (radioButtonMode) {\r\n                // console.log(\"RADIO MODE select\", d);\r\n                //Radio button mode: set every series to disabled,\r\n                //  and enable the clicked series.\r\n                data.forEach(function (series) {\r\n                  series.disabled = true;\r\n                });\r\n                d.disabled = false;\r\n              } else {\r\n                d.disabled = !d.disabled;\r\n                var count = minEnabledSeries ? minEnabledSeries : 1;\r\n                if (data.filter(function (series) {\r\n                  return !series.disabled;\r\n                }).length < count) {\r\n                  //the default behavior of NVD3 legends is, if every single series\r\n                  // is disabled, turn all series' back on.\r\n                  data.forEach(function (series) {\r\n                    series.disabled = false;\r\n                  });\r\n                }\r\n              }\r\n              dispatch.stateChange({\r\n                disabled: data.map(function (d) {\r\n                  return !!d.disabled;\r\n                })\r\n              });\r\n            }\r\n          })\r\n          .on(\"dblclick\", function (d, i) {\r\n            dispatch.legendDblclick(d, i);\r\n            // console.log(\"dbl\",updateState,minEnabledSeries)\r\n            if (updateState && !minEnabledSeries) {\r\n              //the default behavior of NVD3 legends, when double clicking one,\r\n              // is to set all other series' to false, and make the double clicked series enabled.\r\n              // console.log(\"!!!\")\r\n              data.forEach(function (series) {\r\n                series.disabled = true;\r\n              });\r\n              d.disabled = false;\r\n              dispatch.stateChange({\r\n                disabled: data.map(function (d) {\r\n                  return !!d.disabled;\r\n                })\r\n              });\r\n            }\r\n          });\r\n        }  \r\n\r\n        if(!isSlaveChart){\r\n          seriesEnter.append(\"circle\")\r\n            .style(\"stroke-width\", 2)\r\n            .attr(\"class\", \"nv-legend-symbol\")\r\n            .attr(\"r\", 5);\r\n        } else {\r\n          seriesEnter.append(\"rect\")\r\n            .style(\"stroke-width\", 2)\r\n            .attr(\"class\", \"nv-legend-symbol\")\r\n            .attr(\"height\", 10)\r\n            .attr(\"width\", 10)\r\n            .attr(\"x\", -5)\r\n            .attr(\"y\", -5)\r\n        }    \r\n\r\n        seriesEnter.append(\"text\")\r\n          .attr(\"text-anchor\", \"start\")\r\n          .attr(\"class\", \"nv-legend-text\")\r\n          .attr(\"dy\", \".32em\")\r\n          .attr(\"dx\", \"8\");\r\n\r\n        // series.classed(\"disabled\", function (d) {\r\n        //   return d.disabled;\r\n        // });\r\n        \r\n        bg.exit().remove();\r\n        series.exit().remove();\r\n\r\n        series\r\n          .select(\".nv-legend-symbol\")\r\n          .style(\"fill\", function (d) {\r\n            return d.color || color(d,colorIndex(d));\r\n          })\r\n          .style(\"stroke\", function (d) {\r\n            return d.color || color(d,colorIndex(d));\r\n          })\r\n        \r\n        if(isSlaveChart){  \r\n          series\r\n            .select(\".nv-legend-symbol\")\r\n            .style(\"fill-opacity\",0.3)\r\n        }else{\r\n          series\r\n            .select(\".nv-legend-symbol\")\r\n            .style(\"fill-opacity\",function(d){return (d.disabled)? 0 : 0.3})\r\n            .classed(\"disabled\", function (d) {\r\n              return d.disabled;\r\n            });\r\n        }  \r\n        \r\n        // if(isSlaveChart){\r\n        //   series\r\n        //     .select(\"circle\")\r\n        //     .style(\"fill\", function (d, i) {\r\n        //       return d.color || color(d, i);\r\n        //     })\r\n        //     .style(\"stroke\", function (d, i) {\r\n        //       return d.color || color(d, i);\r\n        //     });\r\n        // } else {\r\n        //     series\r\n        //     .select(\"rect\")\r\n        //     .style(\"fill\", function (d, i) {\r\n        //       return d.color || color(d, i);\r\n        //     })\r\n        //     .style(\"stroke\", function (d, i) {\r\n        //       return d.color || color(d, i);\r\n        //     });\r\n        // }  \r\n\r\n        series.select(\"text\")\r\n          .text(getKey);\r\n\r\n\r\n        //TODO: implement fixed-width and max-width options (max-width is especially useful with the align option)\r\n\r\n        // NEW ALIGNING CODE, TODO: clean up\r\n        if (align) {\r\n          var seriesWidths = [];\r\n          series.each(function (d, i) {\r\n            var legendText = d3.select(this).select(\"text\");\r\n            var nodeTextLength;\r\n            try {\r\n              nodeTextLength = legendText.node().getComputedTextLength();\r\n              // If the legendText is display:none'd (nodeTextLength == 0), simulate an error so we approximate, instead\r\n              if (nodeTextLength <= 0) throw Error();\r\n            } catch (e) {\r\n              nodeTextLength = nv.utils.calcApproxTextWidth(legendText);\r\n            }\r\n\r\n            seriesWidths.push(nodeTextLength + 28); // 28 is ~ the width of the circle plus some padding\r\n          });\r\n\r\n          var seriesPerRow = 0;\r\n          var legendWidth = 0;\r\n          var columnWidths = [];\r\n\r\n          while (legendWidth < availableWidth && seriesPerRow < seriesWidths.length) {\r\n            columnWidths[seriesPerRow] = seriesWidths[seriesPerRow];\r\n            legendWidth += seriesWidths[seriesPerRow++];\r\n          }\r\n          if (seriesPerRow === 0) seriesPerRow = 1; //minimum of one series per row\r\n\r\n\r\n          while (legendWidth > availableWidth && seriesPerRow > 1) {\r\n            columnWidths = [];\r\n            seriesPerRow--;\r\n\r\n            for (var k = 0; k < seriesWidths.length; k++) {\r\n              if (seriesWidths[k] > (columnWidths[k % seriesPerRow] || 0)) columnWidths[k % seriesPerRow] = seriesWidths[k];\r\n            }\r\n\r\n            legendWidth = columnWidths.reduce(function (prev, cur, index, array) {\r\n              return prev + cur;\r\n            });\r\n          }\r\n\r\n          var xPositions = [];\r\n          for (var i = 0, curX = 0; i < seriesPerRow; i++) {\r\n            xPositions[i] = curX;\r\n            curX += columnWidths[i];\r\n          }\r\n\r\n          series.attr(\"transform\", function (d, i) {\r\n            return \"translate(\" + xPositions[i % seriesPerRow] + \",\" + (5 + Math.floor(i / seriesPerRow) * 20) + \")\";\r\n          });\r\n\r\n          //position legend as far right as possible within the total width\r\n          if (rightAlign) {\r\n            g.attr(\"transform\", \"translate(\" + (width - margin.right - legendWidth) + \",\" + margin.top + \")\");\r\n          } else {\r\n            g.attr(\"transform\", \"translate(0\" + \",\" + margin.top + \")\");\r\n          }\r\n\r\n          height = margin.top + margin.bottom + Math.ceil(seriesWidths.length / seriesPerRow) * 20;\r\n          gEnter.select(\"rect.nv-series-bg\").transition().attr(\"width\", width).attr(\"height\", height + 25);\r\n        } else {\r\n          var ypos = 5,\r\n              newxpos = 5,\r\n              maxwidth = 0,\r\n              xpos;\r\n          series.attr(\"transform\", function (d, i) {\r\n            var length = d3.select(this).select(\"text\").node().getComputedTextLength() + 28;\r\n            xpos = newxpos;\r\n\r\n            if (width < margin.left + margin.right + xpos + length) {\r\n              newxpos = xpos = 5;\r\n              ypos += 20;\r\n            }\r\n\r\n            newxpos += length;\r\n            if (newxpos > maxwidth) maxwidth = newxpos;\r\n\r\n            return \"translate(\" + xpos + \",\" + ypos + \")\";\r\n          });\r\n\r\n          //position legend as far right as possible within the total width\r\n          g.attr(\"transform\", \"translate(\" + (width - margin.right - maxwidth) + \",\" + margin.top + \")\");\r\n\r\n          height = margin.top + margin.bottom + ypos + 15;\r\n          gEnter.select(\"rect.nv-series-bg\").transition().attr(\"width\", width).attr(\"height\", height + 25);\r\n        }\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    chart.dispatch = dispatch;\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n    \r\n    chart.slaveChart = function (_) {\r\n      if (!arguments.length) return isSlaveChart;\r\n      isSlaveChart = _;\r\n      // console.log(\"Set slaveChart\",isSlaveChart)\r\n      return chart;\r\n    };\r\n\r\n    chart.backgroundOpacity  = function (_) {\r\n      if (!arguments.length) return bgOpacity;\r\n      bgOpacity = _;\r\n      return chart;\r\n    };\r\n    \r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.key = function (_) {\r\n      if (!arguments.length) return getKey;\r\n      getKey = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.colorIndex = function (_) {\r\n      if (!arguments.length) return colorIndex;\r\n      colorIndex = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.min = function (_) {\r\n      if (!arguments.length) return minEnabledSeries;\r\n      minEnabledSeries = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.align = function (_) {\r\n      if (!arguments.length) return align;\r\n      align = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.rightAlign = function (_) {\r\n      if (!arguments.length) return rightAlign;\r\n      rightAlign = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.updateState = function (_) {\r\n      if (!arguments.length) return updateState;\r\n      updateState = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.radioButtonMode = function (_) {\r\n      if (!arguments.length) return radioButtonMode;\r\n      //console.log(\"set radio mode\", _);\r\n      radioButtonMode = _;\r\n      return chart;\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    return chart;\r\n  };\r\n\r\n  nv.models.colorScheme = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var margin = { top: 5, right: 20, bottom: 5, left: 0 },\r\n        width = 400,\r\n        height = 20\r\n    //, getKey = function (d) {\r\n    //  return d.key\r\n    //}\r\n    ,\r\n        color = nv.utils.defaultColor(),\r\n        align = true,\r\n        rightAlign = true\r\n    //, updateState = true   //If true, legend will update data.disabled and trigger a 'stateChange' dispatch.\r\n    //, radioButtonMode = false   //If true, clicking legend items will cause it to behave like a radio button. (only one can be selected at a time)\r\n    //, dispatch = d3.dispatch('legendClick', 'legendDblclick', 'legendMouseover', 'legendMouseout', 'stateChange')\r\n    //, minEnabledSeries\r\n    \r\n\r\n\r\n    ;\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        // console.log(\"Colors\", data)\r\n        // prepare data\r\n        var data1 = data.filter(function (item) {\r\n          return item.disabled !== true;\r\n        })[0];\r\n        \r\n        // console.log(\"Colors select serie\", data1)\r\n\r\n        data1 = (data1) ? data1 : data[0]; \r\n        \r\n        var availableWidth = width - margin.left - margin.right,\r\n        \r\n        container = d3.select(this);\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container\r\n          .selectAll(\"g.nv-colorScheme\")\r\n          .data([data1]);\r\n\r\n        wrap  \r\n          .enter()\r\n          .append(\"g\")\r\n          .attr(\"class\", \"nvd3 nv-colorScheme\")\r\n          .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n                   \r\n        var gColorScheme = container.select(\"g.nv-colorScheme\");\r\n\r\n        \r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        var bg = gColorScheme\r\n          .selectAll(\"rect.nv-color-bg\")\r\n          .data([0]);\r\n\r\n        \r\n        var values = gColorScheme\r\n          .selectAll(\".nv-color-title\")\r\n          .data([data1.min.toFixed(2), data1.max.toFixed(2)]);\r\n\r\n        values.exit().remove();\r\n                  \r\n\r\n        var cldata = [];\r\n        for(var i=0; i<data1.cats; i++){ cldata.push(i)}\r\n        \r\n        var colors = gColorScheme\r\n          .selectAll(\"rect.nv-color\")\r\n          .data(cldata);\r\n          \r\n        var scaleWidth = 0.15 * availableWidth;\r\n        scaleWidth = (scaleWidth < 90) ? 90 : scaleWidth;\r\n        scaleWidth = (scaleWidth > 200) ? 200 : scaleWidth;\r\n\r\n        var scaleHeight = scaleWidth/10;\r\n        scaleHeight = (scaleHeight < 5) ? 5 : scaleHeight;\r\n        scaleHeight = (scaleHeight > 8) ? 8 : scaleHeight;\r\n          \r\n        var rectWidth = scaleWidth / data1.cats;\r\n       \r\n        bg.exit().remove();\r\n        colors.exit().remove();\r\n        \r\n\r\n\r\n        bg\r\n          .enter()\r\n          .append(\"rect\")\r\n          .attr(\"class\", \"nv-color-bg\")\r\n          .attr(\"fill\", \"#ffffff\")\r\n          .attr(\"height\", function(d){return (scaleWidth/10)+20})\r\n          .attr(\"width\", function(d){return scaleWidth+20})\r\n          .attr(\"transform\", \"translate(10,-15)\")\r\n          .style(\"stroke\", \"#777\")\r\n          .style(\"stroke-opacity\", 0.7)\r\n          .style(\"stroke-width\", 0.3) \r\n          .style(\"fill-opacity\", 0.85);  \r\n\r\n\r\n          \r\n\r\n        colors\r\n          .enter()\r\n          .append(\"rect\")\r\n          .attr(\"class\", \"nv-color\")\r\n          .attr(\"width\", rectWidth)\r\n          .attr(\"height\", scaleHeight)\r\n          .attr(\"width\", rectWidth)\r\n          .attr(\"fill\", color)\r\n          .attr(\"opacity\", 1)\r\n          .style(\"stroke\", \"#777\")\r\n          .style(\"stroke-opacity\", 0.7)\r\n          .style(\"stroke-width\", 0.3) \r\n          .attr(\"transform\", function (d, i) {\r\n            var x = rectWidth * i + 20;\r\n            return \"translate(\" + x + \",\" + 0 + \")\";\r\n          });\r\n        \r\n        values\r\n         .enter()\r\n         .append(\"text\")\r\n         .attr(\"class\", \"nv-color-title\")\r\n         .attr(\"dy\", \"-0.3em\")\r\n         .style(\"font-size\",\"x-small\")\r\n         .style(\"font-stretch\",\"extra-condensed\");\r\n         \r\n         values\r\n          .transition()\r\n          .text(function(d){return d})\r\n          .style(\"text-anchor\", function(d,i){return (i==0)?\"start\":\"end\"})\r\n           .attr(\"transform\", function (d, i) {\r\n              var x = (rectWidth*data1.cats) * i + 20;\r\n              return \"translate(\" + x + \",\" + 0 + \")\";\r\n            });\r\n        \r\n        height = margin.top + margin.bottom + 15;\r\n\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    //chart.dispatch = dispatch;\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.align = function (_) {\r\n      if (!arguments.length) return align;\r\n      align = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.rightAlign = function (_) {\r\n      if (!arguments.length) return rightAlign;\r\n      rightAlign = _;\r\n      return chart;\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    return chart;\r\n  };\r\n\r\n  // nv.models.axis = function () {\r\n  //   \"use strict\";\r\n  //   //============================================================\r\n  //   // Public Variables with Default Settings\r\n  //   //------------------------------------------------------------\r\n\r\n  //   var axis = d3.svg.axis();\r\n\r\n  //   var margin = { top: 0, right: 0, bottom: 0, left: 0 },\r\n  //       width = 75 //only used for tickLabel currently\r\n  //   ,\r\n  //       height = 60 //only used for tickLabel currently\r\n  //   ,\r\n  //       scale = d3.scale.linear(),\r\n  //       axisLabelText = null,\r\n  //       showMaxMin = true //TODO: showMaxMin should be disabled on all ordinal scaled axes\r\n  //   ,\r\n  //       highlightZero = true,\r\n  //       rotateLabels = 0,\r\n  //       rotateYLabel = true,\r\n  //       staggerLabels = false,\r\n  //       isOrdinal = false,\r\n  //       ticks = null,\r\n  //       axisLabelDistance = 12 //The larger this number is, the closer the axis label is to the axis.\r\n  //   ;\r\n\r\n  //   axis.scale(scale).orient(\"bottom\").tickFormat(function (d) {\r\n  //     return d;\r\n  //   });\r\n\r\n  //   //============================================================\r\n\r\n\r\n  //   //============================================================\r\n  //   // Private Variables\r\n  //   //------------------------------------------------------------\r\n\r\n  //   var scale0;\r\n\r\n  //   //============================================================\r\n\r\n\r\n  //   function chart(selection) {\r\n  //     selection.each(function (data) {\r\n  //       var container = d3.select(this);\r\n\r\n\r\n  //       //------------------------------------------------------------\r\n  //       // Setup containers and skeleton of chart\r\n\r\n  //       var wrap = container.selectAll(\"g.nv-wrap.nv-axis\").data([data]);\r\n  //       var wrapEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-axis\");\r\n  //       var gEnter = wrapEnter.append(\"g\");\r\n  //       var g = wrap.select(\"g\");\r\n\r\n  //       //------------------------------------------------------------\r\n\r\n\r\n  //       if (ticks !== null) axis.ticks(ticks);else if (axis.orient() == \"top\" || axis.orient() == \"bottom\") axis.ticks(Math.abs(scale.range()[1] - scale.range()[0]) / 100);\r\n\r\n\r\n  //       //TODO: consider calculating width/height based on whether or not label is added, for reference in charts using this component\r\n\r\n\r\n  //       g.transition().call(axis);\r\n\r\n  //       scale0 = scale0 || axis.scale();\r\n\r\n  //       var fmt = axis.tickFormat();\r\n  //       if (fmt == null) {\r\n  //         fmt = scale0.tickFormat();\r\n  //       }\r\n\r\n  //       var axisLabel = g.selectAll(\"text.nv-axislabel\").data([axisLabelText || null]);\r\n  //       axisLabel.exit().remove();\r\n  //       switch (axis.orient()) {\r\n  //         case \"top\":\r\n  //           axisLabel.enter().append(\"text\").attr(\"class\", \"nv-axislabel\");\r\n  //           var w = scale.range().length == 2 ? scale.range()[1] : scale.range()[scale.range().length - 1] + (scale.range()[1] - scale.range()[0]);\r\n  //           axisLabel.attr(\"text-anchor\", \"middle\").attr(\"y\", 0).attr(\"x\", w / 2);\r\n  //           if (showMaxMin) {\r\n  //             var axisMaxMin = wrap.selectAll(\"g.nv-axisMaxMin\").data(scale.domain());\r\n  //             axisMaxMin.enter().append(\"g\").attr(\"class\", \"nv-axisMaxMin\").append(\"text\");\r\n  //             axisMaxMin.exit().remove();\r\n  //             axisMaxMin.attr(\"transform\", function (d, i) {\r\n  //               return \"translate(\" + scale(d) + \",0)\";\r\n  //             }).select(\"text\")\r\n  //               .attr(\"dy\", \"-0.5em\")\r\n  //               .attr(\"y\", -axis.tickPadding())\r\n  //               .attr(\"text-anchor\", \"middle\")\r\n  //               .style(\"font-stretch\", \"extra-condensed\")\r\n  //               .text(function (d, i) {\r\n  //               var v = fmt(d);\r\n  //               return (\"\" + v).match(\"NaN\") ? \"\" : new Number(v).toFixed(2);\r\n  //             });\r\n  //             axisMaxMin.transition().attr(\"transform\", function (d, i) {\r\n  //               return \"translate(\" + scale.range()[i] + \",0)\";\r\n  //             });\r\n  //           }\r\n  //           break;\r\n  //         case \"bottom\":\r\n  //           var xLabelMargin = 30;\r\n  //           var maxTextWidth = 30;\r\n  //           var xTicks = g.selectAll(\"g\").select(\"text\");\r\n  //           if (rotateLabels % 360) {\r\n  //             //Calculate the longest xTick width\r\n  //             xTicks.each(function (d, i) {\r\n  //               var width = this.getBBox().width;\r\n  //               if (width > maxTextWidth) maxTextWidth = width;\r\n  //             });\r\n  //             //Convert to radians before calculating sin. Add 30 to margin for healthy padding.\r\n  //             var sin = Math.abs(Math.sin(rotateLabels * Math.PI / 180));\r\n  //             var xLabelMargin = (sin ? sin * maxTextWidth : maxTextWidth) + 30;\r\n  //             //Rotate all xTicks\r\n  //             xTicks.attr(\"transform\", function (d, i, j) {\r\n  //               return \"rotate(\" + rotateLabels + \" 0,0)\";\r\n  //             }).style(\"text-anchor\", rotateLabels % 360 > 0 ? \"start\" : \"end\");\r\n  //           }\r\n  //           axisLabel.enter().append(\"text\").attr(\"class\", \"nv-axislabel\");\r\n  //           var w = scale.range().length == 2 ? scale.range()[1] : scale.range()[scale.range().length - 1] + (scale.range()[1] - scale.range()[0]);\r\n  //           axisLabel.attr(\"text-anchor\", \"middle\").attr(\"y\", xLabelMargin).attr(\"x\", w / 2);\r\n  //           if (showMaxMin) {\r\n  //             //if (showMaxMin && !isOrdinal) {\r\n  //             var axisMaxMin = wrap.selectAll(\"g.nv-axisMaxMin\")\r\n  //             //.data(scale.domain())\r\n  //             .data([scale.domain()[0], scale.domain()[scale.domain().length - 1]]);\r\n  //             axisMaxMin.enter().append(\"g\").attr(\"class\", \"nv-axisMaxMin\").append(\"text\");\r\n  //             axisMaxMin.exit().remove();\r\n  //             axisMaxMin.attr(\"transform\", function (d, i) {\r\n  //               return \"translate(\" + (scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0)) + \",0)\";\r\n  //             }).select(\"text\").attr(\"dy\", \".71em\").attr(\"y\", axis.tickPadding()).attr(\"transform\", function (d, i, j) {\r\n  //               return \"rotate(\" + rotateLabels + \" 0,0)\";\r\n  //             }).style(\"text-anchor\", rotateLabels ? rotateLabels % 360 > 0 ? \"start\" : \"end\" : \"middle\")\r\n  //               .style(\"font-stretch\", \"extra-condensed\")\r\n  //               .text(function (d, i) {\r\n  //               var v = fmt(d);\r\n  //               return (\"\" + v).match(\"NaN\") ? \"\" :new Number(v).toFixed(2);\r\n\r\n  //             });\r\n  //             axisMaxMin.transition().attr(\"transform\", function (d, i) {\r\n  //               //return 'translate(' + scale.range()[i] + ',0)'\r\n  //               //return 'translate(' + scale(d) + ',0)'\r\n  //               return \"translate(\" + (scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0)) + \",0)\";\r\n  //             });\r\n  //           }\r\n  //           if (staggerLabels) xTicks.attr(\"transform\", function (d, i) {\r\n  //             return \"translate(0,\" + (i % 2 == 0 ? \"0\" : \"12\") + \")\";\r\n  //           });\r\n\r\n  //           break;\r\n  //         case \"right\":\r\n  //           axisLabel.enter().append(\"text\").attr(\"class\", \"nv-axislabel\");\r\n  //           axisLabel.style(\"text-anchor\", rotateYLabel ? \"middle\" : \"begin\").attr(\"transform\", rotateYLabel ? \"rotate(90)\" : \"\").attr(\"y\", rotateYLabel ? -Math.max(margin.right, width) + 12 : -10) //TODO: consider calculating this based on largest tick width... OR at least expose this on chart\r\n  //           .attr(\"x\", rotateYLabel ? scale.range()[0] / 2 : axis.tickPadding());\r\n  //           if (showMaxMin) {\r\n  //             var axisMaxMin = wrap.selectAll(\"g.nv-axisMaxMin\").data(scale.domain());\r\n  //             axisMaxMin.enter().append(\"g\").attr(\"class\", \"nv-axisMaxMin\").append(\"text\").style(\"opacity\", 0);\r\n  //             axisMaxMin.exit().remove();\r\n  //             axisMaxMin.attr(\"transform\", function (d, i) {\r\n  //               return \"translate(0,\" + scale(d) + \")\";\r\n  //             }).select(\"text\").attr(\"dy\", \".32em\").attr(\"y\", 0).attr(\"x\", axis.tickPadding())\r\n  //               .style(\"text-anchor\", \"start\")\r\n  //               .style(\"font-stretch\", \"extra-condensed\")\r\n  //               .text(function (d, i) {\r\n  //               var v = fmt(d);\r\n  //               return (\"\" + v).match(\"NaN\") ? \"\" : new Number(v).toFixed(2);\r\n\r\n  //             });\r\n  //             axisMaxMin.transition().attr(\"transform\", function (d, i) {\r\n  //               return \"translate(0,\" + scale.range()[i] + \")\";\r\n  //             }).select(\"text\").style(\"opacity\", 1);\r\n  //           }\r\n  //           break;\r\n  //         case \"left\":\r\n  //           /*\r\n  //            //For dynamically placing the label. Can be used with dynamically-sized chart axis margins\r\n  //            var yTicks = g.selectAll('g').select(\"text\");\r\n  //            yTicks.each(function(d,i){\r\n  //            var labelPadding = this.getBBox().width + axis.tickPadding() + 16;\r\n  //            if(labelPadding > width) width = labelPadding;\r\n  //            });\r\n  //            */\r\n  //           axisLabel.enter().append(\"text\").attr(\"class\", \"nv-axislabel\");\r\n  //           axisLabel.style(\"text-anchor\", rotateYLabel ? \"middle\" : \"end\").attr(\"transform\", rotateYLabel ? \"rotate(-90)\" : \"\").attr(\"y\", rotateYLabel ? -Math.max(margin.left, width) + axisLabelDistance : -10) //TODO: consider calculating this based on largest tick width... OR at least expose this on chart\r\n  //           .attr(\"x\", rotateYLabel ? -scale.range()[0] / 2 : -axis.tickPadding());\r\n  //           if (showMaxMin) {\r\n  //             var axisMaxMin = wrap.selectAll(\"g.nv-axisMaxMin\").data(scale.domain());\r\n  //             axisMaxMin.enter().append(\"g\").attr(\"class\", \"nv-axisMaxMin\").append(\"text\").style(\"opacity\", 0);\r\n  //             axisMaxMin.exit().remove();\r\n  //             axisMaxMin.attr(\"transform\", function (d, i) {\r\n  //               return \"translate(0,\" + scale0(d) + \")\";\r\n  //             }).select(\"text\")\r\n  //               .attr(\"dy\", \".32em\")\r\n  //               .attr(\"y\", 0)\r\n  //               .attr(\"x\", -axis.tickPadding())\r\n  //               .attr(\"text-anchor\", \"end\")\r\n  //               .style(\"font-stretch\", \"extra-condensed\")\r\n  //               .text(function (d, i) {\r\n  //                 // /////////////////////////////////\r\n  //                 var v = fmt(d);\r\n  //                 if((\"\" + v).match(\"NaN\")){\r\n  //                   return \"\"\r\n  //                 }else{\r\n  //                   return new Number(v).toFixed(2);\r\n\r\n  //                 }\r\n  //                 // return (\"\" + v).match(\"NaN\") ? \"\" : v;\r\n  //               });\r\n              \r\n  //             axisMaxMin.transition().attr(\"transform\", function (d, i) {\r\n  //               return \"translate(0,\" + scale.range()[i] + \")\";\r\n  //             }).select(\"text\").style(\"opacity\", 1);\r\n  //           }\r\n  //           break;\r\n  //       }\r\n  //       axisLabel.text(function (d) {\r\n  //         return d;\r\n  //       });\r\n\r\n\r\n  //       if (showMaxMin && (axis.orient() === \"left\" || axis.orient() === \"right\")) {\r\n  //         //check if max and min overlap other values, if so, hide the values that overlap\r\n  //         g.selectAll(\"g\") // the g's wrapping each tick\r\n  //         .each(function (d, i) {\r\n  //           d3.select(this).select(\"text\").attr(\"opacity\", 1);\r\n  //           if (scale(d) < scale.range()[1] + 10 || scale(d) > scale.range()[0] - 10) {\r\n  //             // 10 is assuming text height is 16... if d is 0, leave it!\r\n  //             if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\r\n  //               d3.select(this).attr(\"opacity\", 0);\r\n\r\n  //             d3.select(this).select(\"text\").attr(\"opacity\", 0); // Don't remove the ZERO line!!\r\n  //           }\r\n  //         });\r\n\r\n  //         //if Max and Min = 0 only show min, Issue #281\r\n  //         if (scale.domain()[0] == scale.domain()[1] && scale.domain()[0] == 0) wrap.selectAll(\"g.nv-axisMaxMin\").style(\"opacity\", function (d, i) {\r\n  //           return !i ? 1 : 0;\r\n  //         });\r\n  //       }\r\n\r\n  //       if (showMaxMin && (axis.orient() === \"top\" || axis.orient() === \"bottom\")) {\r\n  //         var maxMinRange = [];\r\n  //         wrap.selectAll(\"g.nv-axisMaxMin\").each(function (d, i) {\r\n  //           try {\r\n  //             if (i) // i== 1, max position\r\n  //               maxMinRange.push(scale(d) - this.getBBox().width - 4);else // i==0, min position\r\n  //               maxMinRange.push(scale(d) + this.getBBox().width + 4);\r\n  //           } catch (err) {\r\n  //             if (i) // i== 1, max position\r\n  //               maxMinRange.push(scale(d) - 4);else // i==0, min position\r\n  //               maxMinRange.push(scale(d) + 4);\r\n  //           }\r\n  //         });\r\n  //         g.selectAll(\"g\") // the g's wrapping each tick\r\n  //         .each(function (d, i) {\r\n  //           if (scale(d) < maxMinRange[0] || scale(d) > maxMinRange[1]) {\r\n  //             if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\r\n  //               d3.select(this).remove();else d3.select(this).select(\"text\").remove(); // Don't remove the ZERO line!!\r\n  //           }\r\n  //         });\r\n  //       }\r\n\r\n\r\n  //       //highlight zero line ... Maybe should not be an option and should just be in CSS?\r\n  //       if (highlightZero) g.selectAll(\".tick\").filter(function (d) {\r\n  //         return !parseFloat(Math.round(d.__data__ * 100000) / 1000000) && d.__data__ !== undefined;\r\n  //       }) //this is because sometimes the 0 tick is a very small fraction, TODO: think of cleaner technique\r\n  //       .classed(\"zero\", true);\r\n\r\n  //       //store old scales for use in transitions on update\r\n  //       scale0 = scale.copy();\r\n  //     });\r\n\r\n  //     return chart;\r\n  //   }\r\n\r\n\r\n  //   //============================================================\r\n  //   // Expose Public Variables\r\n  //   //------------------------------------------------------------\r\n\r\n  //   // expose chart's sub-components\r\n  //   chart.axis = axis;\r\n\r\n  //   d3.rebind(chart, axis, \"orient\", \"tickValues\", \"tickSubdivide\", \"tickSize\", \"tickPadding\", \"tickFormat\");\r\n  //   d3.rebind(chart, scale, \"domain\", \"range\", \"rangeBand\", \"rangeBands\"); //these are also accessible by chart.scale(), but added common ones directly for ease of use\r\n\r\n  //   chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n  //   chart.margin = function (_) {\r\n  //     if (!arguments.length) return margin;\r\n  //     margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n  //     margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n  //     margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n  //     margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.width = function (_) {\r\n  //     if (!arguments.length) return width;\r\n  //     width = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.ticks = function (_) {\r\n  //     if (!arguments.length) return ticks;\r\n  //     ticks = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.height = function (_) {\r\n  //     if (!arguments.length) return height;\r\n  //     height = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.axisLabel = function (_) {\r\n  //     if (!arguments.length) return axisLabelText;\r\n  //     axisLabelText = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.showMaxMin = function (_) {\r\n  //     if (!arguments.length) return showMaxMin;\r\n  //     showMaxMin = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.highlightZero = function (_) {\r\n  //     if (!arguments.length) return highlightZero;\r\n  //     highlightZero = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.scale = function (_) {\r\n  //     if (!arguments.length) return scale;\r\n  //     scale = _;\r\n  //     axis.scale(scale);\r\n  //     isOrdinal = typeof scale.rangeBands === \"function\";\r\n  //     d3.rebind(chart, scale, \"domain\", \"range\", \"rangeBand\", \"rangeBands\");\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.rotateYLabel = function (_) {\r\n  //     if (!arguments.length) return rotateYLabel;\r\n  //     rotateYLabel = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.rotateLabels = function (_) {\r\n  //     if (!arguments.length) return rotateLabels;\r\n  //     rotateLabels = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.staggerLabels = function (_) {\r\n  //     if (!arguments.length) return staggerLabels;\r\n  //     staggerLabels = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   chart.axisLabelDistance = function (_) {\r\n  //     if (!arguments.length) return axisLabelDistance;\r\n  //     axisLabelDistance = _;\r\n  //     return chart;\r\n  //   };\r\n\r\n  //   //============================================================\r\n\r\n\r\n  //   return chart;\r\n  // };\r\n\r\nnv.models.axis = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var axis = d3.svg.axis();\r\n\r\n    var margin = { top: 0, right: 0, bottom: 0, left: 0 },\r\n        width = 75 //only used for tickLabel currently\r\n    ,\r\n        height = 60 //only used for tickLabel currently\r\n    ,\r\n        scale = d3.scale.linear(),\r\n        axisLabelText = null,\r\n        showMaxMin = true //TODO: showMaxMin should be disabled on all ordinal scaled axes\r\n    ,\r\n        highlightZero = true,\r\n        rotateLabels = 0,\r\n        rotateYLabel = true,\r\n        staggerLabels = false,\r\n        isOrdinal = false,\r\n        ticks = null,\r\n        axisLabelDistance = 12 //The larger this number is, the closer the axis label is to the axis.\r\n    ;\r\n\r\n    axis.scale(scale).orient(\"bottom\").tickFormat(\r\n      // d3.format(\"e\")\r\n      function (d) {\r\n        if(isNaN(new Number(d))) return d;\r\n        // var power = 0;\r\n        var m = new Number(d);\r\n        // while(m>10){power++; m =m/10}\r\n        if(m<9999){\r\n\r\n          if(isNaN(new Number(d))) return d;\r\n          m = new Number(d)\r\n          // console.log(d,m,new Number(m.toFixed(0)))\r\n          \r\n          return (Math.abs(new Number(m.toFixed(0))-m) < 0.001 )? m.toFixed(0) : m.toFixed(2)\r\n        }\r\n        if(m<9999999){return (d/1000).toFixed(2)+\"K\"}\r\n        if(m<9999999999){return (d/1000000).toFixed(2)+\"M\"}\r\n        return  (d/1000000000).toFixed(2)+\"G\" \r\n        // return d;\r\n      }\r\n    );\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Private Variables\r\n    //------------------------------------------------------------\r\n\r\n    var scale0;\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        var container = d3.select(this);\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-axis\").data([data]);\r\n        var wrapEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-axis\");\r\n        var gEnter = wrapEnter.append(\"g\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        if (ticks !== null) axis.ticks(ticks);else if (axis.orient() == \"top\" || axis.orient() == \"bottom\") axis.ticks(Math.abs(scale.range()[1] - scale.range()[0]) / 100);\r\n\r\n\r\n        //TODO: consider calculating width/height based on whether or not label is added, for reference in charts using this component\r\n\r\n\r\n        g.transition().call(axis);\r\n\r\n        scale0 = scale0 || axis.scale();\r\n\r\n        var fmt = axis.tickFormat();\r\n        if (fmt == null) {\r\n          fmt = scale0.tickFormat();\r\n        }\r\n\r\n        var axisLabel = g.selectAll(\"text.nv-axislabel\").data([axisLabelText || null]);\r\n        axisLabel.exit().remove();\r\n        switch (axis.orient()) {\r\n          case \"top\":\r\n            axisLabel.enter().append(\"text\").attr(\"class\", \"nv-axislabel\");\r\n            var w = scale.range().length == 2 ? scale.range()[1] : scale.range()[scale.range().length - 1] + (scale.range()[1] - scale.range()[0]);\r\n            axisLabel.attr(\"text-anchor\", \"middle\").attr(\"y\", 0).attr(\"x\", w / 2);\r\n            if (showMaxMin) {\r\n              var axisMaxMin = wrap.selectAll(\"g.nv-axisMaxMin\").data(scale.domain());\r\n              axisMaxMin.enter().append(\"g\").attr(\"class\", \"nv-axisMaxMin\").append(\"text\");\r\n              axisMaxMin.exit().remove();\r\n              axisMaxMin.attr(\"transform\", function (d, i) {\r\n                return \"translate(\" + scale(d) + \",0)\";\r\n              }).select(\"text\")\r\n                .attr(\"dy\", \"-0.5em\")\r\n                .attr(\"y\", -axis.tickPadding())\r\n                .attr(\"text-anchor\", \"middle\")\r\n                .text(function (d, i) {\r\n                var v = fmt(d);\r\n                return (\"\" + v).match(\"NaN\") ? \"\" : v;\r\n              });\r\n              axisMaxMin.transition().attr(\"transform\", function (d, i) {\r\n                return \"translate(\" + scale.range()[i] + \",0)\";\r\n              });\r\n            }\r\n            break;\r\n          case \"bottom\":\r\n            var xLabelMargin = 30;\r\n            var maxTextWidth = 30;\r\n            var xTicks = g.selectAll(\"g\").select(\"text\");\r\n            if (rotateLabels % 360) {\r\n              //Calculate the longest xTick width\r\n              xTicks.each(function (d, i) {\r\n                var width = this.getBBox().width;\r\n                if (width > maxTextWidth) maxTextWidth = width;\r\n              });\r\n              //Convert to radians before calculating sin. Add 30 to margin for healthy padding.\r\n              var sin = Math.abs(Math.sin(rotateLabels * Math.PI / 180));\r\n              var xLabelMargin = (sin ? sin * maxTextWidth : maxTextWidth) + 30;\r\n              //Rotate all xTicks\r\n              xTicks.attr(\"transform\", function (d, i, j) {\r\n                return \"rotate(\" + rotateLabels + \" 0,0)\";\r\n              }).style(\"text-anchor\", rotateLabels % 360 > 0 ? \"start\" : \"end\");\r\n            }\r\n            axisLabel.enter().append(\"text\").attr(\"class\", \"nv-axislabel\");\r\n            var w = scale.range().length == 2 ? scale.range()[1] : scale.range()[scale.range().length - 1] + (scale.range()[1] - scale.range()[0]);\r\n            axisLabel.attr(\"text-anchor\", \"middle\").attr(\"y\", xLabelMargin).attr(\"x\", w / 2);\r\n            if (showMaxMin) {\r\n              //if (showMaxMin && !isOrdinal) {\r\n              var axisMaxMin = wrap.selectAll(\"g.nv-axisMaxMin\")\r\n              //.data(scale.domain())\r\n              .data([scale.domain()[0], scale.domain()[scale.domain().length - 1]]);\r\n              axisMaxMin.enter().append(\"g\").attr(\"class\", \"nv-axisMaxMin\").append(\"text\");\r\n              axisMaxMin.exit().remove();\r\n              axisMaxMin.attr(\"transform\", function (d, i) {\r\n                return \"translate(\" + (scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0)) + \",0)\";\r\n              }).select(\"text\").attr(\"dy\", \".71em\").attr(\"y\", axis.tickPadding()).attr(\"transform\", function (d, i, j) {\r\n                return \"rotate(\" + rotateLabels + \" 0,0)\";\r\n              }).style(\"text-anchor\", rotateLabels ? rotateLabels % 360 > 0 ? \"start\" : \"end\" : \"middle\").text(function (d, i) {\r\n                var v = fmt(d);\r\n                return (\"\" + v).match(\"NaN\") ? \"\" : v;\r\n              });\r\n              axisMaxMin.transition().attr(\"transform\", function (d, i) {\r\n                //return 'translate(' + scale.range()[i] + ',0)'\r\n                //return 'translate(' + scale(d) + ',0)'\r\n                return \"translate(\" + (scale(d) + (isOrdinal ? scale.rangeBand() / 2 : 0)) + \",0)\";\r\n              });\r\n            }\r\n            if (staggerLabels) xTicks.attr(\"transform\", function (d, i) {\r\n              return \"translate(0,\" + (i % 2 == 0 ? \"0\" : \"12\") + \")\";\r\n            });\r\n\r\n            break;\r\n          case \"right\":\r\n            axisLabel.enter().append(\"text\").attr(\"class\", \"nv-axislabel\");\r\n            axisLabel.style(\"text-anchor\", rotateYLabel ? \"middle\" : \"begin\").attr(\"transform\", rotateYLabel ? \"rotate(90)\" : \"\").attr(\"y\", rotateYLabel ? -Math.max(margin.right, width) + 12 : -10) //TODO: consider calculating this based on largest tick width... OR at least expose this on chart\r\n            .attr(\"x\", rotateYLabel ? scale.range()[0] / 2 : axis.tickPadding());\r\n            if (showMaxMin) {\r\n              var axisMaxMin = wrap.selectAll(\"g.nv-axisMaxMin\").data(scale.domain());\r\n              axisMaxMin.enter().append(\"g\").attr(\"class\", \"nv-axisMaxMin\").append(\"text\").style(\"opacity\", 0);\r\n              axisMaxMin.exit().remove();\r\n              axisMaxMin.attr(\"transform\", function (d, i) {\r\n                return \"translate(0,\" + scale(d) + \")\";\r\n              }).select(\"text\").attr(\"dy\", \".32em\").attr(\"y\", 0).attr(\"x\", axis.tickPadding()).style(\"text-anchor\", \"start\").text(function (d, i) {\r\n                var v = fmt(d);\r\n                return (\"\" + v).match(\"NaN\") ? \"\" : v;\r\n              });\r\n              axisMaxMin.transition().attr(\"transform\", function (d, i) {\r\n                return \"translate(0,\" + scale.range()[i] + \")\";\r\n              }).select(\"text\").style(\"opacity\", 1);\r\n            }\r\n            break;\r\n          case \"left\":\r\n            /*\r\n             //For dynamically placing the label. Can be used with dynamically-sized chart axis margins\r\n             var yTicks = g.selectAll('g').select(\"text\");\r\n             yTicks.each(function(d,i){\r\n             var labelPadding = this.getBBox().width + axis.tickPadding() + 16;\r\n             if(labelPadding > width) width = labelPadding;\r\n             });\r\n             */\r\n            axisLabel.enter().append(\"text\").attr(\"class\", \"nv-axislabel\");\r\n            axisLabel.style(\"text-anchor\", rotateYLabel ? \"middle\" : \"end\").attr(\"transform\", rotateYLabel ? \"rotate(-90)\" : \"\").attr(\"y\", rotateYLabel ? -Math.max(margin.left, width) + axisLabelDistance : -10) //TODO: consider calculating this based on largest tick width... OR at least expose this on chart\r\n            .attr(\"x\", rotateYLabel ? -scale.range()[0] / 2 : -axis.tickPadding());\r\n            if (showMaxMin) {\r\n              var axisMaxMin = wrap.selectAll(\"g.nv-axisMaxMin\").data(scale.domain());\r\n              axisMaxMin.enter().append(\"g\").attr(\"class\", \"nv-axisMaxMin\").append(\"text\").style(\"opacity\", 0);\r\n              axisMaxMin.exit().remove();\r\n              axisMaxMin.attr(\"transform\", function (d, i) {\r\n                return \"translate(0,\" + scale0(d) + \")\";\r\n              }).select(\"text\").attr(\"dy\", \".32em\").attr(\"y\", 0).attr(\"x\", -axis.tickPadding()).attr(\"text-anchor\", \"end\").text(function (d, i) {\r\n                var v = fmt(d);\r\n                return (\"\" + v).match(\"NaN\") ? \"\" : v;\r\n              });\r\n              axisMaxMin.transition().attr(\"transform\", function (d, i) {\r\n                return \"translate(0,\" + scale.range()[i] + \")\";\r\n              }).select(\"text\").style(\"opacity\", 1);\r\n            }\r\n            break;\r\n        }\r\n        axisLabel.text(function (d) {\r\n          return d;\r\n        });\r\n\r\n\r\n        if (showMaxMin && (axis.orient() === \"left\" || axis.orient() === \"right\")) {\r\n          //check if max and min overlap other values, if so, hide the values that overlap\r\n          g.selectAll(\"g\") // the g's wrapping each tick\r\n          .each(function (d, i) {\r\n            d3.select(this).select(\"text\").attr(\"opacity\", 1);\r\n            if (scale(d) < scale.range()[1] + 10 || scale(d) > scale.range()[0] - 10) {\r\n              // 10 is assuming text height is 16... if d is 0, leave it!\r\n              if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\r\n                d3.select(this).attr(\"opacity\", 0);\r\n\r\n              d3.select(this).select(\"text\").attr(\"opacity\", 0); // Don't remove the ZERO line!!\r\n            }\r\n          });\r\n\r\n          //if Max and Min = 0 only show min, Issue #281\r\n          if (scale.domain()[0] == scale.domain()[1] && scale.domain()[0] == 0) wrap.selectAll(\"g.nv-axisMaxMin\").style(\"opacity\", function (d, i) {\r\n            return !i ? 1 : 0;\r\n          });\r\n        }\r\n\r\n        if (showMaxMin && (axis.orient() === \"top\" || axis.orient() === \"bottom\")) {\r\n          var maxMinRange = [];\r\n          wrap.selectAll(\"g.nv-axisMaxMin\").each(function (d, i) {\r\n            try {\r\n              if (i) // i== 1, max position\r\n                maxMinRange.push(scale(d) - this.getBBox().width - 4);else // i==0, min position\r\n                maxMinRange.push(scale(d) + this.getBBox().width + 4);\r\n            } catch (err) {\r\n              if (i) // i== 1, max position\r\n                maxMinRange.push(scale(d) - 4);else // i==0, min position\r\n                maxMinRange.push(scale(d) + 4);\r\n            }\r\n          });\r\n          g.selectAll(\"g\") // the g's wrapping each tick\r\n          .each(function (d, i) {\r\n            if (scale(d) < maxMinRange[0] || scale(d) > maxMinRange[1]) {\r\n              if (d > 1e-10 || d < -1e-10) // accounts for minor floating point errors... though could be problematic if the scale is EXTREMELY SMALL\r\n                d3.select(this).remove();else d3.select(this).select(\"text\").remove(); // Don't remove the ZERO line!!\r\n            }\r\n          });\r\n        }\r\n\r\n\r\n        //highlight zero line ... Maybe should not be an option and should just be in CSS?\r\n        if (highlightZero) g.selectAll(\".tick\").filter(function (d) {\r\n          return !parseFloat(Math.round(d.__data__ * 100000) / 1000000) && d.__data__ !== undefined;\r\n        }) //this is because sometimes the 0 tick is a very small fraction, TODO: think of cleaner technique\r\n        .classed(\"zero\", true);\r\n\r\n        //store old scales for use in transitions on update\r\n        scale0 = scale.copy();\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    // expose chart's sub-components\r\n    chart.axis = axis;\r\n\r\n    d3.rebind(chart, axis, \"orient\", \"tickValues\", \"tickSubdivide\", \"tickSize\", \"tickPadding\", \"tickFormat\");\r\n    d3.rebind(chart, scale, \"domain\", \"range\", \"rangeBand\", \"rangeBands\"); //these are also accessible by chart.scale(), but added common ones directly for ease of use\r\n\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.ticks = function (_) {\r\n      if (!arguments.length) return ticks;\r\n      ticks = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.axisLabel = function (_) {\r\n      if (!arguments.length) return axisLabelText;\r\n      axisLabelText = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showMaxMin = function (_) {\r\n      if (!arguments.length) return showMaxMin;\r\n      showMaxMin = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.highlightZero = function (_) {\r\n      if (!arguments.length) return highlightZero;\r\n      highlightZero = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.scale = function (_) {\r\n      if (!arguments.length) return scale;\r\n      scale = _;\r\n      axis.scale(scale);\r\n      isOrdinal = typeof scale.rangeBands === \"function\";\r\n      d3.rebind(chart, scale, \"domain\", \"range\", \"rangeBand\", \"rangeBands\");\r\n      return chart;\r\n    };\r\n\r\n    chart.rotateYLabel = function (_) {\r\n      if (!arguments.length) return rotateYLabel;\r\n      rotateYLabel = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.rotateLabels = function (_) {\r\n      if (!arguments.length) return rotateLabels;\r\n      rotateLabels = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.staggerLabels = function (_) {\r\n      if (!arguments.length) return staggerLabels;\r\n      staggerLabels = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.axisLabelDistance = function (_) {\r\n      if (!arguments.length) return axisLabelDistance;\r\n      axisLabelDistance = _;\r\n      return chart;\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    return chart;\r\n  };\r\n\r\n\r\n\r\n\r\n  nv.models.map = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n    var \r\n        margin = { top: 0, right: 0, bottom: 0, left: 0 },\r\n        \r\n        width = 500,\r\n        \r\n        height = 500,\r\n        \r\n        getX = function (d) {\r\n          return d.x;\r\n        },\r\n        \r\n        getY = function (d) {\r\n          return d.y;\r\n        },\r\n        \r\n        getDescription = function (d) {\r\n          return d.description;\r\n        },\r\n        \r\n        id = Math.floor(Math.random() * 10000), //Create semi-unique ID in case user doesn't select one\r\n    \r\n        color = nv.utils.defaultColor(),\r\n    \r\n        projection = d3.geo.mercator(),\r\n    \r\n        path = d3.geo.path().projection(projection),\r\n    \r\n        zoom = d3.behavior.zoom(),\r\n    \r\n        tile = d3.geo.tile(),\r\n\r\n        boundary,\r\n    \r\n        tileServerConnection = false,\r\n    \r\n        mapId = {\r\n        \"mapbox.streets\" : \"mapbox.streets\",\r\n        \"mapbox.light\"   : \"mapbox.light\",\r\n        \"mapbox.dark\"    : \"mapbox.dark\",\r\n        \"mapbox.satellite\" : \"mapbox.satellite\",\r\n        \"mapbox.streets-satellite\" : \"mapbox.streets-satellite\",\r\n        \"mapbox.outdoors\" : \"mapbox.outdoors\"\r\n      },\r\n\r\n      tileAccessToken = \"pk.eyJ1IjoiYm9sZGFrIiwiYSI6InZrSEF6RXMifQ.c8WIV6zoinhXwXXY2cFurg\",\r\n\r\n      lockHighLight = false,\r\n\r\n      showLabels = false,\r\n\r\n      showValues = false,\r\n\r\n      showTiles = true,\r\n\r\n      locale = \"en\",\r\n\r\n      selectedTiles = mapId[\"mapbox.outdoors\"],\r\n\r\n      interactive = true,\r\n\r\n      defaultFill = \"#f0f0f0\",\r\n\r\n      defaultFillOpacity = 0,\r\n\r\n      defaultStroke = '#909095',\r\n\r\n      defaultStrokeWidth = 1,\r\n\r\n      defaultStrokeOpacity = 0.75,\r\n\r\n      selectedFillOpacity = 0.5,\r\n\r\n      selectedStrokeWidth = 3,\r\n\r\n      valueIndex = 0,\r\n\r\n      getValueIndex = function(){ return valueIndex },\r\n\r\n      \r\n\r\n\r\n\r\n      dispatch = d3.dispatch( \r\n          \"mapMouseover\", \r\n          \"mapMouseout\"\r\n      );\r\n\r\n    //============================================================\r\n  \r\n\r\n    //============================================================\r\n   \r\n    // projection.scale(sc / 2 / Math.PI).translate([width / 2, height / 1.3]);\r\n\r\n    zoom.translate([0, 0]);\r\n               \r\n\r\n    var complementedColor = function (hex) {\r\n      if (hex == undefined || hex== null) return defaultStroke;\r\n      var color = hex.slice(1);\r\n      try{\r\n        color = parseInt(color, 16);\r\n      } catch(e) {\r\n        return defaultStroke;\r\n      }  \r\n      var r, g, b;\r\n      if (hex.length === 4) {\r\n        r = (color & 3840) >> 4;\r\n        r = r >> 4 | r;\r\n        g = color & 240;\r\n        g = g >> 4 | g;\r\n        b = color & 15;\r\n        b = b << 4 | b;\r\n      } else if (hex.length === 7) {\r\n        r = (color & 16711680) >> 16;\r\n        g = (color & 65280) >> 8;\r\n        b = color & 255;\r\n      }\r\n       return \"rgba(\" + (255 - r) + \",\" + (255 - g) + \",\" + (255 - b) + \",1)\";\r\n    };\r\n\r\n    var approximateLength = function (text, fontSize) {\r\n      return text.length * fontSize * 0.6;\r\n    };\r\n\r\n    var getFontSize = function (element, data) {\r\n      var bounds = path.bounds(data);\r\n      var textWidth = element.clientWidth;\r\n      var textHeight = element.clientHeight;\r\n      var h1 = (bounds[1][1] - bounds[0][1]) * 0.1;\r\n      var h2 = (bounds[1][0] - bounds[0][0]) * 0.1;\r\n      h1 = (h1 > h2) ? h2 : h1;\r\n      h1 = (h1 < 8) ? 8 : h1;\r\n      h1 = (h1 > 24) ? 24 : h1;\r\n      return h1;\r\n    };\r\n\r\n\r\n    var tryingToConnectTileServer = function(){\r\n      d3.html(\"http://api.tiles.mapbox.com/v4/\"\r\n              + selectedTiles + \"/\"\r\n              +  \"0/0/0.png\"\r\n              + \"?access_token=\" + tileAccessToken, function(error){\r\n                if(error){\r\n                  tileServerConnection = false;\r\n                  return;\r\n                }\r\n                tileServerConnection = true;\r\n              })\r\n    }\r\n\r\n    var mergeBounds = function (bounds1,bounds2){\r\n      if (bounds1 == undefined || bounds1 == null){\r\n        return bounds2\r\n      }\r\n      if (bounds2 == undefined || bounds2 == null){\r\n        return bounds1\r\n      }\r\n      return [[\r\n              Math.min(bounds1[0][0],bounds2[0][0]),\r\n              Math.min(bounds1[0][1],bounds2[0][1])\r\n            ],\r\n            [\r\n              Math.max(bounds1[1][0],bounds2[1][0]),\r\n              Math.max(bounds1[1][1],bounds2[1][1])\r\n            ]]\r\n    }\r\n\r\n   \r\n\r\n      var updateTiles = function (container,zoom,width,height){\r\n        \r\n        tile.size([width, height]);\r\n        \r\n        var tiles = tile\r\n               .scale(zoom.scale())\r\n               .translate(zoom.translate())\r\n             ();  \r\n        \r\n        var image = container\r\n               .attr(\"transform\", \"scale(\" + tiles.scale + \")translate(\" + tiles.translate + \")\")\r\n               .selectAll(\"image\")\r\n               .data(tiles, function(d) {return d; });\r\n  \r\n         image.exit()\r\n           .remove();\r\n  \r\n         image.enter().append(\"image\")\r\n           .attr(\"xlink:href\", function(d) { \r\n              return \"http://api.tiles.mapbox.com/v4/\"\r\n              + selectedTiles + \"/\"\r\n              + d[2] + \"/\" + d[0] + \"/\" + d[1] + \".png\"\r\n              + \"?access_token=\" + tileAccessToken;\r\n            })\r\n           .attr(\"width\", 1)\r\n           .attr(\"height\", 1)\r\n           .attr(\"x\", function(d) { return d[0]; })\r\n           .attr(\"y\", function(d) { return d[1]; });\r\n      }\r\n\r\n      var clearTiles =  function (container){ \r\n        container\r\n          .selectAll(\"image\")\r\n          .data([])\r\n          .exit()\r\n          .remove();\r\n      }   \r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        // console.log(\"Map model data\", data)\r\n\r\n        // find index of active serie\r\n        valueIndex = -1;\r\n        data[0].series.forEach(function(item,index){\r\n          if(!item.disabled != undefined && item.disabled == false){\r\n            valueIndex = index;\r\n          }\r\n        })\r\n\r\n        \r\n        valueIndex = (valueIndex == -1) ? 0 : valueIndex;\r\n\r\n        \r\n\r\n        // console.log(\"valueIndex\", valueIndex)\r\n\r\n        var availableWidth = width - margin.left - margin.right,\r\n            availableHeight = height - margin.top - margin.bottom,\r\n            container = d3.select(this);\r\n\r\n        \r\n        \r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container\r\n          .selectAll(\".nv-wrap.nv-map\")\r\n          .data(data);\r\n\r\n        var wrapEnter = wrap\r\n          .enter()\r\n          .append(\"g\")\r\n          .attr(\"class\", \"nvd3 nv-wrap nv-map nv-chart-\" + id);\r\n\r\n        var gEnter = wrapEnter\r\n          .append(\"g\");\r\n       \r\n        \r\n        var g = wrap\r\n          .select(\"g\");\r\n\r\n        var tileLayer = g.append(\"g\")\r\n          .attr (\"class\", \"tileLayer\");\r\n        \r\n        var pathContainer = gEnter\r\n          .append(\"g\");\r\n        \r\n        pathContainer\r\n          .attr(\"class\", \"nv-map\");\r\n\r\n        wrapEnter\r\n          .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        \r\n        \r\n        // get geojson from input data\r\n        var geoData = data[0].features.filter(function(d){return !d.disabled})\r\n        \r\n        var tr = zoom.translate();\r\n        \r\n        if (tr[0] == 0 && tr[1] == 0) {\r\n          projection.scale(1).translate([0,0]);\r\n\r\n          // console.log(\"NV.MODEL\", boundary)\r\n          if(boundary && boundary.scale && boundary.translate ){\r\n              zoom.scale(boundary.scale).translate(boundary.translate);\r\n            \r\n          }else{\r\n            var selectionBounds;\r\n            geoData.forEach(function (item, index) {\r\n                selectionBounds = mergeBounds(selectionBounds,path.bounds(item)) \r\n            });          \r\n          \r\n            var   dx = selectionBounds[1][0] - selectionBounds[0][0],\r\n                  \r\n                  dy = selectionBounds[1][1] - selectionBounds[0][1],\r\n                  \r\n                  x = (selectionBounds[0][0] + selectionBounds[1][0]) / 2,\r\n                  \r\n                  y = (selectionBounds[0][1] + selectionBounds[1][1]) / 2,\r\n                  \r\n                  scale =2*Math.PI*Math.min(width/dx, height/dy),\r\n             \r\n                  translate = [(width/2-(scale*x/2/Math.PI)), (height/2-(scale*y/2/Math.PI))];\r\n             \r\n            zoom.scale(scale).translate(translate);\r\n          }\r\n        }\r\n\r\n// remove scope outlines if tiles shows\r\n// \r\n        if ( d3.geo.tileServerEnable && showTiles ) {\r\n          geoData = geoData.filter(function(item){return (item.properties.values) ? true : false})\r\n        }\r\n\r\n\r\n\r\n// render regions\r\n        var geo = g\r\n          .select(\".nv-map\")\r\n          .selectAll(\"path.map-subunit\")\r\n          .data(geoData);\r\n\r\n        geo\r\n          .exit()\r\n          .remove();\r\n\r\n        geo\r\n          .enter()\r\n          .append(\"path\")\r\n          .on(\"mouseover\", function (d, i) {\r\n              if (lockHighLight) return;\r\n              if(!d.properties.values) return;\r\n              d3.select(this)\r\n                .transition()\r\n                .style(\"stroke\", function (d) {\r\n                  return (d.properties.values) ? \r\n                    complementedColor(color(d, d.properties.values[valueIndex].c)) :\r\n                    defaultStroke;\r\n                })\r\n                .style(\"stroke-opacity\", defaultStrokeOpacity)\r\n                .style(\"stroke-width\", selectedStrokeWidth);\r\n              dispatch.mapMouseover({\r\n                point: d,\r\n                index : getValueIndex,\r\n                series: data[0].series,\r\n                pos: [d3.event.pageX, d3.event.pageY]\r\n              });\r\n          })\r\n          .on(\"mouseout\", function (d, i) {\r\n            if (lockHighLight) return;\r\n            d3.select(this)\r\n              .transition()\r\n              .style(\"stroke\", defaultStroke)\r\n              .style(\"stroke-opacity\", defaultStrokeOpacity)\r\n              .style(\"stroke-width\", defaultStrokeWidth);\r\n            dispatch.mapMouseout({\r\n              point: d,\r\n              index : getValueIndex,\r\n              series: data[0].series,\r\n              pos: [d3.event.pageX, d3.event.pageY]\r\n            });\r\n          });\r\n\r\n     \r\n        geo\r\n          .transition()\r\n          .attr(\"class\", function (d, i) {\r\n            return \"map-subunit subunit-id-\" + i;\r\n          })\r\n          .style(\"fill\", function (d) {\r\n            return (d.properties.values) ? \r\n              color(d, d.properties.values[valueIndex].c) :\r\n              defaultFill; \r\n              \r\n          })\r\n          .style(\"fill-opacity\", function (d) {\r\n            return (d.properties.values) ? \r\n              selectedFillOpacity : \r\n              defaultFillOpacity;\r\n          })\r\n          .style(\"stroke-width\", defaultStrokeWidth)\r\n          .style(\"stroke\", defaultStroke);\r\n\r\n// end of render regions\r\n\r\n        var highlightSubunit = function (d, i) {\r\n          g.select(\".nv-map\").selectAll(\"path.subunit-id-\" + i)\r\n          .transition()\r\n          .style(\"stroke\", function (d) {\r\n            return (d.properties.values) ? \r\n              complementedColor(color(d, d.properties.values[valueIndex].c)) : \r\n              defaultStroke;\r\n          })\r\n          .style(\"stroke-opacity\", defaultStrokeOpacity)\r\n          .style(\"stroke-width\", selectedStrokeWidth);\r\n        }\r\n\r\n        var clearSubunit = function (d, i) {\r\n          g.select(\".nv-map\").selectAll(\"path.subunit-id-\" + i)\r\n          .transition()\r\n          .style(\"stroke\", defaultStroke)\r\n          .style(\"stroke-opacity\", defaultStrokeOpacity)\r\n          .style(\"stroke-width\", defaultStrokeWidth);\r\n        };\r\n\r\n// render labels\r\n        if(showLabels){ \r\n\r\n          var labels = g\r\n          .select(\".nv-map\")\r\n          .selectAll(\"text.nv-map-label\")\r\n          .data(geoData);\r\n\r\n          labels\r\n          .exit()\r\n          .remove();\r\n\r\n\r\n \r\n          labels.enter()\r\n            .append(\"text\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"class\", \"nv-map-label\")\r\n            .attr(\"dy\", \"-.5em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .style(\"font-weight\", \"bold\")\r\n            .style(\"opacity\", 0)\r\n            .style(\"fill\", \"#01445A\")\r\n            // .style(\"font-weight\",\"bold\")\r\n            .style(\"font-stretch\",\"ultra-condensed\")\r\n            .style(\"stroke\", \"#ffffff\")\r\n            .style(\"stroke-opacity\", 0.25)\r\n            .style(\"stroke-width\", 5)\r\n            .on(\"mouseover\", function (d, i) {\r\n              if (lockHighLight) return;\r\n              if(!d.properties.values) return;\r\n              highlightSubunit(d, i);\r\n              dispatch.mapMouseover({\r\n                point: d,\r\n                index : getValueIndex,\r\n                series: data[0].series,\r\n                pos: [d3.event.pageX, d3.event.pageY] \r\n              });\r\n            })\r\n            .on(\"mouseout\", function (d, i) {\r\n              if (lockHighLight) return;\r\n              clearSubunit(d, i);\r\n              dispatch.mapMouseout({\r\n                point: d,\r\n                index : getValueIndex,\r\n                series: data[0].series,\r\n                pos: [d3.event.pageX, d3.event.pageY] //,\r\n              });\r\n            });\r\n\r\n\r\n          \r\n          labels \r\n            .transition() \r\n            .attr(\"transform\", function (d) {\r\n              var position = path.centroid(d);\r\n              return \"translate(\" + position[0] + \",\" + position[1] + \")\";\r\n            })\r\n            .text(function (d, i) {\r\n              \r\n              var fontSize = getFontSize(labels[0][i], d);\r\n              var w = approximateLength(d.properties.name[locale], fontSize);\r\n              var bounds = path.bounds(d);\r\n              if (w * 1.2 > bounds[1][0] - bounds[0][0]) {\r\n                return d.properties.geocode;\r\n              } else {\r\n                return d.properties.name[locale];\r\n              }\r\n            })\r\n            .style(\"font-size\", function (d, i) {\r\n              var fontSize = getFontSize(labels[0][i], d);\r\n              return fontSize + \"px\";\r\n            })\r\n            .style(\"opacity\", function (d, i) {\r\n              // var bounds = path.bounds(d);\r\n              // var opct = labels[0][i].clientWidth * 2 > bounds[1][0] - bounds[0][0] ? 0 : 1;\r\n              // opct = getFontSize(labels[0][i], d) < 10 ? 0 : opct;\r\n              // return opct;\r\n              return 1;\r\n            })  \r\n            \r\n        }\r\n\r\n// end of render labels    \r\n// \r\n// render values        \r\n        \r\n        if (showValues){    \r\n\r\n          var values = g\r\n            .select(\".nv-map\")\r\n            .selectAll(\"text.nv-map-value\")\r\n            .data(geoData);\r\n\r\n          values\r\n            .exit()\r\n            .remove();  \r\n\r\n          values\r\n            .enter()\r\n            .append(\"text\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"class\", \"nv-map-value\")\r\n            .attr(\"dy\", \".7em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .style(\"stroke-opacity\", 0)\r\n            .style(\"font\", \"bold Arial\")\r\n            .style(\"fill\", \"#01445A\")\r\n            // .style(\"font-weight\",\"bold\")\r\n            .style(\"font-stretch\",\"ultra-condensed\")\r\n            .style(\"stroke\", \"#ffffff\")\r\n            .style(\"stroke-opacity\", 0.15)\r\n            .style(\"stroke-width\", 5)\r\n            .style(\"opacity\", 0)\r\n            .on(\"mouseover\", function (d, i) {\r\n              if (lockHighLight) return;\r\n              if(!d.properties.values) return;\r\n              highlightSubunit(d, i);\r\n              dispatch.mapMouseover({\r\n                point: d,\r\n                index : getValueIndex,\r\n                series: data[0].series,\r\n                pos: [d3.event.pageX, d3.event.pageY] //,\r\n              });\r\n            })\r\n            .on(\"mouseout\", function (d, i) {\r\n              if (lockHighLight) return;\r\n              clearSubunit(d, i);\r\n              dispatch.mapMouseout({\r\n                point: d,\r\n                index : getValueIndex,\r\n                series: data[0].series,\r\n                pos: [d3.event.pageX, d3.event.pageY] //,\r\n              });\r\n            });\r\n\r\n          values\r\n            .transition()\r\n            .text(function (d) {\r\n              return (d.properties.values) ?\r\n                new Number(d.properties.values[valueIndex].v).toFixed(2) : \r\n                \"\"\r\n            })\r\n            .style(\"font-size\", function (d, i) {\r\n              return getFontSize(values[0][i], d) + \"px\";\r\n            })\r\n            .attr(\"transform\", function (d) {\r\n              var position = path.centroid(d);\r\n              return \"translate(\" + position[0] + \",\" + position[1] + \")\";\r\n            })\r\n            .style(\"opacity\", function (d, i) {\r\n              // var bounds = path.bounds(d);\r\n              // var opct = values[0][i].clientWidth * 2 > bounds[1][0] - bounds[0][0] ? 0 : 1;\r\n              // opct = getFontSize(values[0][i], d) < 12 ? 0 : opct;\r\n              // return opct;\r\n              return 1;\r\n            })\r\n\r\n            \r\n        }    \r\n\r\n   \r\n\r\n\r\n\r\n        var beforeZoom = function () {\r\n          lockHighLight = true;\r\n          geo.transition().style(\"fill-opacity\", 0);\r\n          if ( showLabels ) labels.transition().text(\"\");\r\n          if ( showValues ) values.transition().text(\"\");\r\n          if ( d3.geo.tileServerEnable && showTiles ) clearTiles(g.select(\"g.tileLayer\"));\r\n        };\r\n\r\n        var zoomed = function () {\r\n          projection.scale(zoom.scale() / 2 / Math.PI).translate(zoom.translate());\r\n          geo.transition().attr(\"d\", path);\r\n        };\r\n\r\n        var afterZoom = function () {\r\n         \r\n         boundary = {\r\n            scale : zoom.scale(),\r\n            translate : zoom.translate()\r\n         } \r\n         \r\n         // console.log(\"NV.MODEL boundary after zoom\", boundary)\r\n         \r\n         projection.scale(zoom.scale() / 2 / Math.PI).translate(zoom.translate());\r\n \r\n          geo\r\n            .transition()\r\n            .attr(\"d\", path)\r\n            .style(\"fill-opacity\", function (d) {\r\n              return (d.properties.values) ? \r\n                     selectedFillOpacity : \r\n                     defaultFillOpacity; \r\n            })\r\n            .style(\"stroke-width\", defaultStrokeWidth)\r\n            .style(\"fill\", function (d) {\r\n              return (d.properties.values) ? \r\n                     color(d, d.properties.values[valueIndex].c) : \r\n                     defaultFill; \r\n            });\r\n\r\n          if ( showLabels ) { \r\n            labels \r\n            .transition() \r\n            .attr(\"transform\", function (d) {\r\n              var position = path.centroid(d);\r\n              return \"translate(\" + position[0] + \",\" + position[1] + \")\";\r\n            })\r\n            .text(function (d, i) {\r\n              var fontSize = getFontSize(labels[0][i], d);\r\n              var w = approximateLength(d.properties.name[locale], fontSize);\r\n              var bounds = path.bounds(d);\r\n              if (w * 1.2 > bounds[1][0] - bounds[0][0]) {\r\n                return d.properties.geocode\r\n              } else {\r\n                return d.properties.name[locale];\r\n              }\r\n            })\r\n            .style(\"font-size\", function (d, i) {\r\n              var fontSize = getFontSize(labels[0][i], d);\r\n              return fontSize + \"px\";\r\n            })\r\n            .style(\"opacity\", function (d, i) {\r\n              return 1;\r\n              // var bounds = path.bounds(d);\r\n              // var opct = labels[0][i].clientWidth * 2 > bounds[1][0] - bounds[0][0] ? 0 : 1;\r\n              // opct = getFontSize(labels[0][i], d) < 10 ? 0 : opct;\r\n              // return opct;\r\n            })  \r\n          }  \r\n\r\n          if ( showValues ){\r\n            values\r\n            .transition()\r\n            .text(function (d) {\r\n              return (d.properties.values) ? \r\n               new Number(d.properties.values[valueIndex].v).toFixed(2) :\r\n                \"\"\r\n            })\r\n            .style(\"font-size\", function (d, i) {\r\n              return getFontSize(values[0][i], d) + \"px\";\r\n            })\r\n            .attr(\"transform\", function (d) {\r\n              var position = path.centroid(d);\r\n              return \"translate(\" + position[0] + \",\" + position[1] + \")\";\r\n            })\r\n            .style(\"opacity\", function (d, i) {\r\n              // var bounds = path.bounds(d);\r\n              // var opct = values[0][i].clientWidth * 2 > bounds[1][0] - bounds[0][0] ? 0 : 1;\r\n              // opct = getFontSize(values[0][i], d) < 12 ? 0 : opct;\r\n              // return opct;\r\n              return 1;\r\n            })\r\n          }\r\n          if ( d3.geo.tileServerEnable && showTiles ) updateTiles(g.select(\"g.tileLayer\"),zoom,width,height);\r\n          lockHighLight = false;\r\n        };\r\n\r\n        zoom\r\n          .on(\"zoomstart\", beforeZoom)\r\n          .on(\"zoom\", zoomed)\r\n          .on(\"zoomend\", afterZoom);\r\n        \r\n        g.select(\".nv-map\").call(zoom);\r\n        afterZoom();\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    chart.dispatch = dispatch;\r\n\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.locale = function (_) {\r\n      if (!arguments.length) return locale;\r\n      locale = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showLabels = function (_) {\r\n      if (!arguments.length) return showLabels;\r\n      showLabels = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showValues = function (_) {\r\n      if (!arguments.length) return showValues;\r\n      showValues = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.showTiles = function (_) {\r\n      if (!arguments.length) return showTiles;\r\n      showTiles = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.selectedTiles = function (_) {\r\n      // console.log(\"selectedTiles map\", _ , mapId[_])\r\n      if (!arguments.length) return mapId[selectedTiles];\r\n      selectedTiles = mapId[_];\r\n      return chart;\r\n    };\r\n\r\n    chart.interactive = function (_) {\r\n      if (!arguments.length) return interactive;\r\n      interactive = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultFill = function (_) {\r\n      if (!arguments.length) return defaultFill;\r\n      defaultFill = _;\r\n      return chart;\r\n    };\r\n    \r\n    chart.defaultFillOpacity = function (_) {\r\n      // console.log(\"defaultFillOpacity map\",_)\r\n      if (!arguments.length) return defaultFillOpacity;\r\n      defaultFillOpacity = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultStrokeWidth = function (_) {\r\n      if (!arguments.length) return defaultStrokeWidth;\r\n      defaultStrokeWidth = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultStrokeOpacity = function (_) {\r\n      if (!arguments.length) return defaultStrokeOpacity;\r\n      defaultStrokeOpacity = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.selectedFillOpacity = function (_) {\r\n      if (!arguments.length) return selectedFillOpacity;\r\n      selectedFillOpacity = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.selectedStrokeWidth = function (_) {\r\n      if (!arguments.length) return selectedStrokeWidth;\r\n      selectedStrokeWidth = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.x = function (_) {\r\n      if (!arguments.length) return getX;\r\n      getX = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.y = function (_) {\r\n      if (!arguments.length) return getY;\r\n      getY = d3.functor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.id = function (_) {\r\n      if (!arguments.length) return id;\r\n      id = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.boundary = function (_) {\r\n      if (!arguments.length) return boundary;\r\n      boundary = _;\r\n      return chart;\r\n    };\r\n\r\n  \r\n    //============================================================\r\n\r\n    //console.log(topojson);\r\n    return chart;\r\n  };\r\n\r\n  \r\n  nv.models.mapChart = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n    //console.log('mapChart ', topojson);\r\n    var map = nv.models.map(),\r\n        legend = nv.models.legend(),\r\n        locale = \"en\",\r\n        colorScheme = nv.models.colorScheme();\r\n    \r\n    legend.radioButtonMode(true);\r\n\r\n    var margin = { top: 30, right: 20, bottom: 20, left: 20 },\r\n        width = null,\r\n        height = null,\r\n        showLegend = true,\r\n        color = nv.utils.defaultColor(),\r\n        tooltips = true,\r\n        tooltip = function (key, y, e, graph) {\r\n      return \"<h3>\" + key + \"</h3>\" + \"<p>\" + y + \"</p>\";\r\n    },\r\n        state = {},\r\n        defaultState = null,\r\n        noData = \"No Data Available.\",\r\n        dispatch = d3.dispatch(\"tooltipShow\", \"tooltipHide\", \"stateChange\", \"changeState\");\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Private Variables\r\n    //------------------------------------------------------------\r\n\r\n    var showTooltip = function (e, offsetElement) {\r\n      //console.log(\"showTooltip\",e,offsetElement.offsetLeft,offsetElement.offsetTop)\r\n      var tooltipLabel = e.point; //map.description()(e.point) || map.x()(e.point);\r\n      var left = e.pos[0],\r\n\r\n      //+ (offsetElement && offsetElement.offsetLeft || 0),\r\n      top = e.pos[1] - 30,\r\n\r\n      //+ (offsetElement && offsetElement.offsetTop || 0),\r\n\r\n      //var left = (offsetElement && offsetElement.offsetLeft || 0),\r\n      //  top = (offsetElement && offsetElement.offsetTop || 0),\r\n\r\n      //y = map.valueFormat()(map.y()(e.point)),\r\n      content = tooltip(tooltipLabel, \" !!!!\", e, chart);\r\n\r\n      nv.tooltip.show([left, top], content, e.value < 0 ? \"n\" : \"s\", null, offsetElement, \"xy-tooltip with-3d-shadow with-transitions\");\r\n    };\r\n\r\n    //============================================================\r\n\r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        if(!data.length || data.length == 0) return;\r\n        // console.log(\"MAP CHART\", data);\r\n\r\n\r\n        var container = d3.select(this),\r\n            that = this;\r\n\r\n            container.style(\"border\",\"1px solid #eeeeee\")\r\n\r\n        var availableWidth = (width || parseInt(container.style(\"width\")) || 960) - margin.left - margin.right,\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n\r\n        chart.update = function () {\r\n          container.transition().call(chart);\r\n        };\r\n        \r\n        chart.container = this;\r\n\r\n\r\n\r\n        //set state.disabled\r\n        state.disabled = data[0].series.map(function (d) {\r\n          return !!d.disabled;\r\n        });\r\n\r\n        if (!defaultState) {\r\n          var key;\r\n          defaultState = {};\r\n          for (key in state) {\r\n            if (state[key] instanceof Array) defaultState[key] = state[key].slice(0);else defaultState[key] = state[key];\r\n          }\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n        // Display No Data message if there's nothing to show.\r\n\r\n        if (!data || !data.length) {\r\n          var noDataText = container.selectAll(\".nv-noData\").data([noData]);\r\n\r\n          noDataText.enter().append(\"text\").attr(\"class\", \"nvd3 nv-noData\").attr(\"dy\", \"-.7em\").style(\"text-anchor\", \"middle\");\r\n\r\n          noDataText.attr(\"x\", margin.left + availableWidth / 2).attr(\"y\", margin.top + availableHeight / 2).text(function (d) {\r\n            return d;\r\n          });\r\n\r\n          return chart;\r\n        } else {\r\n          container.selectAll(\".nv-noData\").remove();\r\n        }\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n\r\n        var wrap = container.selectAll(\"g.nv-wrap.nv-mapChart\").data([data]);\r\n        var gEnter = wrap.enter().append(\"g\").attr(\"class\", \"nvd3 nv-wrap nv-mapChart\");\r\n        var g = wrap.select(\"g\");\r\n\r\n        var mapWrap = gEnter.append(\"g\").attr(\"class\", \"nv-mapWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-legendWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-colorsWrap\");\r\n        gEnter.append(\"g\").attr(\"class\", \"nv-infoWrap\");\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //------------------------------------------------------------\r\n        // Legend\r\n        showLegend = showLegend && data[0].series.length > 1;\r\n        if (showLegend) {\r\n          legend.width(availableWidth).key(function (d) {\r\n            return d.key;\r\n          })\r\n          //.min(2)\r\n          .color(function (d) {\r\n            return \"#238443\";\r\n          });\r\n\r\n          wrap.select(\".nv-legendWrap\").datum(data[0].series).call(legend);\r\n\r\n          if (margin.top != legend.height()) {\r\n            margin.top = legend.height();\r\n            availableHeight = (height || parseInt(container.style(\"height\")) || 400) - margin.top - margin.bottom;\r\n          }\r\n          // wrap.select(\".nv-legendWrap\").attr(\"transform\", \"translate(0,\" + -margin.top + \")\");\r\n        \r\n          // wrap.select(\".nvd3 .nv-legend\").select(\"g\").attr(\"transform\", \"translate(0,\"+(-11)+\")\");\r\n          wrap\r\n            .select(\".nvd3 .nv-legend\")\r\n            .select(\"g\")\r\n            .attr(\"transform\", \"translate(20,\"+(10-margin.top)+\")\");\r\n          \r\n        }\r\n        gEnter.attr(\"transform\", \"translate(0,\"+margin.top+\")\");\r\n\r\n        //------------------------------------------------------------\r\n        //------------------------------------------------------------\r\n        // Color Scheme\r\n        var colorSchemeEnable = data[0].features.filter(function(item){ \r\n            return (item.properties.values) ? true : false\r\n          }).length>1;  \r\n        \r\n        if(colorSchemeEnable){\r\n          colorScheme\r\n            .width(availableWidth)\r\n            .color(color);\r\n          \r\n          wrap\r\n            .select(\".nv-colorsWrap\")\r\n            .datum(data[0].series)\r\n            .call(colorScheme);\r\n        }    \r\n        \r\n        var h = height || parseInt(container.style(\"height\")) || 400;\r\n        if(colorSchemeEnable){\r\n          wrap.select(\".nv-colorsWrap\").attr(\"transform\", \"translate(\" + 0 + \",\" + (h - 75) + \")\");  \r\n        }\r\n          \r\n        \r\n        map.width(availableWidth - margin.left)\r\n        .height(availableHeight);\r\n        \r\n        wrap.select(\".nv-mapWrap\")\r\n        .datum(data).call(map);\r\n\r\n\r\n        //------------------------------------------------------------\r\n\r\n\r\n        //============================================================\r\n        // Event Handling/Dispatching (in chart's scope)\r\n        //------------------------------------------------------------\r\n\r\n        legend.dispatch.on(\"stateChange\", function (newState) {\r\n          state = newState;\r\n          dispatch.stateChange(state);\r\n          chart.update();\r\n        });\r\n\r\n        // Update chart from a state object passed to event handler\r\n        dispatch.on(\"changeState\", function (e) {\r\n          if (typeof e.disabled !== \"undefined\") {\r\n            data.series.forEach(function (series, i) {\r\n              series.disabled = e.disabled[i];\r\n            });\r\n\r\n            state.disabled = e.disabled;\r\n          }\r\n\r\n          chart.update();\r\n        });\r\n\r\n        dispatch.on(\"tooltipShow\", function (e) {\r\n          // console.log(\"tooltipShow\", e);\r\n\r\n          if (tooltips) showTooltip(e);\r\n        });\r\n        //============================================================\r\n      });\r\n\r\n      return chart;\r\n    }\r\n\r\n    //============================================================\r\n    // Event Handling/Dispatching (out of chart's scope)\r\n    //------------------------------------------------------------\r\n    //console.log(\"MAP DISPATCH\",map.dispatch.on)\r\n    map.dispatch.on(\"mapMouseover\", function (e) {\r\n      // console.log(\"mapMouseover\", e);\r\n      e.pos = [e.pos[0] + margin.left, e.pos[1] + margin.top];\r\n      dispatch.tooltipShow(e);\r\n    });\r\n\r\n    map.dispatch.on(\"mapMouseout\", function (e) {\r\n      //e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\r\n      dispatch.tooltipHide(e);\r\n    });\r\n\r\n\r\n\r\n    dispatch.on(\"tooltipHide\", function () {\r\n      if (tooltips) nv.tooltip.cleanup();\r\n    });\r\n\r\n    //============================================================\r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    // expose chart's sub-components\r\n    chart.legend = legend;\r\n    chart.dispatch = dispatch;\r\n    chart.map = map;\r\n\r\n    d3.rebind(chart, map, \"valueFormat\", \"labelFormat\", \"values\", \"x\", \"y\", \"description\", \"id\", \"showLabels\", \"donutLabelsOutside\", \"chordLabelsOutside\", \"labelType\", \"donut\", \"donutRatio\", \"labelThreshold\");\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.color = function (_) {\r\n      if (!arguments.length) return color;\r\n      color = nv.utils.getColor(_);\r\n      legend.color(color);\r\n      map.color(color);\r\n      return chart;\r\n    };\r\n\r\n    chart.boundary = function (_) {\r\n      if (!arguments.length) return map.boundary();\r\n      map.boundary(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.locale = function (_) {\r\n      if (!arguments.length) return locale;\r\n      locale = _;\r\n      map.locale(locale);\r\n      return chart;\r\n    };\r\n\r\n    chart.showLegend = function (_) {\r\n      if (!arguments.length) return showLegend;\r\n      showLegend = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltips = function (_) {\r\n      if (!arguments.length) return tooltips;\r\n      tooltips = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.tooltipContent = function (_) {\r\n      if (!arguments.length) return tooltip;\r\n      tooltip = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.state = function (_) {\r\n      if (!arguments.length) return state;\r\n      state = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultState = function (_) {\r\n      if (!arguments.length) return defaultState;\r\n      defaultState = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.noData = function (_) {\r\n      if (!arguments.length) return noData;\r\n      noData = _;\r\n      return chart;\r\n    };\r\n\r\n\r\n     chart.showLabels = function (_) {\r\n      if (!arguments.length) return map.showLabels();\r\n      map.showLabels(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.showValues = function (_) {\r\n      if (!arguments.length) return map.showValues();\r\n      map.showValues(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.showTiles = function (_) {\r\n      if (!arguments.length) return map.showTiles();\r\n      map.showTiles(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.selectedTiles = function (_) {\r\n      if (!arguments.length) return map.selectedTiles();\r\n      map.selectedTiles(_);\r\n      return chart;\r\n    };\r\n\r\n    chart.interactive = function (_) {\r\n      if (!arguments.length) return map.interactive();\r\n      map.interactive(_)\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultFill = function (_) {\r\n      if (!arguments.length) return map.defaultFill();\r\n      map.defaultFill(_)\r\n      return chart;\r\n    };\r\n    \r\n    chart.defaultFillOpacity = function (_) {\r\n      // console.log(\"defaultFillOpacity chart\", _)\r\n      if (!arguments.length) return map.defaultFillOpacity();\r\n      map.defaultFillOpacity(_)\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultStrokeWidth = function (_) {\r\n      if (!arguments.length) return map.defaultStrokeWidth();\r\n      map.defaultStrokeWidth(_)\r\n      return chart;\r\n    };\r\n\r\n    chart.defaultStrokeOpacity = function (_) {\r\n      if (!arguments.length) return map.defaultStrokeOpacity();\r\n      map.defaultStrokeOpacity(_)\r\n      return chart;\r\n    };\r\n\r\n    chart.selectedFillOpacity = function (_) {\r\n      if (!arguments.length) return map.selectedFillOpacity();\r\n      map.selectedFillOpacity(_)\r\n      return chart;\r\n    };\r\n\r\n    chart.selectedStrokeWidth = function (_) {\r\n      if (!arguments.length) return map.selectedStrokeWidth();\r\n      map.selectedStrokeWidth(_)\r\n      return chart;\r\n    };\r\n\r\n\r\n    //============================================================\r\n\r\n\r\n    return chart;\r\n  }\r\n\r\n\r\n  //console.log(\"FINISH\", nv)\r\n  ;\r\n\r\n\r\n// nv.models.multiBarChart = function() {\r\n//   \"use strict\";\r\n//   //============================================================\r\n//   // Public Variables with Default Settings\r\n//   //------------------------------------------------------------\r\n\r\n//   var multibar = nv.models.multiBar()\r\n//     , xAxis = nv.models.axis()\r\n//     , yAxis = nv.models.axis()\r\n//     , legend = nv.models.legend()\r\n//     , controls = nv.models.legend()\r\n//     ;\r\n\r\n//   var margin = {top: 30, right: 20, bottom: 50, left: 60}\r\n//     , width = null\r\n//     , height = null\r\n//     , color = nv.utils.defaultColor()\r\n//     , showControls = true\r\n//     , showLegend = true\r\n//     , showXAxis = true\r\n//     , showYAxis = true\r\n//     , rightAlignYAxis = false\r\n//     , reduceXTicks = true // if false a tick will show for every data point\r\n//     , staggerLabels = false\r\n//     , rotateLabels = 0\r\n//     , tooltips = true\r\n//     , tooltip = function(key, x, y, e, graph) {\r\n//         return '<h3>' + key + '</h3>' +\r\n//                '<p>' +  y + ' on ' + x + '</p>'\r\n//       }\r\n//     , x //can be accessed via chart.xScale()\r\n//     , y //can be accessed via chart.yScale()\r\n//     , state = { stacked: false }\r\n//     , defaultState = null\r\n//     , noData = \"No Data Available.\"\r\n//     , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\r\n//     , controlWidth = function() { return showControls ? 180 : 0 }\r\n//     , transitionDuration = 250\r\n//     ;\r\n\r\n//   multibar\r\n//     .stacked(false)\r\n//     ;\r\n//   xAxis\r\n//     .orient('bottom')\r\n//     .tickPadding(7)\r\n//     .highlightZero(true)\r\n//     .showMaxMin(false)\r\n//     .tickFormat(function(d) { return d })\r\n//     ;\r\n//   yAxis\r\n//     .orient((rightAlignYAxis) ? 'right' : 'left')\r\n//     .tickFormat(d3.format(',.1f'))\r\n//     ;\r\n\r\n//   controls.updateState(false);\r\n//   //============================================================\r\n\r\n\r\n//   //============================================================\r\n//   // Private Variables\r\n//   //------------------------------------------------------------\r\n\r\n//   var showTooltip = function(e, offsetElement) {\r\n//     var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\r\n//         top = e.pos[1] + ( offsetElement.offsetTop || 0),\r\n//         x = xAxis.tickFormat()(multibar.x()(e.point, e.pointIndex)),\r\n//         y = yAxis.tickFormat()(multibar.y()(e.point, e.pointIndex)),\r\n//         content = tooltip(e.series.key, x, y, e, chart);\r\n\r\n//     nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\r\n//   };\r\n\r\n//   //============================================================\r\n\r\n\r\n//   function chart(selection) {\r\n//     selection.each(function(data) {\r\n//       console.log(\"MultiBar\", data)\r\n//       var container = d3.select(this),\r\n//           that = this;\r\n\r\n//       var availableWidth = (width  || parseInt(container.style('width')) || 960)\r\n//                              - margin.left - margin.right,\r\n//           availableHeight = (height || parseInt(container.style('height')) || 400)\r\n//                              - margin.top - margin.bottom;\r\n\r\n//       chart.update = function() { container.transition().duration(transitionDuration).call(chart) };\r\n//       chart.container = this;\r\n\r\n//       //set state.disabled\r\n//       state.disabled = data.map(function(d) { return !!d.disabled });\r\n\r\n//       if (!defaultState) {\r\n//         var key;\r\n//         defaultState = {};\r\n//         for (key in state) {\r\n//           if (state[key] instanceof Array)\r\n//             defaultState[key] = state[key].slice(0);\r\n//           else\r\n//             defaultState[key] = state[key];\r\n//         }\r\n//       }\r\n//       //------------------------------------------------------------\r\n//       // Display noData message if there's nothing to show.\r\n\r\n//       if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\r\n//         var noDataText = container.selectAll('.nv-noData').data([noData]);\r\n\r\n//         noDataText.enter().append('text')\r\n//           .attr('class', 'nvd3 nv-noData')\r\n//           .attr('dy', '-.7em')\r\n//           .style('text-anchor', 'middle');\r\n\r\n//         noDataText\r\n//           .attr('x', margin.left + availableWidth / 2)\r\n//           .attr('y', margin.top + availableHeight / 2)\r\n//           .text(function(d) { return d });\r\n\r\n//         return chart;\r\n//       } else {\r\n//         container.selectAll('.nv-noData').remove();\r\n//       }\r\n\r\n//       //------------------------------------------------------------\r\n\r\n\r\n//       //------------------------------------------------------------\r\n//       // Setup Scales\r\n\r\n//       x = multibar.xScale();\r\n//       y = multibar.yScale();\r\n\r\n//       //------------------------------------------------------------\r\n\r\n\r\n//       //------------------------------------------------------------\r\n//       // Setup containers and skeleton of chart\r\n\r\n//       var wrap = container.selectAll('g.nv-wrap.nv-multiBarWithLegend').data([data]);\r\n//       var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multiBarWithLegend').append('g');\r\n//       var g = wrap.select('g');\r\n\r\n//       gEnter.append('g').attr('class', 'nv-x nv-axis');\r\n//       gEnter.append('g').attr('class', 'nv-y nv-axis');\r\n//       gEnter.append('g').attr('class', 'nv-barsWrap');\r\n//       gEnter.append('g').attr('class', 'nv-legendWrap');\r\n//       gEnter.append('g').attr('class', 'nv-controlsWrap');\r\n\r\n//       //------------------------------------------------------------\r\n\r\n\r\n//       //------------------------------------------------------------\r\n//       // Legend\r\n\r\n//       if (showLegend) {\r\n//         legend.width(availableWidth - controlWidth());\r\n\r\n//         if (multibar.barColor())\r\n//           data.forEach(function(series,i) {\r\n//             series.color = d3.rgb('#ccc').darker(i * 1.5).toString();\r\n//           })\r\n\r\n//         g.select('.nv-legendWrap')\r\n//             .datum(data)\r\n//             .call(legend);\r\n\r\n//         if ( margin.top != legend.height()) {\r\n//           margin.top = legend.height();\r\n//           availableHeight = (height || parseInt(container.style('height')) || 400)\r\n//                              - margin.top - margin.bottom;\r\n//         }\r\n\r\n//         g.select('.nv-legendWrap')\r\n//             .attr('transform', 'translate(' + controlWidth() + ',' + (-margin.top) +')');\r\n//       }\r\n\r\n//       //------------------------------------------------------------\r\n\r\n\r\n//       //------------------------------------------------------------\r\n//       // Controls\r\n\r\n//       if (showControls) {\r\n//         var controlsData = [\r\n//           { key: 'Grouped', disabled: multibar.stacked() },\r\n//           { key: 'Stacked', disabled: !multibar.stacked() }\r\n//         ];\r\n\r\n//         controls.width(controlWidth()).color(['#444', '#444', '#444']);\r\n//         g.select('.nv-controlsWrap')\r\n//             .datum(controlsData)\r\n//             .attr('transform', 'translate(0,' + (-margin.top) +')')\r\n//             .call(controls);\r\n//       }\r\n\r\n//       //------------------------------------------------------------\r\n\r\n\r\n//       wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\r\n\r\n//       if (rightAlignYAxis) {\r\n//           g.select(\".nv-y.nv-axis\")\r\n//               .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\r\n//       }\r\n\r\n//       //------------------------------------------------------------\r\n//       // Main Chart Component(s)\r\n\r\n//       multibar\r\n//         .disabled(data.map(function(series) { return series.disabled }))\r\n//         .width(availableWidth)\r\n//         .height(availableHeight)\r\n//         .color(data.map(function(d,i) {\r\n//           return d.color || color(d, i);\r\n//         }).filter(function(d,i) { return !data[i].disabled }))\r\n\r\n\r\n//       var barsWrap = g.select('.nv-barsWrap')\r\n//           .datum(data.filter(function(d) { return !d.disabled }))\r\n\r\n//       barsWrap.transition().call(multibar);\r\n\r\n//       //------------------------------------------------------------\r\n\r\n\r\n//       //------------------------------------------------------------\r\n//       // Setup Axes\r\n\r\n//       if (showXAxis) {\r\n//           xAxis\r\n//             .scale(x)\r\n//             .ticks( availableWidth / 100 )\r\n//             .tickSize(-availableHeight, 0);\r\n\r\n//           g.select('.nv-x.nv-axis')\r\n//               .attr('transform', 'translate(0,' + y.range()[0] + ')');\r\n//           g.select('.nv-x.nv-axis').transition()\r\n//               .call(xAxis);\r\n\r\n//           var xTicks = g.select('.nv-x.nv-axis > g').selectAll('g');\r\n\r\n//           xTicks\r\n//               .selectAll('line, text')\r\n//               .style('opacity', 1)\r\n\r\n//           if (staggerLabels) {\r\n//               var getTranslate = function(x,y) {\r\n//                   return \"translate(\" + x + \",\" + y + \")\";\r\n//               };\r\n\r\n//               var staggerUp = 5, staggerDown = 17;  //pixels to stagger by\r\n//               // Issue #140\r\n//               xTicks\r\n//                 .selectAll(\"text\")\r\n//                 .attr('transform', function(d,i,j) { \r\n//                     return  getTranslate(0, (j % 2 == 0 ? staggerUp : staggerDown));\r\n//                   });\r\n\r\n//               var totalInBetweenTicks = d3.selectAll(\".nv-x.nv-axis .nv-wrap g g text\")[0].length;\r\n//               g.selectAll(\".nv-x.nv-axis .nv-axisMaxMin text\")\r\n//                 .attr(\"transform\", function(d,i) {\r\n//                     return getTranslate(0, (i === 0 || totalInBetweenTicks % 2 !== 0) ? staggerDown : staggerUp);\r\n//                 });\r\n//           }\r\n\r\n//           if (reduceXTicks)\r\n//             xTicks\r\n//               .filter(function(d,i) {\r\n//                   return i % Math.ceil(data[0].values.length / (availableWidth / 100)) !== 0;\r\n//                 })\r\n//               .selectAll('text, line')\r\n//               .style('opacity', 0);\r\n\r\n//           if(rotateLabels)\r\n//             xTicks\r\n//               .selectAll('.tick text')\r\n//               .attr('transform', 'rotate(' + rotateLabels + ' 0,0)')\r\n//               .style('text-anchor', rotateLabels > 0 ? 'start' : 'end');\r\n          \r\n//           g.select('.nv-x.nv-axis').selectAll('g.nv-axisMaxMin text')\r\n//               .style('opacity', 1);\r\n//       }\r\n\r\n\r\n//       if (showYAxis) {      \r\n//           yAxis\r\n//             .scale(y)\r\n//             .ticks( availableHeight / 36 )\r\n//             .tickSize( -availableWidth, 0);\r\n\r\n//           g.select('.nv-y.nv-axis').transition()\r\n//               .call(yAxis);\r\n//       }\r\n\r\n\r\n//       //------------------------------------------------------------\r\n\r\n\r\n\r\n//       //============================================================\r\n//       // Event Handling/Dispatching (in chart's scope)\r\n//       //------------------------------------------------------------\r\n\r\n//       legend.dispatch.on('stateChange', function(newState) { \r\n//         state = newState;\r\n//         dispatch.stateChange(state);\r\n//         chart.update();\r\n//       });\r\n\r\n//       controls.dispatch.on('legendClick', function(d,i) {\r\n//         if (!d.disabled) return;\r\n//         controlsData = controlsData.map(function(s) {\r\n//           s.disabled = true;\r\n//           return s;\r\n//         });\r\n//         d.disabled = false;\r\n\r\n//         switch (d.key) {\r\n//           case 'Grouped':\r\n//             multibar.stacked(false);\r\n//             break;\r\n//           case 'Stacked':\r\n//             multibar.stacked(true);\r\n//             break;\r\n//         }\r\n\r\n//         state.stacked = multibar.stacked();\r\n//         dispatch.stateChange(state);\r\n\r\n//         chart.update();\r\n//       });\r\n\r\n//       dispatch.on('tooltipShow', function(e) {\r\n//         if (tooltips) showTooltip(e, that.parentNode)\r\n//       });\r\n\r\n//       // Update chart from a state object passed to event handler\r\n//       dispatch.on('changeState', function(e) {\r\n\r\n//         if (typeof e.disabled !== 'undefined') {\r\n//           data.forEach(function(series,i) {\r\n//             series.disabled = e.disabled[i];\r\n//           });\r\n\r\n//           state.disabled = e.disabled;\r\n//         }\r\n\r\n//         if (typeof e.stacked !== 'undefined') {\r\n//           multibar.stacked(e.stacked);\r\n//           state.stacked = e.stacked;\r\n//         }\r\n\r\n//         chart.update();\r\n//       });\r\n\r\n//       //============================================================\r\n\r\n\r\n//     });\r\n\r\n//     return chart;\r\n//   }\r\n\r\n\r\n//   //============================================================\r\n//   // Event Handling/Dispatching (out of chart's scope)\r\n//   //------------------------------------------------------------\r\n\r\n//   multibar.dispatch.on('elementMouseover.tooltip', function(e) {\r\n//     e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\r\n//     dispatch.tooltipShow(e);\r\n//   });\r\n\r\n//   multibar.dispatch.on('elementMouseout.tooltip', function(e) {\r\n//     dispatch.tooltipHide(e);\r\n//   });\r\n//   dispatch.on('tooltipHide', function() {\r\n//     if (tooltips) nv.tooltip.cleanup();\r\n//   });\r\n\r\n//   //============================================================\r\n\r\n\r\n//   //============================================================\r\n//   // Expose Public Variables\r\n//   //------------------------------------------------------------\r\n\r\n//   // expose chart's sub-components\r\n//   chart.dispatch = dispatch;\r\n//   chart.multibar = multibar;\r\n//   chart.legend = legend;\r\n//   chart.xAxis = xAxis;\r\n//   chart.yAxis = yAxis;\r\n\r\n//   d3.rebind(chart, multibar, 'x', 'y', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'clipEdge',\r\n//    'id', 'stacked', 'stackOffset', 'delay', 'barColor','groupSpacing');\r\n\r\n//   chart.options = nv.utils.optionsFunc.bind(chart);\r\n  \r\n//   chart.margin = function(_) {\r\n//     if (!arguments.length) return margin;\r\n//     margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\r\n//     margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\r\n//     margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\r\n//     margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.width = function(_) {\r\n//     if (!arguments.length) return width;\r\n//     width = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.height = function(_) {\r\n//     if (!arguments.length) return height;\r\n//     height = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.color = function(_) {\r\n//     if (!arguments.length) return color;\r\n//     color = nv.utils.getColor(_);\r\n//     legend.color(color);\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.showControls = function(_) {\r\n//     if (!arguments.length) return showControls;\r\n//     showControls = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.showLegend = function(_) {\r\n//     if (!arguments.length) return showLegend;\r\n//     showLegend = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.showXAxis = function(_) {\r\n//     if (!arguments.length) return showXAxis;\r\n//     showXAxis = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.showYAxis = function(_) {\r\n//     if (!arguments.length) return showYAxis;\r\n//     showYAxis = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.rightAlignYAxis = function(_) {\r\n//     if(!arguments.length) return rightAlignYAxis;\r\n//     rightAlignYAxis = _;\r\n//     yAxis.orient( (_) ? 'right' : 'left');\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.reduceXTicks= function(_) {\r\n//     if (!arguments.length) return reduceXTicks;\r\n//     reduceXTicks = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.rotateLabels = function(_) {\r\n//     if (!arguments.length) return rotateLabels;\r\n//     rotateLabels = _;\r\n//     return chart;\r\n//   }\r\n\r\n//   chart.staggerLabels = function(_) {\r\n//     if (!arguments.length) return staggerLabels;\r\n//     staggerLabels = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.tooltip = function(_) {\r\n//     if (!arguments.length) return tooltip;\r\n//     tooltip = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.tooltips = function(_) {\r\n//     if (!arguments.length) return tooltips;\r\n//     tooltips = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.tooltipContent = function(_) {\r\n//     if (!arguments.length) return tooltip;\r\n//     tooltip = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.state = function(_) {\r\n//     if (!arguments.length) return state;\r\n//     state = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.defaultState = function(_) {\r\n//     if (!arguments.length) return defaultState;\r\n//     defaultState = _;\r\n//     return chart;\r\n//   };\r\n  \r\n//   chart.noData = function(_) {\r\n//     if (!arguments.length) return noData;\r\n//     noData = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   chart.transitionDuration = function(_) {\r\n//     if (!arguments.length) return transitionDuration;\r\n//     transitionDuration = _;\r\n//     return chart;\r\n//   };\r\n\r\n//   //============================================================\r\n\r\n\r\n//   return chart;\r\n// }\r\n\r\nnv.models.multiBarChart = function() {\r\n  \"use strict\";\r\n  //============================================================\r\n  // Public Variables with Default Settings\r\n  //------------------------------------------------------------\r\n\r\n  var multibar = nv.models.multiBar()\r\n    , xAxis = nv.models.axis()\r\n    , yAxis = nv.models.axis()\r\n    , legend = nv.models.legend()\r\n    , controls = nv.models.legend()\r\n    ;\r\n\r\n  var margin = {top: 30, right: 20, bottom: 50, left: 60}\r\n    , width = null\r\n    , height = null\r\n    , color = nv.utils.defaultColor()\r\n    , showControls = true\r\n    , showLegend = true\r\n    , showXAxis = true\r\n    , showYAxis = true\r\n    , rightAlignYAxis = false\r\n    , reduceXTicks = true // if false a tick will show for every data point\r\n    , staggerLabels = false\r\n    , rotateLabels = 0\r\n    , tooltips = true\r\n    , tooltip = function(key, x, y, e, graph) {\r\n        return '<h3>' + key + '</h3>' +\r\n               '<p>' +  y + ' on ' + x + '</p>'\r\n      }\r\n    , x //can be accessed via chart.xScale()\r\n    , y //can be accessed via chart.yScale()\r\n    , state = { stacked: false }\r\n    , defaultState = null\r\n    , noData = \"No Data Available.\"\r\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\r\n    , controlWidth = function() { return showControls ? 180 : 0 }\r\n    , transitionDuration = 250\r\n    ;\r\n\r\n  multibar\r\n    .stacked(false)\r\n    ;\r\n  xAxis\r\n    .orient('bottom')\r\n    .tickPadding(7)\r\n    .highlightZero(true)\r\n    .showMaxMin(false)\r\n    .tickFormat(function(d) { return d })\r\n    ;\r\n  yAxis\r\n    .orient((rightAlignYAxis) ? 'right' : 'left')\r\n    .tickFormat(d3.format(',.1f'))\r\n    ;\r\n\r\n  controls.updateState(false);\r\n  //============================================================\r\n\r\n\r\n  //============================================================\r\n  // Private Variables\r\n  //------------------------------------------------------------\r\n\r\n  var showTooltip = function(e, offsetElement) {\r\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\r\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\r\n        x = xAxis.tickFormat()(multibar.x()(e.point, e.pointIndex)),\r\n        y = yAxis.tickFormat()(multibar.y()(e.point, e.pointIndex)),\r\n        content = tooltip(e.series.key, x, y, e, chart);\r\n\r\n    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);\r\n  };\r\n\r\n  //============================================================\r\n\r\n\r\n  function chart(selection) {\r\n    selection.each(function(data) {\r\n      // console.log(\"BARSERIE\",data);\r\n\r\n      // convert date-time to formated string\r\n      // \r\n      convertDateTime(data);\r\n      \r\n      //\r\n      \r\n      var container = d3.select(this),\r\n          that = this;\r\n\r\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\r\n                             - margin.left - margin.right,\r\n          availableHeight = (height || parseInt(container.style('height')) || 400)\r\n                             - margin.top - margin.bottom;\r\n\r\n      chart.update = function() { container.transition().duration(transitionDuration).call(chart) };\r\n      chart.container = this;\r\n\r\n      //set state.disabled\r\n      state.disabled = data.map(function(d) { return !!d.disabled });\r\n\r\n      if (!defaultState) {\r\n        var key;\r\n        defaultState = {};\r\n        for (key in state) {\r\n          if (state[key] instanceof Array)\r\n            defaultState[key] = state[key].slice(0);\r\n          else\r\n            defaultState[key] = state[key];\r\n        }\r\n      }\r\n      //------------------------------------------------------------\r\n      // Display noData message if there's nothing to show.\r\n\r\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\r\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\r\n\r\n        noDataText.enter().append('text')\r\n          .attr('class', 'nvd3 nv-noData')\r\n          .attr('dy', '-.7em')\r\n          .style('text-anchor', 'middle');\r\n\r\n        noDataText\r\n          .attr('x', margin.left + availableWidth / 2)\r\n          .attr('y', margin.top + availableHeight / 2)\r\n          .text(function(d) { return d });\r\n\r\n        return chart;\r\n      } else {\r\n        container.selectAll('.nv-noData').remove();\r\n      }\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Setup Scales\r\n\r\n      x = multibar.xScale();\r\n      y = multibar.yScale();\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Setup containers and skeleton of chart\r\n\r\n      var wrap = container.selectAll('g.nv-wrap.nv-multiBarWithLegend').data([data]);\r\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multiBarWithLegend').append('g');\r\n      var g = wrap.select('g');\r\n\r\n      gEnter.append('g').attr('class', 'nv-x nv-axis');\r\n      gEnter.append('g').attr('class', 'nv-y nv-axis');\r\n      gEnter.append('g').attr('class', 'nv-barsWrap');\r\n      gEnter.append('g').attr('class', 'nv-legendWrap');\r\n      gEnter.append('g').attr('class', 'nv-controlsWrap');\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Legend\r\n      \r\n      showLegend = showLegend && data.length > 1;\r\n\r\n      if (showLegend) {\r\n        legend.width(availableWidth - controlWidth());\r\n        \r\n        \r\n        if (multibar.barColor())\r\n          data.forEach(function(series,i) {\r\n            series.color = d3.rgb('#ccc').darker(i * 1.5).toString();\r\n          })\r\n\r\n        g.select('.nv-legendWrap')\r\n            .datum(data)\r\n            .call(legend);\r\n\r\n        if ( margin.top != legend.height()) {\r\n          margin.top = legend.height();\r\n          availableHeight = (height || parseInt(container.style('height')) || 400)\r\n                             - margin.top - margin.bottom;\r\n        }\r\n\r\n        g.select('.nv-legendWrap')\r\n            .attr('transform', 'translate(' + controlWidth() + ',' + (-margin.top) +')');\r\n      }\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Controls\r\n\r\n      if (showControls) {\r\n        var controlsData = [\r\n          { key: 'Grouped', disabled: multibar.stacked() },\r\n          { key: 'Stacked', disabled: !multibar.stacked() }\r\n        ];\r\n\r\n        controls.width(controlWidth()).color(['#444', '#444', '#444']);\r\n        g.select('.nv-controlsWrap')\r\n            .datum(controlsData)\r\n            .attr('transform', 'translate(0,' + (-margin.top) +')')\r\n            .call(controls);\r\n      }\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\r\n\r\n      if (rightAlignYAxis) {\r\n          g.select(\".nv-y.nv-axis\")\r\n              .attr(\"transform\", \"translate(\" + availableWidth + \",0)\");\r\n      }\r\n\r\n      //------------------------------------------------------------\r\n      // Main Chart Component(s)\r\n\r\n      multibar\r\n        .disabled(data.map(function(series) { return series.disabled }))\r\n        .width(availableWidth)\r\n        .height(availableHeight)\r\n        .color(data.map(function(d,i) {\r\n          return d.color || color(d, i);\r\n        }).filter(function(d,i) { return !data[i].disabled }))\r\n\r\n\r\n      var barsWrap = g.select('.nv-barsWrap')\r\n          .datum(data.filter(function(d) { return !d.disabled }))\r\n\r\n      barsWrap.transition().call(multibar);\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Setup Axes\r\n\r\n      if (showXAxis) {\r\n          xAxis\r\n            .scale(x)\r\n            .ticks( availableWidth / 100 )\r\n            .tickSize(-availableHeight, 0);\r\n\r\n          g.select('.nv-x.nv-axis')\r\n              .attr('transform', 'translate(0,' + y.range()[0] + ')');\r\n          g.select('.nv-x.nv-axis').transition()\r\n              .call(xAxis);\r\n\r\n          var xTicks = g.select('.nv-x.nv-axis > g').selectAll('g');\r\n\r\n          xTicks\r\n              .selectAll('line, text')\r\n              .style('opacity', 1)\r\n\r\n          if (staggerLabels) {\r\n              var getTranslate = function(x,y) {\r\n                  return \"translate(\" + x + \",\" + y + \")\";\r\n              };\r\n\r\n              var staggerUp = 5, staggerDown = 17;  //pixels to stagger by\r\n              // Issue #140\r\n              xTicks\r\n                .selectAll(\"text\")\r\n                .attr('transform', function(d,i,j) { \r\n                    return  getTranslate(0, (j % 2 == 0 ? staggerUp : staggerDown));\r\n                  });\r\n\r\n              var totalInBetweenTicks = d3.selectAll(\".nv-x.nv-axis .nv-wrap g g text\")[0].length;\r\n              g.selectAll(\".nv-x.nv-axis .nv-axisMaxMin text\")\r\n                .attr(\"transform\", function(d,i) {\r\n                    return getTranslate(0, (i === 0 || totalInBetweenTicks % 2 !== 0) ? staggerDown : staggerUp);\r\n                });\r\n          }\r\n\r\n          if (reduceXTicks)\r\n            xTicks\r\n              .filter(function(d,i) {\r\n                  return i % Math.ceil(data[0].values.length / (availableWidth / 100)) !== 0;\r\n                })\r\n              .selectAll('text, line')\r\n              .style('opacity', 0);\r\n\r\n          if(rotateLabels)\r\n            xTicks\r\n              .selectAll('.tick text')\r\n              .attr('transform', 'rotate(' + rotateLabels + ' 0,0)')\r\n              .style('text-anchor', rotateLabels > 0 ? 'start' : 'end');\r\n          \r\n          g.select('.nv-x.nv-axis').selectAll('g.nv-axisMaxMin text')\r\n              .style('opacity', 1);\r\n      }\r\n\r\n\r\n      if (showYAxis) {      \r\n          yAxis\r\n            .scale(y)\r\n            .ticks( availableHeight / 36 )\r\n            .tickSize( -availableWidth, 0);\r\n\r\n          g.select('.nv-y.nv-axis').transition()\r\n              .call(yAxis);\r\n      }\r\n\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n\r\n      //============================================================\r\n      // Event Handling/Dispatching (in chart's scope)\r\n      //------------------------------------------------------------\r\n\r\n      legend.dispatch.on('stateChange', function(newState) { \r\n        state = newState;\r\n        dispatch.stateChange(state);\r\n        chart.update();\r\n      });\r\n\r\n      controls.dispatch.on('legendClick', function(d,i) {\r\n        if (!d.disabled) return;\r\n        controlsData = controlsData.map(function(s) {\r\n          s.disabled = true;\r\n          return s;\r\n        });\r\n        d.disabled = false;\r\n\r\n        switch (d.key) {\r\n          case 'Grouped':\r\n            multibar.stacked(false);\r\n            break;\r\n          case 'Stacked':\r\n            multibar.stacked(true);\r\n            break;\r\n        }\r\n\r\n        state.stacked = multibar.stacked();\r\n        dispatch.stateChange(state);\r\n\r\n        chart.update();\r\n      });\r\n\r\n      dispatch.on('tooltipShow', function(e) {\r\n        if (tooltips) showTooltip(e, that.parentNode)\r\n      });\r\n\r\n      // Update chart from a state object passed to event handler\r\n      dispatch.on('changeState', function(e) {\r\n\r\n        if (typeof e.disabled !== 'undefined') {\r\n          data.forEach(function(series,i) {\r\n            series.disabled = e.disabled[i];\r\n          });\r\n\r\n          state.disabled = e.disabled;\r\n        }\r\n\r\n        if (typeof e.stacked !== 'undefined') {\r\n          multibar.stacked(e.stacked);\r\n          state.stacked = e.stacked;\r\n        }\r\n\r\n        chart.update();\r\n      });\r\n\r\n      //============================================================\r\n\r\n\r\n    });\r\n\r\n    return chart;\r\n  }\r\n\r\n\r\n  //============================================================\r\n  // Event Handling/Dispatching (out of chart's scope)\r\n  //------------------------------------------------------------\r\n\r\n  multibar.dispatch.on('elementMouseover.tooltip', function(e) {\r\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\r\n    dispatch.tooltipShow(e);\r\n  });\r\n\r\n  multibar.dispatch.on('elementMouseout.tooltip', function(e) {\r\n    dispatch.tooltipHide(e);\r\n  });\r\n  dispatch.on('tooltipHide', function() {\r\n    if (tooltips) nv.tooltip.cleanup();\r\n  });\r\n\r\n  //============================================================\r\n\r\n\r\n  //============================================================\r\n  // Expose Public Variables\r\n  //------------------------------------------------------------\r\n\r\n  // expose chart's sub-components\r\n  chart.dispatch = dispatch;\r\n  chart.multibar = multibar;\r\n  chart.legend = legend;\r\n  chart.xAxis = xAxis;\r\n  chart.yAxis = yAxis;\r\n\r\n  d3.rebind(chart, multibar, 'x', 'y', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY', 'clipEdge',\r\n   'id', 'stacked', 'stackOffset', 'delay', 'barColor','groupSpacing');\r\n\r\n  chart.options = nv.utils.optionsFunc.bind(chart);\r\n  \r\n  chart.margin = function(_) {\r\n    if (!arguments.length) return margin;\r\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\r\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\r\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\r\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\r\n    return chart;\r\n  };\r\n\r\n  chart.width = function(_) {\r\n    if (!arguments.length) return width;\r\n    width = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.height = function(_) {\r\n    if (!arguments.length) return height;\r\n    height = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.color = function(_) {\r\n    if (!arguments.length) return color;\r\n    color = nv.utils.getColor(_);\r\n    legend.color(color);\r\n    return chart;\r\n  };\r\n\r\n  chart.showControls = function(_) {\r\n    if (!arguments.length) return showControls;\r\n    showControls = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.showLegend = function(_) {\r\n    if (!arguments.length) return showLegend;\r\n    showLegend = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.showXAxis = function(_) {\r\n    if (!arguments.length) return showXAxis;\r\n    showXAxis = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.showYAxis = function(_) {\r\n    if (!arguments.length) return showYAxis;\r\n    showYAxis = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.rightAlignYAxis = function(_) {\r\n    if(!arguments.length) return rightAlignYAxis;\r\n    rightAlignYAxis = _;\r\n    yAxis.orient( (_) ? 'right' : 'left');\r\n    return chart;\r\n  };\r\n\r\n  chart.reduceXTicks= function(_) {\r\n    if (!arguments.length) return reduceXTicks;\r\n    reduceXTicks = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.rotateLabels = function(_) {\r\n    if (!arguments.length) return rotateLabels;\r\n    rotateLabels = _;\r\n    return chart;\r\n  }\r\n\r\n  chart.staggerLabels = function(_) {\r\n    if (!arguments.length) return staggerLabels;\r\n    staggerLabels = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.tooltip = function(_) {\r\n    if (!arguments.length) return tooltip;\r\n    tooltip = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.tooltips = function(_) {\r\n    if (!arguments.length) return tooltips;\r\n    tooltips = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.tooltipContent = function(_) {\r\n    if (!arguments.length) return tooltip;\r\n    tooltip = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.state = function(_) {\r\n    if (!arguments.length) return state;\r\n    state = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.defaultState = function(_) {\r\n    if (!arguments.length) return defaultState;\r\n    defaultState = _;\r\n    return chart;\r\n  };\r\n  \r\n  chart.noData = function(_) {\r\n    if (!arguments.length) return noData;\r\n    noData = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.transitionDuration = function(_) {\r\n    if (!arguments.length) return transitionDuration;\r\n    transitionDuration = _;\r\n    return chart;\r\n  };\r\n\r\n  //============================================================\r\n\r\n\r\n  return chart;\r\n}\r\n\r\nnv.models.multiBarHorizontal = function() {\r\n  \"use strict\";\r\n  //============================================================\r\n  // Public Variables with Default Settings\r\n  //------------------------------------------------------------\r\n\r\n  var margin = {top: 0, right: 0, bottom: 0, left: 0}\r\n    , width = 960\r\n    , height = 500\r\n    , id = Math.floor(Math.random() * 10000) //Create semi-unique ID in case user doesn't select one\r\n    , x = d3.scale.ordinal()\r\n    , y = d3.scale.linear()\r\n    , getX = function(d) { return d.x }\r\n    , getY = function(d) { return d.y }\r\n    , forceY = [0] // 0 is forced by default.. this makes sense for the majority of bar graphs... user can always do chart.forceY([]) to remove\r\n    , color = nv.utils.defaultColor()\r\n    , barColor = null // adding the ability to set the color for each rather than the whole group\r\n    , disabled // used in conjunction with barColor to communicate from multiBarHorizontalChart what series are disabled\r\n    , stacked = false\r\n    , showValues = false\r\n    , showBarLabels = false\r\n    , valuePadding = 60\r\n    , valueFormat = d3.format(',.2f')\r\n    , delay = 1200\r\n    , xDomain\r\n    , yDomain\r\n    , xRange\r\n    , yRange\r\n    , dispatch = d3.dispatch('chartClick', 'elementClick', 'elementDblClick', 'elementMouseover', 'elementMouseout')\r\n    ;\r\n\r\n  //============================================================\r\n\r\n\r\n  //============================================================\r\n  // Private Variables\r\n  //------------------------------------------------------------\r\n\r\n  var x0, y0 //used to store previous scales\r\n      ;\r\n\r\n  //============================================================\r\n\r\n\r\n  function chart(selection) {\r\n    selection.each(function(data) {\r\n\r\n\r\n\r\n      var availableWidth = width - margin.left - margin.right,\r\n          availableHeight = height - margin.top - margin.bottom,\r\n          container = d3.select(this);\r\n\r\n\r\n      if (stacked)\r\n        data = d3.layout.stack()\r\n                 .offset('zero')\r\n                 .values(function(d){ return d.values })\r\n                 .y(getY)\r\n                 (data);\r\n\r\n\r\n      //add series index to each data point for reference\r\n      data.forEach(function(series, i) {\r\n        series.values.forEach(function(point) {\r\n          point.series = i;\r\n        });\r\n      });\r\n\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // HACK for negative value stacking\r\n      if (stacked)\r\n        data[0].values.map(function(d,i) {\r\n          var posBase = 0, negBase = 0;\r\n          data.map(function(d) {\r\n            var f = d.values[i]\r\n            f.size = Math.abs(f.y);\r\n            if (f.y<0)  {\r\n              f.y1 = negBase - f.size;\r\n              negBase = negBase - f.size;\r\n            } else\r\n            {\r\n              f.y1 = posBase;\r\n              posBase = posBase + f.size;\r\n            }\r\n          });\r\n        });\r\n\r\n      // calc real left margin\r\n      // \r\n\r\n      // console.log(\"HBAR DATA\",data)\r\n      // var leftMargin;\r\n\r\n      // data.forEach(function(serie){\r\n      //   var current = serie.values.map(function(item){return nv.utils.calcApproxTextWidth})\r\n      //   leftMargin\r\n      // })\r\n            \r\n      \r\n      //------------------------------------------------------------\r\n      // Setup Scales\r\n\r\n      // remap and flatten the data for use in calculating the scales' domains\r\n      var seriesData = (xDomain && yDomain) ? [] : // if we know xDomain and yDomain, no need to calculate\r\n            data.map(function(d) {\r\n              return d.values.map(function(d,i) {\r\n                return { x: getX(d,i), y: getY(d,i), y0: d.y0, y1: d.y1 }\r\n              })\r\n            });\r\n\r\n      x   .domain(xDomain || d3.merge(seriesData).map(function(d) { return d.x }))\r\n          .rangeBands(xRange || [0, availableHeight], .1);\r\n\r\n      //y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return d.y + (stacked ? d.y0 : 0) }).concat(forceY)))\r\n      y   .domain(yDomain || d3.extent(d3.merge(seriesData).map(function(d) { return stacked ? (d.y > 0 ? d.y1 + d.y : d.y1 ) : d.y }).concat(forceY)))\r\n\r\n      if (showValues && !stacked)\r\n        y.range(yRange || [(y.domain()[0] < 0 ? valuePadding : 0), availableWidth - (y.domain()[1] > 0 ? valuePadding : 0) ]);\r\n      else\r\n        y.range(yRange || [0, availableWidth]);\r\n\r\n      x0 = x0 || x;\r\n      y0 = y0 || d3.scale.linear().domain(y.domain()).range([y(0),y(0)]);\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Setup containers and skeleton of chart\r\n\r\n      var wrap = d3.select(this).selectAll('g.nv-wrap.nv-multibarHorizontal').data([data]);\r\n      var wrapEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multibarHorizontal');\r\n      var defsEnter = wrapEnter.append('defs');\r\n      var gEnter = wrapEnter.append('g');\r\n      var g = wrap.select('g');\r\n\r\n      gEnter.append('g').attr('class', 'nv-groups');\r\n\r\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n\r\n      var groups = wrap.select('.nv-groups').selectAll('.nv-group')\r\n          .data(function(d) { return d }, function(d,i) { return i });\r\n      groups.enter().append('g')\r\n          .style('stroke-opacity', 1e-6)\r\n          .style('fill-opacity', 1e-6);\r\n      groups.exit().transition()\r\n          .style('stroke-opacity', 1e-6)\r\n          .style('fill-opacity', 1e-6)\r\n          .remove();\r\n      groups\r\n          .attr('class', function(d,i) { return 'nv-group nv-series-' + i })\r\n          .classed('hover', function(d) { return d.hover })\r\n          .style('fill', function(d,i){ return color(d, i) })\r\n          .style('stroke', function(d,i){ return color(d, i) });\r\n      groups.transition()\r\n          .style('stroke-opacity', 1)\r\n          .style('fill-opacity', .75);\r\n\r\n\r\n      var bars = groups.selectAll('g.nv-bar')\r\n          .data(function(d) { return d.values });\r\n\r\n      bars.exit().remove();\r\n\r\n\r\n      var barsEnter = bars.enter().append('g')\r\n          .attr('transform', function(d,i,j) {\r\n              return 'translate(' + y0(stacked ? d.y0 : 0) + ',' + (stacked ? 0 : (j * x.rangeBand() / data.length ) + x(getX(d,i))) + ')'\r\n          });\r\n\r\n      barsEnter.append('rect')\r\n          .attr('width', 0)\r\n          .attr('height', x.rangeBand() / (stacked ? 1 : data.length) )\r\n\r\n      bars\r\n          .on('mouseover', function(d,i) { //TODO: figure out why j works above, but not here\r\n            d3.select(this).classed('hover', true);\r\n            dispatch.elementMouseover({\r\n              value: getY(d,i),\r\n              point: d,\r\n              series: data[d.series],\r\n              pos: [ y(getY(d,i) + (stacked ? d.y0 : 0)), x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length) ],\r\n              pointIndex: i,\r\n              seriesIndex: d.series,\r\n              e: d3.event\r\n            });\r\n          })\r\n          .on('mouseout', function(d,i) {\r\n            d3.select(this).classed('hover', false);\r\n            dispatch.elementMouseout({\r\n              value: getY(d,i),\r\n              point: d,\r\n              series: data[d.series],\r\n              pointIndex: i,\r\n              seriesIndex: d.series,\r\n              e: d3.event\r\n            });\r\n          })\r\n          .on('click', function(d,i) {\r\n            dispatch.elementClick({\r\n              value: getY(d,i),\r\n              point: d,\r\n              series: data[d.series],\r\n              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\r\n              pointIndex: i,\r\n              seriesIndex: d.series,\r\n              e: d3.event\r\n            });\r\n            d3.event.stopPropagation();\r\n          })\r\n          .on('dblclick', function(d,i) {\r\n            dispatch.elementDblClick({\r\n              value: getY(d,i),\r\n              point: d,\r\n              series: data[d.series],\r\n              pos: [x(getX(d,i)) + (x.rangeBand() * (stacked ? data.length / 2 : d.series + .5) / data.length), y(getY(d,i) + (stacked ? d.y0 : 0))],  // TODO: Figure out why the value appears to be shifted\r\n              pointIndex: i,\r\n              seriesIndex: d.series,\r\n              e: d3.event\r\n            });\r\n            d3.event.stopPropagation();\r\n          });\r\n\r\n\r\n      barsEnter.append('text');\r\n\r\n      if (showValues && !stacked) {\r\n        bars.select('text')\r\n            .attr('text-anchor', function(d,i) { return getY(d,i) < 0 ? 'end' : 'start' })\r\n            .attr('y', x.rangeBand() / (data.length * 2))\r\n            .attr('dy', '.32em')\r\n            .text(function(d,i) { return valueFormat(getY(d,i)) })\r\n        bars.transition()\r\n          .select('text')\r\n            .attr('x', function(d,i) { return getY(d,i) < 0 ? -4 : y(getY(d,i)) - y(0) + 4 })\r\n      } else {\r\n        bars.selectAll('text').text('');\r\n      }\r\n\r\n      if (showBarLabels && !stacked) {\r\n        barsEnter.append('text').classed('nv-bar-label',true);\r\n        bars.select('text.nv-bar-label')\r\n            .attr('text-anchor', function(d,i) { return getY(d,i) < 0 ? 'start' : 'end' })\r\n            .attr('y', x.rangeBand() / (data.length * 2))\r\n            .attr('dy', '.32em')\r\n            .text(function(d,i) { return getX(d,i) });\r\n        bars.transition()\r\n          .select('text.nv-bar-label')\r\n            .attr('x', function(d,i) { return getY(d,i) < 0 ? y(0) - y(getY(d,i)) + 4 : -4 });\r\n      }\r\n      else {\r\n        bars.selectAll('text.nv-bar-label').text('');\r\n      }\r\n\r\n      bars\r\n          .attr('class', function(d,i) { return getY(d,i) < 0 ? 'nv-bar negative' : 'nv-bar positive'})\r\n\r\n      if (barColor) {\r\n        if (!disabled) disabled = data.map(function() { return true });\r\n        bars\r\n          .style('fill', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); })\r\n          .style('stroke', function(d,i,j) { return d3.rgb(barColor(d,i)).darker(  disabled.map(function(d,i) { return i }).filter(function(d,i){ return !disabled[i]  })[j]   ).toString(); });\r\n      }\r\n\r\n      if (stacked)\r\n        bars.transition()\r\n            .attr('transform', function(d,i) {\r\n              return 'translate(' + y(d.y1) + ',' + x(getX(d,i)) + ')'\r\n            })\r\n          .select('rect')\r\n            .attr('width', function(d,i) {\r\n              return Math.abs(y(getY(d,i) + d.y0) - y(d.y0))\r\n            })\r\n            .attr('height', x.rangeBand() );\r\n      else\r\n        bars.transition()\r\n            .attr('transform', function(d,i) {\r\n              //TODO: stacked must be all positive or all negative, not both?\r\n              return 'translate(' +\r\n              (getY(d,i) < 0 ? y(getY(d,i)) : y(0))\r\n              + ',' +\r\n              (d.series * x.rangeBand() / data.length\r\n              +\r\n              x(getX(d,i)) )\r\n              + ')'\r\n            })\r\n          .select('rect')\r\n            .attr('height', x.rangeBand() / data.length )\r\n            .attr('width', function(d,i) {\r\n              return Math.max(Math.abs(y(getY(d,i)) - y(0)),1)\r\n            });\r\n\r\n\r\n      //store old scales for use in transitions on update\r\n      x0 = x.copy();\r\n      y0 = y.copy();\r\n\r\n    });\r\n\r\n    return chart;\r\n  }\r\n\r\n\r\n  //============================================================\r\n  // Expose Public Variables\r\n  //------------------------------------------------------------\r\n\r\n  chart.dispatch = dispatch;\r\n\r\n  chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n  chart.x = function(_) {\r\n    if (!arguments.length) return getX;\r\n    getX = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.y = function(_) {\r\n    if (!arguments.length) return getY;\r\n    getY = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.margin = function(_) {\r\n    if (!arguments.length) return margin;\r\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\r\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\r\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\r\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\r\n    return chart;\r\n  };\r\n\r\n  chart.width = function(_) {\r\n    if (!arguments.length) return width;\r\n    width = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.height = function(_) {\r\n    if (!arguments.length) return height;\r\n    height = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.xScale = function(_) {\r\n    if (!arguments.length) return x;\r\n    x = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.yScale = function(_) {\r\n    if (!arguments.length) return y;\r\n    y = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.xDomain = function(_) {\r\n    if (!arguments.length) return xDomain;\r\n    xDomain = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.yDomain = function(_) {\r\n    if (!arguments.length) return yDomain;\r\n    yDomain = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.xRange = function(_) {\r\n    if (!arguments.length) return xRange;\r\n    xRange = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.yRange = function(_) {\r\n    if (!arguments.length) return yRange;\r\n    yRange = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.forceY = function(_) {\r\n    if (!arguments.length) return forceY;\r\n    forceY = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.stacked = function(_) {\r\n    if (!arguments.length) return stacked;\r\n    stacked = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.color = function(_) {\r\n    if (!arguments.length) return color;\r\n    color = nv.utils.getColor(_);\r\n    return chart;\r\n  };\r\n\r\n  chart.barColor = function(_) {\r\n    if (!arguments.length) return barColor;\r\n    barColor = nv.utils.getColor(_);\r\n    return chart;\r\n  };\r\n\r\n  chart.disabled = function(_) {\r\n    if (!arguments.length) return disabled;\r\n    disabled = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.id = function(_) {\r\n    if (!arguments.length) return id;\r\n    id = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.delay = function(_) {\r\n    if (!arguments.length) return delay;\r\n    delay = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.showValues = function(_) {\r\n    if (!arguments.length) return showValues;\r\n    showValues = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.showBarLabels = function(_) {\r\n    if (!arguments.length) return showBarLabels;\r\n    showBarLabels = _;\r\n    return chart;\r\n  };\r\n\r\n\r\n  chart.valueFormat= function(_) {\r\n    if (!arguments.length) return valueFormat;\r\n    valueFormat = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.valuePadding = function(_) {\r\n    if (!arguments.length) return valuePadding;\r\n    valuePadding = _;\r\n    return chart;\r\n  };\r\n\r\n  //============================================================\r\n\r\n\r\n  return chart;\r\n}\r\n\r\nnv.models.multiBarHorizontalChart = function() {\r\n  \"use strict\";\r\n  //============================================================\r\n  // Public Variables with Default Settings\r\n  //------------------------------------------------------------\r\n\r\n  var multibar = nv.models.multiBarHorizontal()\r\n    , xAxis = nv.models.axis()\r\n    , yAxis = nv.models.axis()\r\n    , legend = nv.models.legend().height(30)\r\n    , controls = nv.models.legend().height(30)\r\n    ;\r\n\r\n  var margin = {top: 30, right: 20, bottom: 50, left: 60}\r\n    , width = null\r\n    , height = null\r\n    , color = nv.utils.defaultColor()\r\n    , showControls = true\r\n    , showLegend = true\r\n    , showXAxis = true\r\n    , showYAxis = true\r\n    , stacked = false\r\n    , tooltips = true\r\n    , tooltip = function(key, x, y, e, graph) {\r\n        return '<h3>' + key + ' - ' + x + '</h3>' +\r\n               '<p>' +  y + '</p>'\r\n      }\r\n    , x //can be accessed via chart.xScale()\r\n    , y //can be accessed via chart.yScale()\r\n    , state = { stacked: stacked }\r\n    , defaultState = null\r\n    , noData = 'No Data Available.'\r\n    , dispatch = d3.dispatch('tooltipShow', 'tooltipHide', 'stateChange', 'changeState')\r\n    , controlWidth = function() { return showControls ? 180 : 0 }\r\n    , transitionDuration = 250\r\n    ;\r\n\r\n  multibar\r\n    .stacked(stacked)\r\n    ;\r\n  xAxis\r\n    .orient('left')\r\n    .tickPadding(5)\r\n    .highlightZero(false)\r\n    .showMaxMin(false)\r\n    .tickFormat(function(d) { return d })\r\n    ;\r\n  yAxis\r\n    .orient('bottom')\r\n    .tickFormat(d3.format(',.1f'))\r\n    ;\r\n\r\n  controls.updateState(false);\r\n  //============================================================\r\n\r\n\r\n  //============================================================\r\n  // Private Variables\r\n  //------------------------------------------------------------\r\n\r\n  var showTooltip = function(e, offsetElement) {\r\n    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),\r\n        top = e.pos[1] + ( offsetElement.offsetTop || 0),\r\n        x = xAxis.tickFormat()(multibar.x()(e.point, e.pointIndex)),\r\n        y = yAxis.tickFormat()(multibar.y()(e.point, e.pointIndex)),\r\n        content = tooltip(e.series.key, x, y, e, chart);\r\n\r\n    nv.tooltip.show([left, top], content, e.value < 0 ? 'e' : 'w', null, offsetElement);\r\n  };\r\n\r\n  //============================================================\r\n\r\n\r\n  function chart(selection) {\r\n    selection.each(function(data) {\r\n\r\n      // convert date-time to formated string\r\n      convertDateTime(data);\r\n\r\n      var container = d3.select(this),\r\n          that = this;\r\n\r\n      var availableWidth = (width  || parseInt(container.style('width')) || 960)\r\n                             - margin.left - margin.right,\r\n          availableHeight = (height || parseInt(container.style('height')) || 400)\r\n                             - margin.top - margin.bottom;\r\n\r\n      chart.update = function() { container.transition().duration(transitionDuration).call(chart) };\r\n      chart.container = this;\r\n\r\n      //set state.disabled\r\n      state.disabled = data.map(function(d) { return !!d.disabled });\r\n\r\n      if (!defaultState) {\r\n        var key;\r\n        defaultState = {};\r\n        for (key in state) {\r\n          if (state[key] instanceof Array)\r\n            defaultState[key] = state[key].slice(0);\r\n          else\r\n            defaultState[key] = state[key];\r\n        }\r\n      }\r\n\r\n      //------------------------------------------------------------\r\n      // Display No Data message if there's nothing to show.\r\n\r\n      if (!data || !data.length || !data.filter(function(d) { return d.values.length }).length) {\r\n        var noDataText = container.selectAll('.nv-noData').data([noData]);\r\n\r\n        noDataText.enter().append('text')\r\n          .attr('class', 'nvd3 nv-noData')\r\n          .attr('dy', '-.7em')\r\n          .style('text-anchor', 'middle');\r\n\r\n        noDataText\r\n          .attr('x', margin.left + availableWidth / 2)\r\n          .attr('y', margin.top + availableHeight / 2)\r\n          .text(function(d) { return d });\r\n\r\n        return chart;\r\n      } else {\r\n        container.selectAll('.nv-noData').remove();\r\n      }\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Setup Scales\r\n\r\n      x = multibar.xScale();\r\n      y = multibar.yScale();\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Setup containers and skeleton of chart\r\n\r\n      var wrap = container.selectAll('g.nv-wrap.nv-multiBarHorizontalChart').data([data]);\r\n      var gEnter = wrap.enter().append('g').attr('class', 'nvd3 nv-wrap nv-multiBarHorizontalChart').append('g');\r\n      var g = wrap.select('g');\r\n\r\n      gEnter.append('g').attr('class', 'nv-x nv-axis');\r\n      gEnter.append('g').attr('class', 'nv-y nv-axis')\r\n            .append('g').attr('class', 'nv-zeroLine')\r\n            .append('line');\r\n      gEnter.append('g').attr('class', 'nv-barsWrap');\r\n      gEnter.append('g').attr('class', 'nv-legendWrap');\r\n      gEnter.append('g').attr('class', 'nv-controlsWrap');\r\n      \r\n      // calculate real left margin\r\n      gEnter.append('g')\r\n        .attr('class', 'nv-temp nv-axis')\r\n        .style('opacity',0);\r\n\r\n\r\n\r\n      var seriesData = data.map(function(d) {\r\n              return d.values.map(function(d,i) {\r\n                return d.label\r\n              })\r\n            });\r\n\r\n      var temp = g\r\n                  .select('.nv-temp.nv-axis')\r\n                  .selectAll('g')\r\n                  .data(d3.merge(seriesData))\r\n\r\n      temp.exit().remove();            \r\n                  \r\n      var tempTicks = temp\r\n        .enter()\r\n        .append('g')\r\n        .attr('class','tick')\r\n        .append('text')\r\n        .text(function(d){return d})   \r\n\r\n\r\nsetTimeout(\r\n  function(){\r\n\r\n        margin.left = 0;\r\n        g\r\n          .select('.nv-temp.nv-axis')\r\n          .selectAll('text')\r\n          .each(function(d){\r\n            margin.left = d3.max([margin.left,this.getComputedTextLength()])\r\n          })   \r\n\r\n        margin.left*=1.1;\r\n\r\n        availableWidth = (width  || parseInt(container.style('width')) || 960)\r\n                             - margin.left - margin.right,\r\n        availableHeight = (height || parseInt(container.style('height')) || 400)\r\n                             - margin.top - margin.bottom;        \r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Legend\r\n      \r\n\r\n      showLegend = showLegend && data.length > 1;\r\n\r\n      if (showLegend) {\r\n        legend.width(availableWidth - controlWidth());\r\n\r\n        if (multibar.barColor())\r\n          data.forEach(function(series,i) {\r\n            series.color = d3.rgb('#ccc').darker(i * 1.5).toString();\r\n          })\r\n\r\n        g.select('.nv-legendWrap')\r\n            .datum(data)\r\n            .call(legend);\r\n\r\n        if ( margin.top != legend.height()) {\r\n          margin.top = legend.height();\r\n          availableHeight = (height || parseInt(container.style('height')) || 400)\r\n                             - margin.top - margin.bottom;\r\n        }\r\n\r\n        g.select('.nv-legendWrap')\r\n            .attr('transform', 'translate(' + controlWidth() + ',' + (-margin.top) +')');\r\n      }\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Controls\r\n\r\n      if (showControls) {\r\n        var controlsData = [\r\n          { key: 'Grouped', disabled: multibar.stacked() },\r\n          { key: 'Stacked', disabled: !multibar.stacked() }\r\n        ];\r\n\r\n        controls.width(controlWidth()).color(['#444', '#444', '#444']);\r\n        g.select('.nv-controlsWrap')\r\n            .datum(controlsData)\r\n            .attr('transform', 'translate(0,' + (-margin.top) +')')\r\n            .call(controls);\r\n      }\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      wrap.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Main Chart Component(s)\r\n\r\n      multibar\r\n        .disabled(data.map(function(series) { return series.disabled }))\r\n        .width(availableWidth)\r\n        .height(availableHeight)\r\n        .color(data.map(function(d,i) {\r\n          return d.color || color(d, i);\r\n        }).filter(function(d,i) { return !data[i].disabled }))\r\n\r\n\r\n      var barsWrap = g.select('.nv-barsWrap')\r\n          .datum(data.filter(function(d) { return !d.disabled }))\r\n\r\n      barsWrap.transition().call(multibar);\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n      //------------------------------------------------------------\r\n      // Setup Axes\r\n\r\n      if (showXAxis) {\r\n          xAxis\r\n            .scale(x)\r\n            .ticks( availableHeight / 24 )\r\n            .tickSize(-availableWidth, 0);\r\n\r\n          g.select('.nv-x.nv-axis').transition()\r\n              .call(xAxis);\r\n\r\n          var xTicks = g.select('.nv-x.nv-axis').selectAll('g');\r\n\r\n          xTicks\r\n              .selectAll('line, text');\r\n\r\n         // console.log(\"xTicks\",xTicks)\r\n         var realLeftMargin = 0;     \r\n        //  setTimeout(function(){\r\n        //  xTicks\r\n        //   .selectAll(\"text\")\r\n        //   .each(function(d){\r\n        //       var current = this.getComputedTextLength();\r\n        //       // console.log(this,current,realLeftMargin);\r\n        //       realLeftMargin = (realLeftMargin< current)?current : realLeftMargin;\r\n        //   })\r\n\r\n        //   realLeftMargin *= 1.1;\r\n        //    wrap.transition().attr('transform', 'translate(' + realLeftMargin + ',' + margin.top + ')');\r\n        // },0);   \r\n      }\r\n\r\n      if (showYAxis) {\r\n          yAxis\r\n            .scale(y)\r\n            .ticks( availableWidth / 100 )\r\n            .tickSize( -availableHeight, 0);\r\n\r\n          g.select('.nv-y.nv-axis')\r\n              .attr('transform', 'translate(0,' + availableHeight + ')');\r\n          g.select('.nv-y.nv-axis').transition()\r\n              .call(yAxis);\r\n      }\r\n\r\n      // Zero line\r\n      g.select(\".nv-zeroLine line\")\r\n        .attr(\"x1\", y(0))\r\n        .attr(\"x2\", y(0))\r\n        .attr(\"y1\", 0)\r\n        .attr(\"y2\", -availableHeight)\r\n        ;\r\n\r\n      //------------------------------------------------------------\r\n\r\n\r\n\r\n      //============================================================\r\n      // Event Handling/Dispatching (in chart's scope)\r\n      //------------------------------------------------------------\r\n\r\n      legend.dispatch.on('stateChange', function(newState) {\r\n        state = newState;\r\n        dispatch.stateChange(state);\r\n        chart.update();\r\n      });\r\n\r\n      controls.dispatch.on('legendClick', function(d,i) {\r\n        if (!d.disabled) return;\r\n        controlsData = controlsData.map(function(s) {\r\n          s.disabled = true;\r\n          return s;\r\n        });\r\n        d.disabled = false;\r\n\r\n        switch (d.key) {\r\n          case 'Grouped':\r\n            multibar.stacked(false);\r\n            break;\r\n          case 'Stacked':\r\n            multibar.stacked(true);\r\n            break;\r\n        }\r\n\r\n        state.stacked = multibar.stacked();\r\n        dispatch.stateChange(state);\r\n\r\n        chart.update();\r\n      });\r\n\r\n      dispatch.on('tooltipShow', function(e) {\r\n        if (tooltips) showTooltip(e, that.parentNode);\r\n      });\r\n\r\n      // Update chart from a state object passed to event handler\r\n      dispatch.on('changeState', function(e) {\r\n\r\n        if (typeof e.disabled !== 'undefined') {\r\n          data.forEach(function(series,i) {\r\n            series.disabled = e.disabled[i];\r\n          });\r\n\r\n          state.disabled = e.disabled;\r\n        }\r\n\r\n        if (typeof e.stacked !== 'undefined') {\r\n          multibar.stacked(e.stacked);\r\n          state.stacked = e.stacked;\r\n        }\r\n\r\n        chart.update();\r\n      });\r\n      //============================================================\r\n},0);\r\n\r\n    });\r\n\r\n\r\n\r\n    return chart;\r\n  }\r\n\r\n\r\n  //============================================================\r\n  // Event Handling/Dispatching (out of chart's scope)\r\n  //------------------------------------------------------------\r\n\r\n  multibar.dispatch.on('elementMouseover.tooltip', function(e) {\r\n    e.pos = [e.pos[0] +  margin.left, e.pos[1] + margin.top];\r\n    dispatch.tooltipShow(e);\r\n  });\r\n\r\n  multibar.dispatch.on('elementMouseout.tooltip', function(e) {\r\n    dispatch.tooltipHide(e);\r\n  });\r\n  dispatch.on('tooltipHide', function() {\r\n    if (tooltips) nv.tooltip.cleanup();\r\n  });\r\n\r\n  //============================================================\r\n\r\n\r\n  //============================================================\r\n  // Expose Public Variables\r\n  //------------------------------------------------------------\r\n\r\n  // expose chart's sub-components\r\n  chart.dispatch = dispatch;\r\n  chart.multibar = multibar;\r\n  chart.legend = legend;\r\n  chart.xAxis = xAxis;\r\n  chart.yAxis = yAxis;\r\n\r\n  d3.rebind(chart, multibar, 'x', 'y', 'xDomain', 'yDomain', 'xRange', 'yRange', 'forceX', 'forceY',\r\n    'clipEdge', 'id', 'delay', 'showValues','showBarLabels', 'valueFormat', 'stacked', 'barColor');\r\n\r\n  chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n  chart.margin = function(_) {\r\n    if (!arguments.length) return margin;\r\n    margin.top    = typeof _.top    != 'undefined' ? _.top    : margin.top;\r\n    margin.right  = typeof _.right  != 'undefined' ? _.right  : margin.right;\r\n    margin.bottom = typeof _.bottom != 'undefined' ? _.bottom : margin.bottom;\r\n    margin.left   = typeof _.left   != 'undefined' ? _.left   : margin.left;\r\n    return chart;\r\n  };\r\n\r\n  chart.width = function(_) {\r\n    if (!arguments.length) return width;\r\n    width = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.height = function(_) {\r\n    if (!arguments.length) return height;\r\n    height = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.color = function(_) {\r\n    if (!arguments.length) return color;\r\n    color = nv.utils.getColor(_);\r\n    legend.color(color);\r\n    return chart;\r\n  };\r\n\r\n  chart.showControls = function(_) {\r\n    if (!arguments.length) return showControls;\r\n    showControls = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.showLegend = function(_) {\r\n    if (!arguments.length) return showLegend;\r\n    showLegend = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.showXAxis = function(_) {\r\n    if (!arguments.length) return showXAxis;\r\n    showXAxis = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.showYAxis = function(_) {\r\n    if (!arguments.length) return showYAxis;\r\n    showYAxis = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.tooltip = function(_) {\r\n    if (!arguments.length) return tooltip;\r\n    tooltip = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.tooltips = function(_) {\r\n    if (!arguments.length) return tooltips;\r\n    tooltips = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.tooltipContent = function(_) {\r\n    if (!arguments.length) return tooltip;\r\n    tooltip = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.state = function(_) {\r\n    if (!arguments.length) return state;\r\n    state = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.defaultState = function(_) {\r\n    if (!arguments.length) return defaultState;\r\n    defaultState = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.noData = function(_) {\r\n    if (!arguments.length) return noData;\r\n    noData = _;\r\n    return chart;\r\n  };\r\n\r\n  chart.transitionDuration = function(_) {\r\n    if (!arguments.length) return transitionDuration;\r\n    transitionDuration = _;\r\n    return chart;\r\n  };\r\n  //============================================================\r\n\r\n\r\n  return chart;\r\n}\r\n\r\n\r\n\r\n  nv.models.gantt = function () {\r\n    \"use strict\";\r\n    //============================================================\r\n    // Public Variables with Default Settings\r\n    //------------------------------------------------------------\r\n\r\n\r\n    var margin = { top: 5, right: 40, bottom: 5, left: 20 },\r\n        width = null,\r\n        height = null,\r\n        xAxis = nv.models.axis(),\r\n        transitionDuration = 250,\r\n        interpolate =\"cardinal\",//\"step-after\",\r\n        getX = function (d, i) {\r\n          return d.x;\r\n        } // accessor to get the x value from a data point\r\n        ,\r\n        getY = function (d, i) {\r\n          return d.y;\r\n        } // accessor to get the y value from a data point\r\n        ,\r\n        // getLabel = undefined //function(d) { return d.y }\r\n        // ,\r\n        defined = function (d, i) {\r\n          return !isNaN(getY(d, i)) && getY(d, i) !== null;\r\n        } // allows a line to be not continuous when it is not defined\r\n        ,\r\n        decoration = {\r\n          process:{\r\n            color:\"#368A55\",\r\n            id:{\r\n              enable:true\r\n            },\r\n            title:{\r\n              enable:false,\r\n              font:{\r\n                family:\"Tahoma\",\r\n                size:\"medium\",\r\n                color:\"#000000\",\r\n                weight:\"bold\"\r\n              }\r\n            }\r\n          },\r\n          task: {\r\n            color:\"#007095\",\r\n            id:{\r\n              enable:true\r\n            },\r\n             title:{\r\n              enable:false,\r\n              font:{\r\n                family:\"Arial\",\r\n                size:\"small\",\r\n                color:\"#000000\",\r\n                weight:\"bold\"\r\n              }\r\n            }\r\n          },\r\n          cause:{\r\n            enable:false\r\n\r\n          },\r\n          dependency:{\r\n            enable:false\r\n          },\r\n          income:{\r\n            enable:false,\r\n            color:\"#43AC6A\",\r\n            width:\"1.5px\",\r\n            font:{\r\n                family:\"Arial\",\r\n                size:\"10px\",\r\n                color:\"#43AC6A\",\r\n                weight:\"bold\"\r\n            }\r\n          },\r\n          expenditure:{\r\n            enable:false,\r\n            color:\"#F04124\",\r\n            width:\"1.5px\",\r\n            font:{\r\n                family:\"Arial\",\r\n                size:\"10px\",\r\n                color:\"#F04124\",\r\n                weight:\"bold\"\r\n            }\r\n          } \r\n        }, \r\n        xScale = d3.scale.linear(),\r\n        yScale = d3.scale.ordinal()//.domain(taskTypes).rangeRoundBands([ 0, height - margin.top - margin.bottom ], .1);\r\n    \r\n    ;\r\n\r\n   \r\n    //============================================================\r\n    function distinct(array){\r\n\r\n      array.sort(function(a,b){return ((a.x-b.x)==0)? (a.task-b.task):(a.x-b.x)})\r\n      var i = 0;\r\n      while(i < array.length){\r\n        if( (i>0) \r\n              && (array[i].x == array[i-1].x) \r\n              && (array[i].task == array[i-1].task)\r\n              && (array[i].type == array[i-1].type)\r\n          ){\r\n          array.splice(i,1)\r\n        }else{\r\n          i++\r\n        }\r\n      }\r\n      return array;\r\n    }\r\n\r\n    function causeColor(d){\r\n      if(!d.type) return \"#555555\";\r\n      if(d.type == \"\") return \"#555555\";\r\n      if(d.type == \"+\") return \"#43AC6A\";\r\n      if(d.type == \"-\") return \"#F04124\";\r\n      if(d.type == \"\") return \"#555555\";\r\n    }\r\n\r\n    function causeWidth(d){\r\n      if(!d.type) return 1;\r\n      if(d.type == \"\") return 1;\r\n      if(d.type == \"+\") return 8;\r\n      if(d.type == \"-\") return 8;\r\n      if(d.type == \"\") return 1;\r\n    }\r\n\r\n    function causeOpacity(d){\r\n      if(!d.type) return 0.7;\r\n      if(d.type == \"\") return 0.7;\r\n      if(d.type == \"+\") return 0.4;\r\n      if(d.type == \"-\") return 0.4;\r\n      if(d.type == \"\") return 0.7;\r\n    }\r\n\r\n\r\n\r\n    function nodeToNodePath(d) {\r\n      var deltaX = Math.abs(0.7*(-d.source.x + d.target.x));\r\n       \r\n      var amx = []\r\n        amx.push({x:d.source.x+deltaX,y:d.source.y})\r\n        amx.push({x:d.target.x-deltaX,y:d.target.y})\r\n      \r\n      return \"M\" + d.source.x + \",\" + d.source.y\r\n           + \"C\" + amx[0].x + \",\" + amx[0].y\r\n           + \" \" + amx[1].x + \",\" + amx[1].y\r\n           + \" \" + d.target.x + \",\" + d.target.y;\r\n    }\r\n\r\n    function arrowPath(d){\r\n\r\n      d.width = (d.width) ? d.width : 1;\r\n      var x = d.x;\r\n      var dx = d.width;\r\n      var y = d.y;\r\n      var dy = d.width;\r\n\r\n\r\n\r\n      var values = [\r\n        { \"x\":x-dx*2.5, \"y\":y-dy },\r\n        { \"x\":x, \"y\":y   }, \r\n        { \"x\":x-dx*2.5, \"y\":y+dy }\r\n      ]\r\n\r\n      return d3.svg.area()\r\n            .interpolate(\"linear-closed\")\r\n            .defined(defined)\r\n            .x(function (p, i) {\r\n                  return p.x;\r\n            })\r\n            .y0(function (p, i) {\r\n                  return p.y;\r\n            })\r\n            .y1(function (p, i) {\r\n                  return d.y;\r\n            })\r\n            .apply(this, [values]);\r\n    } \r\n\r\n    function arrowLength(d){\r\n      var width = causeWidth(d);\r\n      width = (width < 4) ? 4 : width;\r\n      return width*2.5;\r\n    }\r\n\r\n\r\n    function textWrap(text, width) {\r\n      text.each(function() {\r\n        var text = d3.select(this),\r\n            words = text.text().split(/\\s+/).reverse(),\r\n            word,\r\n            line = [],\r\n            lineNumber = 0,\r\n            lineHeight = 1.1, // ems\r\n            y = text.attr(\"y\"),\r\n            dy = parseFloat(text.attr(\"dy\")),\r\n            x = text.attr(\"x\"),\r\n            tspan = text.text(null).append(\"tspan\").attr(\"x\", x).attr(\"y\", y).attr(\"dy\", dy + \"em\");\r\n        while (word = words.pop()) {\r\n          line.push(word);\r\n          tspan.text(line.join(\" \"));\r\n          if (tspan.node().getComputedTextLength() > width) {\r\n            line.pop();\r\n            tspan.text(line.join(\" \"));\r\n            line = [word];\r\n            tspan = text\r\n              .append(\"tspan\")\r\n              .attr(\"x\", x)\r\n              .attr(\"y\", y)\r\n              .attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\")\r\n              .text(word);\r\n          }\r\n        }\r\n        // TODO correct dy calculation for positive shift\r\n        text\r\n          .selectAll(\"tspan\")\r\n          .attr(\"dy\", function(d){ return lineNumber-- * lineHeight*Math.sign(dy) + dy + \"em\"})\r\n\r\n      });\r\n    }   \r\n\r\n    function chart(selection) {\r\n      selection.each(function (data) {\r\n        // console.log(\"gantt\", data)\r\n        if(data.length == 0) return;\r\n        // prepare data\r\n        var data = data.filter(function (item) {\r\n          return item.disabled !== true;\r\n        });\r\n\r\n        var markersData = [];\r\n        \r\n        data\r\n          .filter(function(d){return d.expenditure !== undefined})\r\n          .map(function(d){\r\n            return d.expenditure.filter(function(p){return p.marker!==undefined})\r\n          })\r\n          .concat(\r\n            data\r\n              .filter(function(d){return d.income !== undefined})\r\n              .map(function(d){\r\n                return d.income.filter(function(p){return p.marker!==undefined})\r\n              })\r\n          )\r\n          .forEach(function(d){\r\n            markersData = markersData.concat(d) \r\n          });\r\n\r\n\r\n         var linksData = [];\r\n         data\r\n            .filter(function(d){return d.causes !== undefined})\r\n            .map(function(d){return d.causes})\r\n            .forEach(function(d){\r\n              linksData = linksData.concat(d); \r\n            })\r\n\r\n         var sourcesData = distinct(\r\n                          linksData\r\n                            .map(function(item){return item.src})\r\n                       );       \r\n\r\n         var targetsData = distinct(\r\n                          linksData\r\n                            .map(function(item){return item.target})\r\n                       );\r\n\r\n        var xDomain = data[0].timeDomain;\r\n        var yDomain = [0, data[0].childs.length+1];\r\n\r\n        var availableWidth = width - margin.left - margin.right;\r\n        var availableHeight = height - margin.top - margin.bottom;\r\n\r\n\r\n\r\n        xScale.domain(xDomain).range([0, availableWidth]);\r\n        yScale\r\n          .domain(data.map(function(item){return item.index}))\r\n          .rangeRoundBands([ 0, availableHeight], .1);\r\n\r\n         var barWidth = yScale.rangeBand()-11;\r\n         barWidth = (barWidth > 15) ? 15 : barWidth;\r\n         barWidth = (barWidth < 8) ? 8 : barWidth;\r\n         barWidth = 7;\r\n         var barMargin = 4;\r\n\r\n        data.forEach(function(d){\r\n          if(d.expenditure !== undefined){\r\n            var values = d.expenditure;\r\n            var yValues = values.map(function(item){return item.y})\r\n\r\n            d.expenditureScale = d3.scale\r\n                             .linear()\r\n                             .domain([d3.max(yValues),d3.min(yValues)])\r\n                             .range([4, yScale.rangeBand()-7]);\r\n          }\r\n\r\n          if(d.income !== undefined){\r\n            var values = d.income;\r\n            var yValues = values.map(function(item){return item.y})\r\n\r\n            d.incomeScale = d3.scale\r\n                             .linear()\r\n                             .domain([d3.max(yValues),d3.min(yValues)])\r\n                             .range([4, yScale.rangeBand()-7]);\r\n          }\r\n        })  \r\n\r\n        \r\n        var container = d3.select(this);\r\n\r\n        xAxis\r\n          .orient(\"bottom\")\r\n          .scale(xScale)\r\n          .showMaxMin(false)\r\n          .ticks( availableWidth / 100 )\r\n          .tickSize(-availableHeight, 0)\r\n          .tickPadding(2)\r\n\r\n        //------------------------------------------------------------\r\n        // Setup containers and skeleton of chart\r\n        \r\n         chart.update = function () {\r\n          container.transition().duration(transitionDuration).call(chart);\r\n        };\r\n\r\n        \r\n        container.selectAll(\"g\").remove();\r\n\r\n        var wrap = container\r\n          .append(\"g\")\r\n          .attr(\"class\", \"nvd3 nv-gantt\")\r\n          .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        wrap\r\n          .append(\"g\")\r\n          .attr(\"class\", \"nv-x nv-axis\")\r\n          .attr(\"transform\",\"translate(\" + margin.left + \",\" + availableHeight + \")\")\r\n       \r\n        wrap  \r\n          .select(\".nv-x.nv-axis\")\r\n          .call(xAxis);  \r\n          \r\n        var series =  wrap.selectAll(\"g.nv-gantt\")\r\n                  .data(data);\r\n\r\n       \r\n\r\n        var sources = wrap.selectAll(\"g.nv-gantt\")\r\n                  .data(sourcesData);\r\n\r\n        var targets = wrap.selectAll(\"g.nv-gantt\")\r\n                  .data(targetsData);\r\n\r\n        var links = wrap.selectAll(\"g.nv-gantt\")\r\n                  .data(linksData);          \r\n        \r\n        var markers = wrap.selectAll(\"g.nv-gantt\")\r\n                  .data(markersData);\r\n\r\n        series.exit().remove(); \r\n       \r\n        links.exit().remove();\r\n        sources.exit().remove();\r\n        targets.exit().remove();\r\n        markers.exit().remove();\r\n\r\n      \r\n       \r\n\r\n\r\n        \r\n      if(decoration.cause.enable){ \r\n        links\r\n            .enter()\r\n            .append(\"g\")\r\n            .attr(\"class\", \"nvd3 nv-gantt-link\")\r\n            .attr(\"transform\", function(d){ return \"translate(\" +margin.left+\",\" + 0 + \")\"});\r\n         \r\n        links\r\n          .append(\"path\")\r\n          .attr(\"class\", \"nv-area\")\r\n          .attr(\"d\", function (d) {  \r\n\r\n                  var source = {\r\n                    x: xScale(d.src.x),\r\n                    y: yScale(d.src.task)+barWidth/2+barMargin//7\r\n                  };\r\n\r\n                  var target = {\r\n                    x: xScale(d.target.x)-arrowLength(d),\r\n                    y: yScale(d.target.task)+barWidth/2+barMargin//7\r\n                  }\r\n\r\n                  return nodeToNodePath({\"source\":source, \"target\":target})\r\n\r\n           })\r\n           .style(\"stroke\", causeColor) \r\n           .style(\"fill-opacity\",0)\r\n           .style(\"stroke-width\",causeWidth)\r\n           .style(\"stroke-opacity\",causeOpacity)\r\n      }     \r\n\r\n\r\n\r\n        series  \r\n          .enter()\r\n          .append(\"g\")\r\n          .attr(\"class\", \"nvd3 nv-gantt-task\")\r\n          .attr(\"transform\", function(d){ return \"translate(\" +margin.left+\",\" + yScale(d.index) + \")\"});\r\n        \r\n        // bar implementation \r\n         // series\r\n         //  .append(\"rect\")\r\n         //  .attr(\"x\", function(d){return xScale(d.start)})\r\n         //  .attr(\"y\", function(d){return 5})\r\n         //  .attr(\"width\",function (d) {\r\n         //        // return 30\r\n         //        var end = (d.isOpen) ? xScale.domain()[1] : d.end;\r\n         //         return xScale(end)- xScale(d.start)\r\n         //  })\r\n         //  .attr(\"height\", 20)\r\n         //  .style(\"fill-opacity\",0.7)\r\n         //  .style(\"fill\",function(d){return (d.childs.length==0) ? \"#F08A24\" : \"#368a55\"})\r\n        // bar implementation  \r\n      \r\n      // rect implementation\r\n        // series\r\n        //   .append(\"path\")\r\n        //   .attr(\"class\", \"nv-area\")\r\n        //   .attr(\"d\", function (d) {\r\n\r\n                \r\n        //         var end = (d.end) ? d.end : xScale.domain()[1];\r\n\r\n                \r\n        //         var values = [\r\n        //           {x:xScale(end),y:5},\r\n        //           {x:xScale(d.start), y:5}, \r\n        //           {x:xScale(d.start), y:25},\r\n        //           {x:xScale(end), y:25},\r\n        //         ]\r\n        //        if (!d.isOpen){\r\n        //           return d3.svg.area()\r\n        //                 .interpolate(\"linear-closed\")\r\n        //                 .defined(defined)\r\n        //                 .x(function (p, i) {\r\n        //                       return p.x;\r\n        //                 })\r\n        //                 .y(function (p, i) {\r\n        //                       return p.y;\r\n        //                 })\r\n        //                 .apply(this, [values]);\r\n        //        }else{\r\n        //           return d3.svg.area()\r\n        //                 .interpolate(\"linear\")\r\n        //                 .defined(defined)\r\n        //                 .x(function (p, i) {\r\n        //                       return p.x;\r\n        //                 })\r\n        //                 .y(function (p, i) {\r\n        //                       return p.y;\r\n        //                 })\r\n        //                 .apply(this, [values]);\r\n        //        } \r\n               \r\n        //   })\r\n        //   .style(\"fill\",\"#e7e7e7\")\r\n        //   .style(\"fill-opacity\",\"0.7\")\r\n        //   .style(\"stroke\",function(d){return (d.childs.length==0) ? \"#F08A24\" : \"#368a55\"})\r\n        //   .style(\"stroke-width\",function(d){return (d.childs.length==0) ? \"3px\" : \"1px\"})\r\n        //   .style(\"stroke-opacity\", function(d){return(d.childs.length>0 && (d.expenditure || d.income))? 0 : 1 })\r\n      // rect implementation    \r\n      \r\n      \r\n      //line implementation\r\n        series\r\n          .append(\"svg:line\")\r\n          .attr(\"x1\", function (d, i) {\r\n            return xScale(d.start);\r\n          })\r\n          .attr(\"y1\", function (d, i) {\r\n            return barWidth/2+barMargin;\r\n          })\r\n          .attr(\"x2\", function (d, i) {\r\n            var end = (d.isOpen) ? xScale.domain()[1] : d.end;\r\n            return xScale(end)\r\n          })\r\n          .attr(\"y2\", function (d, i) {\r\n            return barWidth/2+barMargin;\r\n          })\r\n          .style(\"stroke\",function(d) {\r\n            return (!d.isOpen)\r\n              ? (d.childs.length==0)\r\n                  ? decoration.task.color\r\n                  : decoration.process.color\r\n              :\"url(\"+document.location.href+\"#gradient-\" + d.id + \"-\" + d.index + \")\"; \r\n          })\r\n          \r\n          .style(\"stroke-width\", barWidth+\"px\")\r\n          .style(\"stroke-opacity\", function(d){return (d.expenditure || d.income) ? 0 : 1 })\r\n\r\n        var gradient = series.append(\"linearGradient\")\r\n          .attr(\"id\", function(d) { return \"gradient-\" + d.id + \"-\" + d.index; })\r\n          .attr(\"x1\", function (d, i) {\r\n            return xScale(d.start);\r\n          })\r\n          .attr(\"y1\", function (d, i) {\r\n            barWidth/2+barMargin;\r\n          })\r\n          .attr(\"x2\", function (d, i) {\r\n            var end = (d.isOpen) ? xScale.domain()[1] : d.end;\r\n            return xScale(end)\r\n          })\r\n          .attr(\"y2\", function (d, i) {\r\n            barWidth/2+barMargin;\r\n          })\r\n          .attr(\"gradientUnits\", \"userSpaceOnUse\")\r\n          .attr(\"spreadMethod\", \"pad\");\r\n\r\n        gradient.append(\"svg:stop\")\r\n            .attr(\"offset\", \"0%\")\r\n            .attr(\"stop-color\", function(d) { \r\n              return (d.childs.length==0) \r\n                ? decoration.task.color\r\n                : decoration.process.color\r\n            })\r\n            .attr(\"stop-opacity\", 1);\r\n\r\n        // gradient.append(\"svg:stop\")\r\n        //     .attr(\"offset\", function(d){\r\n        //       var end = (d.isOpen) ? xScale.domain()[1] : d.end;\r\n        //       return 400/(xScale(end)-xScale(d.start))+\"%\"\r\n        //     })\r\n        //     .attr(\"stop-color\", function(d) {return (d.childs.length==0) ? \"#F08A24\" : \"#368a55\"})\r\n        //     .attr(\"stop-opacity\", function(d) { return (d.isOpen) ? 0.5 : 0.2});    \r\n        \r\n        // gradient.append(\"svg:stop\")\r\n        //     .attr(\"offset\", function(d){\r\n        //       var end = (d.isOpen) ? xScale.domain()[1] : d.end;\r\n        //       return ( 100 - 400/(xScale(end)-xScale(d.start)))+\"%\"\r\n        //     })\r\n        //     .attr(\"stop-color\", function(d) {\r\n        //       return (d.childs.length==0) \r\n        //         ? \"#F08A24\" \r\n        //         : \"#368a55\"\r\n        //     })\r\n        //     .attr(\"stop-opacity\",function(d) { return (d.isOpen) ? 0 : 0.2});      \r\n        \r\n        gradient.append(\"svg:stop\")\r\n            .attr(\"offset\", \"100%\")\r\n            .attr(\"stop-color\", function(d) { \r\n              return (d.childs.length==0) \r\n                ? decoration.task.color\r\n                : decoration.process.color\r\n            })\r\n            .attr(\"stop-opacity\",0);  \r\n          \r\n\r\n\r\n      // line implementation \r\n\r\n        series\r\n          .append(\"text\")\r\n          .style(\"text-anchor\", \"start\")\r\n          .attr(\"x\", function(d){\r\n            return (d.childs.length>0)?xScale(xScale.domain()[0]):xScale(d.start)\r\n          })\r\n          .attr(\"dx\",function(d){\r\n            return \"0em\" \r\n            // return (d.childs.length>0)?\"2em\":\"1em\"\r\n          })\r\n          .classed(\"nv-label\", true)\r\n          .text(function (d, i) {\r\n            var _decor = (d.childs.length>0) ? decoration.process : decoration.task;\r\n            return  \"\"\r\n                    +((_decor.id.enable) ? d.id : \"\")\r\n                    +((_decor.id.enable && _decor.title.enable) ? \".\" : \"\")\r\n                    +((_decor.title.enable) ? d.title : \"\")\r\n          })\r\n          .style(\"font-weight\", function(d){\r\n            var _decor = (d.childs.length>0) ? decoration.process.title : decoration.task.title;\r\n            return _decor.font.weight//(d.childs.length>0)?\"bold\":\"normal\"\r\n          })\r\n          .style(\"font-size\", function(d){\r\n            var _decor = (d.childs.length>0) ? decoration.process.title : decoration.task.title;\r\n            return _decor.font.size\r\n            // return (d.childs.length>0)?\"medium\":\"small\"\r\n          })\r\n          .style(\"font-family\", function(d){\r\n            var _decor = (d.childs.length>0) ? decoration.process.title : decoration.task.title;\r\n            return _decor.font.family\r\n            // return (d.childs.length>0)?\"medium\":\"small\"\r\n          })\r\n          .style(\"fill\",\"#ffffff\")\r\n          .style(\"stroke\",\"#ffffff\")\r\n          .style(\"stroke-width\",5)\r\n          .style(\"stroke-opacity\",0.8)\r\n          \r\n\r\n\r\n        series\r\n          .append(\"text\")\r\n          .style(\"text-anchor\", \"start\")\r\n          .attr(\"x\", function(d){\r\n            return (d.childs.length>0)?xScale(xScale.domain()[0]):xScale(d.start)\r\n          })\r\n          .attr(\"dx\",function(d){\r\n            return \"0em\"\r\n            // return (d.childs.length>0)?\"2em\":\"1em\"\r\n          })\r\n          .classed(\"nv-label\", true)\r\n          .text(function (d, i) {\r\n            var _decor = (d.childs.length>0) ? decoration.process : decoration.task;\r\n            return  \"\"\r\n                    +((_decor.id.enable) ? d.id : \"\")\r\n                    +((_decor.id.enable && _decor.title.enable) ? \".\" : \"\")\r\n                    +((_decor.title.enable) ? d.title : \"\")\r\n          })\r\n          .style(\"font-weight\", function(d){\r\n            var _decor = (d.childs.length>0) ? decoration.process.title : decoration.task.title;\r\n            return _decor.font.weight//(d.childs.length>0)?\"bold\":\"normal\"\r\n          })\r\n          .style(\"font-size\", function(d){\r\n            var _decor = (d.childs.length>0) ? decoration.process.title : decoration.task.title;\r\n            return _decor.font.size\r\n            // return (d.childs.length>0)?\"medium\":\"small\"\r\n          })\r\n           .style(\"font-family\", function(d){\r\n            var _decor = (d.childs.length>0) ? decoration.process.title : decoration.task.title;\r\n            return _decor.font.family\r\n            // return (d.childs.length>0)?\"medium\":\"small\"\r\n          })\r\n          // .text(function (d, i) {\r\n          //   return d.id+\".\"+d.title;\r\n          // })\r\n          // .style(\"font-weight\", function(d){return (d.childs.length>0)?\"bold\":\"normal\"})\r\n          // .style(\"font-size\", function(d){return (d.childs.length>0)?\"medium\":\"small\"})\r\n          .style(\"fill\",function(d){\r\n            var _decor = (d.childs.length>0) ? decoration.process.title : decoration.task.title;\r\n            return _decor.font.color\r\n          })\r\n\r\n      if(decoration.expenditure.enable){    \r\n        series\r\n          .filter(function(d){return d.expenditure !== undefined})\r\n          .append(\"path\")\r\n          .attr(\"class\", \"nv-area\")\r\n          .attr(\"d\", function (d) {\r\n               \r\n                return d3.svg.area()\r\n                        .interpolate(interpolate)\r\n                        .defined(defined)\r\n                        .x(function (p, i) {\r\n                              return nv.utils.NaNtoZero(xScale(getX(p, i)));\r\n                        })\r\n                        .y0(function (p, i) {\r\n                              return nv.utils.NaNtoZero(d.expenditureScale(getY(p, i)));\r\n                        })\r\n                        .y1(function (p, i) {\r\n                              return d.expenditureScale( d.expenditureScale.domain()[1]\r\n                              );\r\n                        })\r\n                        .apply(this, [d.expenditure]);\r\n          })\r\n          .style(\"fill-opacity\",0.2)\r\n          .style(\"fill\",decoration.expenditure.color);\r\n\r\n        series\r\n          .filter(function(d){return d.expenditure !== undefined})\r\n          .append(\"path\")\r\n          .attr(\"class\", \"nv-area\")\r\n          .attr(\"d\", function (d) {\r\n                return d3.svg.line()\r\n                        .interpolate(interpolate)\r\n                        .defined(defined)\r\n                        .x(function (p, i) {\r\n                              return nv.utils.NaNtoZero(xScale(getX(p, i)));\r\n                        })\r\n                        .y(function (p, i) {\r\n                              return nv.utils.NaNtoZero(d.expenditureScale(getY(p, i)));\r\n                        })\r\n                        .apply(this, [d.expenditure]);\r\n          })\r\n          .style(\"fill-opacity\",0)\r\n          .style(\"stroke-width\",decoration.expenditure.width)\r\n          .style(\"stroke\",decoration.expenditure.color);//#43AC6A\r\n      }\r\n      \r\n      if(decoration.income.enable){    \r\n        series\r\n          .filter(function(d){return d.income !== undefined})\r\n          .append(\"path\")\r\n          .attr(\"class\", \"nv-area\")\r\n          .attr(\"d\", function (d) {\r\n               \r\n                return d3.svg.area()\r\n                        .interpolate(interpolate)\r\n                        .defined(defined)\r\n                        .x(function (p, i) {\r\n                              return nv.utils.NaNtoZero(xScale(getX(p, i)));\r\n                        })\r\n                        .y0(function (p, i) {\r\n                              return nv.utils.NaNtoZero(d.incomeScale(getY(p, i)));\r\n                        })\r\n                        .y1(function (p, i) {\r\n                              return d.incomeScale( d.incomeScale.domain()[1]\r\n                              );\r\n                        })\r\n                        .apply(this, [d.income]);\r\n          })\r\n          .style(\"fill-opacity\",0.2)\r\n          .style(\"fill\",decoration.income.color);\r\n\r\n        series\r\n          .filter(function(d){return d.income !== undefined})\r\n          .append(\"path\")\r\n          .attr(\"class\", \"nv-area\")\r\n          .attr(\"d\", function (d) {\r\n                return d3.svg.line()\r\n                        .interpolate(interpolate)\r\n                        .defined(defined)\r\n                        .x(function (p, i) {\r\n                              return nv.utils.NaNtoZero(xScale(getX(p, i)));\r\n                        })\r\n                        .y(function (p, i) {\r\n                              return nv.utils.NaNtoZero(d.incomeScale(getY(p, i)));\r\n                        })\r\n                        .apply(this, [d.income]);\r\n          })\r\n          .style(\"fill-opacity\",0)\r\n          .style(\"stroke-width\",decoration.income.width)\r\n          .style(\"stroke\",decoration.income.color);//#43AC6A\r\n      }    \r\n\r\n        // sources\r\n        //   .enter()\r\n        //   .append(\"g\")\r\n        //   .attr(\"class\", \"nvd3 nv-gantt-source\")\r\n        //   .attr(\"transform\", function(d){ return \"translate(\" +margin.left+\",\" + yScale(d.task) + \")\"});\r\n\r\n        // sources\r\n        //   .append(\"circle\")\r\n        //   .attr(\"r\",8)\r\n        //   .attr(\"cx\", function(d){return xScale(d.x)})\r\n        //   .attr(\"cy\", 14)\r\n        //   .style(\"fill\",causeColor)\r\n        //   .style(\"fill-opacity\",0.5)\r\n        //   \r\n      \r\n      if(decoration.cause.enable){     \r\n        targets\r\n        .enter()\r\n        .append(\"g\")\r\n        .attr(\"class\", \"nvd3 nv-gantt-target\")\r\n        .attr(\"transform\", function(d){ return \"translate(\" +margin.left+\",\" + yScale(d.task) + \")\"});\r\n\r\n        targets\r\n          .append(\"path\")\r\n          .attr(\"d\", function(d){\r\n            var width = causeWidth(d);\r\n            width = (width < 4) ? 4 : width;\r\n            return arrowPath({x:xScale(d.x), y:+barWidth/2+barMargin, \"width\":width})//7})\r\n          })\r\n          .style(\"stroke-opacity\",0)\r\n          .style(\"stroke\", causeColor)\r\n          .style(\"fill\",causeColor)\r\n          .style(\"fill-opacity\",causeOpacity)\r\n      }    \r\n\r\n      if(decoration.expenditure.enable || decoration.income.enable ){\r\n        markers\r\n          .enter()\r\n          .append(\"g\")\r\n          .attr(\"class\", \"nvd3 nv-gantt-marker\")\r\n          .attr(\"transform\", function(d){ return \"translate(\" +margin.left+\",\" + yScale(d.index) + \")\"});\r\n\r\n        markers\r\n          .append(\"circle\")\r\n          .attr(\"r\",function(d){\r\n            return  (d.type == \"expenditure\") ? decoration.expenditure.width : decoration.income.width\r\n          })\r\n          .attr(\"cx\", function(d){return xScale(d.x)})\r\n          .attr(\"cy\", function(d){\r\n            var s = (d.type == \"expenditure\") ? data[d.index].expenditureScale : data[d.index].incomeScale\r\n            return s(d.y)\r\n          })\r\n          .style(\"fill\",function(d){\r\n            return (d.type == \"expenditure\")?decoration.expenditure.color : decoration.income.color//\"#F04124\":\"#43AC6A\"\r\n          });\r\n            \r\n         markers\r\n          .append(\"text\")\r\n          .text(function(d){return d.marker})\r\n          .style(\"text-anchor\", \"middle\")\r\n          .attr(\"x\", function(d){\r\n              return xScale(d.x)\r\n          })\r\n          .attr(\"y\", function(d){\r\n            var s = (d.type == \"expenditure\") ? data[d.index].expenditureScale : data[d.index].incomeScale\r\n            return s(d.y)\r\n          })\r\n          .attr(\"dy\", \"-0.5em\")\r\n          .style(\"font-size\", function(d){\r\n            return (d.type == \"expenditure\") \r\n              ? decoration.expenditure.font.size \r\n              : decoration.income.font.size\r\n          })  \r\n          //\"xx-small\")\r\n          .style(\"font-weight\", function(d){\r\n            return (d.type == \"expenditure\") \r\n              ? decoration.expenditure.font.weight \r\n              : decoration.income.font.weight\r\n          })  \r\n          .style(\"font-family\", function(d){\r\n            return (d.type == \"expenditure\") \r\n              ? decoration.expenditure.font.family \r\n              : decoration.income.font.family\r\n          })  \r\n\r\n          //\"bold\")\r\n          .style(\"fill\",\"#ffffff\")\r\n          .style(\"stroke\",\"#ffffff\")\r\n          .style(\"stroke-width\",3)\r\n          .style(\"stroke-opacity\",0.3)\r\n\r\n\r\n        markers\r\n          .append(\"text\")\r\n          .text(function(d){return d.marker})\r\n          .style(\"text-anchor\", \"middle\")\r\n          .attr(\"x\", function(d){\r\n              return xScale(d.x)\r\n          })\r\n          .attr(\"y\", function(d){\r\n            var s = (d.type == \"expenditure\") ? data[d.index].expenditureScale : data[d.index].incomeScale\r\n            return s(d.y)\r\n          })\r\n          .attr(\"dy\", \"-0.5em\")\r\n          .style(\"font-size\", function(d){\r\n            return (d.type == \"expenditure\") \r\n              ? decoration.expenditure.font.size \r\n              : decoration.income.font.size\r\n          })  \r\n          //\"xx-small\")\r\n          .style(\"font-weight\", function(d){\r\n            return (d.type == \"expenditure\") \r\n              ? decoration.expenditure.font.weight \r\n              : decoration.income.font.weight\r\n          })  \r\n          .style(\"font-family\", function(d){\r\n            return (d.type == \"expenditure\") \r\n              ? decoration.expenditure.font.family \r\n              : decoration.income.font.family\r\n          })  \r\n          // .style(\"font-size\",\"xx-small\")\r\n          // .style(\"font-weight\",\"bold\")\r\n          .style(\"fill\",function(d){\r\n            return (d.type == \"expenditure\")\r\n              ? decoration.expenditure.font.color \r\n              : decoration.income.font.color\r\n          });\r\n\r\n\r\n        wrap\r\n        .selectAll(\".nv-gantt-marker text\")\r\n        .call(textWrap, 2 * (xScale(xScale.domain()[1])-xScale(xScale.domain()[0]))/xScale.ticks().length);  \r\n      }    \r\n\r\n      })\r\n\r\n      return chart;\r\n    \r\n  }  \r\n\r\n\r\n    //============================================================\r\n    // Expose Public Variables\r\n    //------------------------------------------------------------\r\n\r\n    //chart.dispatch = dispatch;\r\n    chart.options = nv.utils.optionsFunc.bind(chart);\r\n\r\n    chart.margin = function (_) {\r\n      if (!arguments.length) return margin;\r\n      margin.top = typeof _.top != \"undefined\" ? _.top : margin.top;\r\n      margin.right = typeof _.right != \"undefined\" ? _.right : margin.right;\r\n      margin.bottom = typeof _.bottom != \"undefined\" ? _.bottom : margin.bottom;\r\n      margin.left = typeof _.left != \"undefined\" ? _.left : margin.left;\r\n      return chart;\r\n    };\r\n\r\n    chart.width = function (_) {\r\n      if (!arguments.length) return width;\r\n      width = _;\r\n      return chart;\r\n    };\r\n\r\n    chart.height = function (_) {\r\n      if (!arguments.length) return height;\r\n      height = _;\r\n      return chart;\r\n    };\r\n\r\n    \r\n    //============================================================\r\n    return chart;\r\n  };\r\n\r\n\r\n})();\r\n\r\n\r\n"],"sourceRoot":"/source/"}