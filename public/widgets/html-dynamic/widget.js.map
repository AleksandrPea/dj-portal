{"version":3,"sources":["html-dynamic/widget.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,kBAAkB,UAAU,KAAK,EAAE,OAAO,OAAO,IAAI,aAAa,IAAI,aAAa;;AAEvF,IAJO,UAAO,gBAAA,QAAM;;AAGpB,QAAQ,OAAO,4BAA4B,IACtC,WAAW,yGAAsB,UAAS,QAAQ,aAAa,MAAM,QAAQ,MAAM,QAAQ,MAAM,WAAW;;IAEzG,OAAO,SAAS,YAAU;QACtB,IAAG,OAAO,QAAO;YACb,KAAK,KAAK,eAAc;gBACpB,QAAU,OAAO;gBACjB,QAAU,KAAK;eAElB,KAAK,UAAC,MAAS;gBACZ,IAAI,KAAK,KAAK,QAAQ,SAAS;oBACnB,OAAO,KAAK,KAAK;oBACjB,OAAO,OAAQ;;oBAEf;iBACH;gBACT,OAAO,OAAQ,KAAK,YAAY,KAAK,KAAK;;;eAG7C;YACA,OAAO,OAAQ;;;;;IAKxB,IAAI,YAAY,QACX,OAAO,YAAM;QACV,OAAO,SAAS,OAAO,OAAO;QAC9B,OAAO;OAGV,mBAAmB,YAAM;QACtB,UAAU,OAAO,QACZ,KAAK,UAAC,QAAW;YACd,OAAO,SAAS;YAChB,OAAO,OAAO,SAAS;YACvB,OAAO;;;IAIxB","file":"html-dynamic/widget.js","sourcesContent":["import angular from 'angular';\r\n\r\n\r\nangular.module('app.widgets.html-dynamic', [])\r\n    .controller('HtmlDynaController', function($scope, APIProvider, i18n, dialog, $dps, $error, $sce, dpsEditor) {\r\n        \r\n        $scope.update = function(){\r\n            if($scope.script){\r\n                $dps.post(\"/api/script\",{\r\n                    \"script\": $scope.script,\r\n                    \"locale\": i18n.locale()\r\n                })\r\n                .then((resp) => {\r\n                    if (resp.data.type == \"error\") {\r\n                                $error(resp.data.data);\r\n                                $scope.html =  \"\";\r\n                                 // $scope.container.getElement()[0].children[0].children[0].innerHTML = \"\";\r\n                                return\r\n                            };\r\n                    $scope.html =  $sce.trustAsHtml(resp.data.data);\r\n                    // $scope.container.getElement()[0].children[0].children[0].innerHTML = resp.data.data;\r\n                })\r\n            }else{\r\n                 $scope.html =  \"\";\r\n                 // $scope.container.getElement()[0].children[0].children[0].innerHTML = \"\";\r\n            }\r\n        }\r\n\r\n        new APIProvider($scope)\r\n            .config(() => {\r\n                $scope.script = $scope.widget.script;\r\n                $scope.update()\r\n            })\r\n\r\n            .openCustomSettings(() => {\r\n                dpsEditor($scope.script)\r\n                    .then((script) => {\r\n                        $scope.script = script;\r\n                        $scope.widget.script = script;\r\n                        $scope.update();\r\n                    })\r\n            })\r\n            \r\n    });\r\n"],"sourceRoot":"/source/"}