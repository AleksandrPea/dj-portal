{"version":3,"sources":["page-list/widget.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,kBAAkB,UAAU,KAAK,EAAE,OAAO,OAAO,IAAI,aAAa,IAAI,aAAa;;AAEvF,IAJO,UAAO,gBAAA,QAAM;;AAEpB,IAAM,iBAAiB,QAAQ,OAAO,yBAAyB;;AAE/D,eAAe,QAAQ,uCAAqB,UAAU,KAAK,QAAQ;EACjE,OAAO,YAAM;IACX,OAAO,KAAK;MACV,aAAa;MACb,YAAY;MACZ,UAAU;MACV,SAAS;QACP,wCAAa,SAAA,cAAA,sBAAuB;UAClC,OAAO;;;OAGV,OAAO,KAAK,YAAA;MAKb,OALmB,IAAI,aAAa;;;;;AAI1C,eAAe,QAAQ,oCAAkB,UAAU,KAAK,QAAQ;EAC9D,OAAO,UAAA,MAAQ;IACb,IAAM,WAAW,IAAI,aAAa,SAAS,KAAK;IAChD,OAAO,KAAK;MACV,aAAa;MACb,YAAY;MACZ,UAAU;MACV,SAAS;QACP,MAAM,YAAA;UAOJ,OAPU;;;OAEb,OACA,KAAK,YAAM;MACV,IAAI,aAAa;MACjB,IAAI,UAAU;QACZ,OAAO,GAAG,QAAQ,EAAC,MAAM,KAAK,QAAO,EAAC,QAAQ;;;;;;AAKxD,eAAe,WAAW,iKAAsB,UAAU,QAAQ,YAAY,QAAQ,QACtC,KAAK,SAAS,QACd,cAAc,SACd,mBAAmB,gBAAgB;;EAEjF,QAAQ,OAAO,QAAQ;IACrB,SAAA;IACA,QAAA;;IAEA,mBAAA;;IAEA,gBAAA;;IAEA,4BAA0B,SAAA,2BAAA,MAAO;MAC/B,WAAW,6CACR,KAAK,SACL,KAAK,YAAA;QAIN,OAJkB,IAAI,WAAW;;;;;MASnC","file":"page-list/widget.js","sourcesContent":["import angular from 'angular';\r\n\r\nconst pageListWidget = angular.module('app.widgets.page-list', []);\r\n\r\npageListWidget.factory('addNewPageInModal', function (app, $modal) {\r\n  return () => {\r\n    $modal.open({\r\n      templateUrl: '/widgets/page-list/new-page-modal-config.html',\r\n      controller: 'AddNewPageModalController',\r\n      backdrop: 'static',\r\n      resolve: {\r\n        templateTypes(templateTypesPromise) {\r\n          return templateTypesPromise;\r\n        }\r\n      }\r\n    }).result.then(() => app.markModified(true));\r\n  }\r\n})\r\n\r\npageListWidget.factory('openPageConfig', function (app, $modal) {\r\n  return page => {\r\n    const thisPage = app.pageConfig().href === page.href;\r\n    $modal.open({\r\n      templateUrl: '/widgets/page-list/page-modal-config.html',\r\n      controller: 'PageSettingsModalController',\r\n      backdrop: 'static',\r\n      resolve: {\r\n        page: () => page\r\n      }\r\n    }).result\r\n      .then(() => {\r\n        app.markModified(true);\r\n        if (thisPage) {\r\n          $state.go('page', {href: page.href}, {reload: true});\r\n        }\r\n      });\r\n}});\r\n\r\npageListWidget.controller('PageListController', function ($scope, $translate, $modal, $state,\r\n                                                app, appName, config,\r\n                                                globalConfig, confirm,\r\n                                                addNewPageInModal, openPageConfig) {\r\n  // TODO: synchronize css styles on active link after clicking\r\n  angular.extend($scope, {\r\n    appName,\r\n    config,\r\n\r\n    addNewPageInModal,\r\n\r\n    openPageConfig,\r\n\r\n    deletePageWithConfirmation(page) {\r\n      $translate('WIDGET.PAGE-LIST.ARE_YOU_SURE_DELETE_PAGE')\r\n        .then(confirm)\r\n        .then((/*ok*/) => app.deletePage(page))\r\n    }\r\n  });\r\n});\r\n"],"sourceRoot":"/source/"}